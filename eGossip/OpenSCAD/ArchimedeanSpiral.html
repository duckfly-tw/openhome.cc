<!doctype html><html lang="en-us">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="As I said in the summary of Spiral moving fish, when I published Moving fish, someone said: &ldquo;C...">

<meta property="og:locale" content="en_US">
<meta property="og:title" content="Archimedean spiral">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/OpenSCAD/ArchimedeanSpiral.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="As I said in the summary of Spiral moving fish, when I published Moving fish, someone said: &ldquo;C...">

    <title>Archimedean spiral</title>

<link rel="stylesheet" href="http://openhome.cc/Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="http://openhome.cc/Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="http://openhome.cc/Gossip/css/caterpillar.css">
     <script async src="http://openhome.cc/Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="ArchimedeanSpiral.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="http://openhome.cc/eGossip/OpenSCAD/index.html">&lt;&lt; OpenSCAD TOC</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Archimedean spiral</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>As I said in the summary of <a href="https://www.thingiverse.com/thing:1763139">Spiral moving fish</a>, when I published Moving fish, someone said: &ldquo;Could you coil up the fish to allow more segments?&rdquo; After attempting for a period, I created the work.</p>

<p>Coiling up the fish or the heart chain is similar.</p>

<p>From both works, you might have found. We need a spiral whose any ray from the origin intersects successive turnings of the spiral in points with a constant separation distance. The <a href="https://en.wikipedia.org/wiki/Archimedean_spiral">Archimedean spiral</a> is what we want.</p>
<h1>Archimedean spiral</h1>
<p>As it said in <a href="https://en.wikipedia.org/wiki/Archimedean_spiral">Archimedean spiral</a>, it can be described by the equation <code>r = a + bθ</code> and the constant separation distance is equal to <code>2πb</code> if we measure <code>θ</code> in radians. The <code>a</code> and <code>b</code> are real numbers. Changing the parameter <code>a</code> will turn the spiral, while <code>b</code> controls the distance between successive turnings. We don't have to turn the spiral so here let <code>a = 0</code>  for simplification.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Archimedean_spiral.png/300px-Archimedean_spiral.png" alt="Archimedean spiral"  /></div></div></p>
<p>Once you know the spiral equation is <code>r = bθ</code>, it's not hard to draw an Archimedean spiral. Just one thing. The trigonometric functions of OpenSCAD accept degrees, not radians, so you have to map radians to degrees by yourself before invoking these functions.</p>
<pre class="prettyprint"><code lang="openscad">module line(point1, point2, width = 1, cap_round = true) {
    angle = 90 - atan((point2[1] - point1[1]) / (point2[0] - point1[0]));
    offset_x = 0.5 * width * cos(angle);
    offset_y = 0.5 * width * sin(angle);

    offset1 = [-offset_x, offset_y];
    offset2 = [offset_x, -offset_y];

    if(cap_round) {
        translate(point1) circle(d = width, $fn = 24);
        translate(point2) circle(d = width, $fn = 24);
    }

    polygon(points=[
        point1 + offset1, point2 + offset1,  
        point2 + offset2, point1 + offset2
    ]);
}

module polyline(points, width = 1) {
    module polyline_inner(points, index) {
        if(index &lt; len(points)) {
            line(points[index - 1], points[index], width);
            polyline_inner(points, index + 1);
        }
    }

    polyline_inner(points, 1);
}

PI = 3.14159;
step = 0.25;
circles = 5;
arm_len = 10;

b = arm_len / 2 / PI;
// one radian is almost 57.2958 degrees
points = [for(theta = [0:step:2 * PI * circles])
    [b * theta * cos(theta * 57.2958), b * theta * sin(theta * 57.2958)]
];

polyline(points, 1);
</code></pre>
<p>It seems no problem.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/ArchimedeanSpiral-1.JPG" alt="Archimedean spiral"  /></div></div></p>
<p>But if you increase the <code>step</code> value to 1 or more, what will happen?</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/ArchimedeanSpiral-2.JPG" alt="Archimedean spiral"  /></div></div></p>
<p>What? The distance between two successive points increases when you increase the radian. Why does it matter? If you place hearts on these points, the distance between hearts will also increase. For simplification, we just use circles here.</p>
<pre class="prettyprint"><code lang="openscad">PI = 3.14159;
step = 0.2;
circles = 5;
arm_len = 10;

b = arm_len / 2 / PI;
for(theta = [0:step:2 * PI * circles]) {
    rotate(theta * 57.2958) 
        translate([b * theta, 0, 0]) 
            circle(1, $fn = 24);
}
</code></pre>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/ArchimedeanSpiral-3.JPG" alt="Archimedean spiral"  /></div></div></p>
<p>The result is not what we want. We not only need a constant separation distance between two turnings but also require a steady distance between two points whose angle are equal. Only when theses conditions are satisfied, things like a heart chain can fit together.</p>
<p>Simply put, you cannot only increase the radian with a constant increment. A bigger <code>θ</code> causes a longer <code>r</code>, and a longer <code>r</code> creates a greater arc in the condition of a constant increment of the radian. That's why the distance between points are longer and longer.</p>
<h1>Finding the increment</h1>
<p>To have a constant distance between points, we have to find every increment on the radian. Let's list the relationships we've known currently.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/ArchimedeanSpiral-4.JPG" alt="Archimedean spiral"  /></div></div></p>
<p>Suppose the current angle is <code>Ai</code> radians, the length of a ray is <code>Ri = b * Ai</code>. If it needs to increase <code>ad</code> radians to make the distance <code>L</code> between points, the length of the ray is <code>R = b * (Ai + ad)</code>. According to law of cosines, we have <code>L * L = R * R + Ri * Ri - 2 * R * Ri * cos(ad * 180 / π)</code>.</p>
<p>Theoretically, using <code>b * (Ai + ad)</code> to substitute <code>R</code> can finally get what the <code>ad</code> is.</p>
<p>But, it's not easy to evaluate the <code>ad</code> value. What can we do now?</p>
<p>I use approximation here. Because the <code>L</code> value is small when coiling up the fish or the heart, the <code>ad</code> value is also small. That is, we can approximate <code>R</code> to <code>Ri</code>, so we can simplify the equation to <code>L * L =  Ri * Ri + Ri * Ri - 2 * Ri * Ri * cos(ad * 180 / π)</code>.</p>
<p>Then, we can get <code>ad = acos((2 * Ri * Ri - L * L) / (2 * Ri * Ri)) / 180 * π</code>.</p>
<p>Of course, the <code>ad</code> is not a constant value. In order to have a constant <code>L</code> value, the <code>ad</code> value decreases every time. Once we know the current <code>ad</code>, we can get the next <code>Ri = b * (Ai + ad)</code>. After knowing the next <code>Ri</code>, we can get the next <code>ad = acos((2 * Ri * Ri - L * L) / (2 * Ri * Ri)) / 180 * π</code>.</p>
<p>When modeling, we have to evaluate all radians. It is done recursively by the <code>find_radians</code> function.</p>
<pre class="prettyprint"><code lang="openscad">PI = 3.14159;

dots = 100;            // number of dots
dot_dist = 5;          // distance between points
arm_len = 5;           // ray length
init_radian = PI * 4;  // initial angle

b = arm_len / 2 / PI;

function r(b, theta) = b * theta;

function radian_step(b, theta, l) = 
    acos((2 * pow(r(b, theta), 2) - pow(l, 2)) / (2 * pow(r(b, theta), 2))) / 180 * PI;

function find_radians(b, l, radians, n, count = 1) =
    count == n ? radians : (
        find_radians(
            b, 
            l, 
            concat(
                radians, // current angle
                [radians[count - 1] + radian_step(b, radians[count - 1], l)] // angle after rotating
            ), 
            n,
        count + 1)
    );

for(theta = find_radians(b, dot_dist, [init_radian], dots)) {
    rotate(theta * 57.2958) 
        translate([b * theta, 0, 0]) 
            circle(1, $fn = 24);
}
</code></pre>
<p>Because we use the approximation, the initial value should be small to avoid a significant error. This approach is enough for coiling up the fish or the heart chain.</p>
<p>Let's see how the model is.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/ArchimedeanSpiral-5.JPG" alt="Archimedean spiral"  /></div></div></p>
<p>Now, you can use your models to replace those circles. After adjusting some parameters, you can coil up anything you want. How about a snake?</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article></main></div></body>
<script src="http://openhome.cc/Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
