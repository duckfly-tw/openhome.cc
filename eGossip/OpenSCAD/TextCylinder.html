<!doctype html><html lang="en-us">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Character tower generator is one of my favorites.

You may input text to generate a tower. The numbe...">

<meta property="og:locale" content="en_US">
<meta property="og:title" content="Text and cylinder">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/OpenSCAD/TextCylinder.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="Character tower generator is one of my favorites.

You may input text to generate a tower. The numbe...">

    <title>Text and cylinder</title>

<link rel="stylesheet" href="http://openhome.cc/Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="http://openhome.cc/Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="http://openhome.cc/Gossip/css/caterpillar.css">
     <script async src="http://openhome.cc/Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="TextCylinder.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="http://openhome.cc/eGossip/OpenSCAD/index.html">&lt;&lt; OpenSCAD TOC</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Text and cylinder</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p><a href="https://www.thingiverse.com/thing:1241377">Character tower generator</a> is one of my favorites.</p>
<p><a href="https://www.thingiverse.com/thing:1241377"><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="https://openhome.cc/Gossip/OpenSCAD/images/HelloOpenSCAD-7.JPG" alt="Character tower generator"  /></div></div></a></p>
<p>You may input text to generate a tower. The number of characters determines the height of the tower. The more you input, the higher it is. The text in the above picture comes from <a href="https://www.geeksaresexy.net/2014/04/14/top-20-replies-by-programmers-when-their-programs-dont-work-pict/">Top 20 Replies by Programmers When Their Programs Don’t Work</a>.</p>
<h1>Wrapping text around a cylinder</h1>
<p>If you know how to wrap text around a circle, introduced in <a href="TextCircle.html">Text and circle</a>, it's not hard to wrap text around a cylinder. The first of all is determining what parameters users can use. Maybe you provide <code>radius</code> and <code>font_size</code>, then calculate the number of characters of a circle automatically. You might also provide <code>number_of_characters</code> and <code>font_size</code>, and then calculate the circle radius. Calculating the font size from <code>radius</code> and <code>number_of_characters</code> is also considerable. All designs are ok. It's up to you or your target users.</p>
<p>If your target users are designers or developers, they may want all these versions. If they are normal users, they might be confused by too many options. As for me, I just want to verify my thoughts through modeling.  I'm very casual about parameters, sometimes determined by future printing requirements. Well, it's designed by programming. You can modify the code if necessary, right?</p>
<p>Here, for simplification, the characters of a circle is a constant number 40, and the radius is 40mm because it's almost a pen holder's radius. Now that, if you want to wrap text around a circle, the angle between two characters is <code>360 / 40 = 9</code> degrees, and the font size of the character is <code>2 * PI * 40 / 40 = 2 * PI</code>.</p>
<p>Of course, no magic number. It's clear if you write the code below.</p>
<pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;

for(i = [0 : chars_per_circle - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, 0]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) text(
                chars[i], 
                font = "Courier New; Style = Bold", 
                size = char_size, 
                valign = "center", halign = "center"
            );
}
</code></pre>
<p>The model created is as below. ：</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-1.JPG" alt="Text and cylinder"  /></div></div></p>
<p>Of course, the code only wraps text around a circle. Next, we have to move down each character a little. But what height should we move down for each character? Because we have 40 characters for each circle, we have to move down <code>char_size / 40</code> for each character until consuming all characters.</p>
<pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;
z_offset_per_char = char_size / 40;


for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) text(
                chars[i], 
                font = "Courier New; Style = Bold", 
                size = char_size, 
                valign = "center", halign = "center"
            );
}
</code></pre>
<p>We create the following model.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-2.JPG" alt="Text and cylinder"  /></div></div></p>
<h1>Adding a spiral</h1>
<p>Yes, a disconnected character is not printable. We have to add a spiral to connect characters. As mentioned in <a href="Polyline3D.html">3D line</a>, one of the solutions is using small and intensive cubes on the path of the spiral.</p>
<p>But, even it looks like a spiral, it still consists of cubes. The model will have too many facets so that rendering will take a long time, and the size of the exported file will be large.</p>
<p>Here, we take an economical way. We add a short line on the top of each character.</p>
<pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;
z_offset_per_char = char_size / 40;
line_thickness = char_size / 8;


for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) 
                  union() {
                    text(
                        chars[i], 
                        font = "Courier New; Style = Bold", 
                        size = char_size, 
                        valign = "center", halign = "center"
                    );
                    translate([0, char_size / 2, 0])
                        square([char_size, line_thickness], center = true);
                }
}
</code></pre>
<p>However, the result seems not okay.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-3.JPG" alt="Text and cylinder"  /></div></div></p>
<p>There's a gap between two lines. It's not a problem. We just have to increase the line length. Here, for simplification, I just try and error to find a number 1.106 for scaling the length. It's enough for lines to touch each other.</p>
<p>But, we have another problem.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-4.JPG" alt="Text and cylinder"  /></div></div></p>
<p>There's a drop between two lines. We have to tilt each line several degrees. If you don't want to try and error again, think about it. We've known the font size, the circumference, and the line width. They have the following relationship.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-5.JPG" alt="Text and cylinder"  /></div></div></p>
<p>We can get the tangent value from the above figure, so the tilted angle is <code>atan((font size + line width) / circumference)</code>.</p>
<pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
z_offset_per_char = char_size / 40;
char_thickness = 1;
line_thickness = char_size / 8;
line_angle_offset = -atan((char_size - line_thickness)/circumference);

for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) union() {
                text(
                    chars[i], 
                    font = "Courier New; Style = Bold", 
                    size = char_size, 
                    valign = "center", halign = "center"
                );
                rotate([0, 0, line_angle_offset]) translate([0, char_size / 2, 0])
                    square([char_size * 1.106, line_thickness], center = true);
            }
}
</code></pre>
<p>It looks smoother now.</p>
<p><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-6.JPG" alt="Text and cylinder"  /></div></div></p>
<p>What? The decimal point of 3.14159 is overhang! It's an exercise for you. Try to fix it. Making it a pen holder is also an exercise. If you want, try to align each face and character to decrease the complexity of the model.</p>
<p>You might remember the <code>polyline3D</code> module developed in <a href="Polyline3D.html">3D line</a>. We used the module to create a spiral. That's also a way to add a spiral for you pen holder.</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article></main></div></body>
<script src="http://openhome.cc/Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
