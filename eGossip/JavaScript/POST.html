<!doctype html><html lang="en-us">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="HTTP defines POST as posting data to the Request-URI. POST is a non-idempotent method. That is, the ...">

<meta property="og:locale" content="en_US">
<meta property="og:title" content="Making POST Requests">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/Blog/POST.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="HTTP defines POST as posting data to the Request-URI. POST is a non-idempotent method. That is, the ...">


    <title>Making POST Requests</title>

<link rel="stylesheet" href="http://openhome.cc/Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="http://openhome.cc/Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="http://openhome.cc/Gossip/css/caterpillar.css">
     <script async src="http://openhome.cc/Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="POST.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">&lt;&lt; JavaScript TOC</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Making POST Requests</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            

      <br>
      HTTP defines POST as posting data to the Request-URI. POST is a non-idempotent method. That is, the side-effects of N &gt; 0 identical POST requests may be different. POST may change the server's state, such as changing database content or store files on the server. <br>
      <br>
      We can send a POST request by setting <span class="courier">'POST'</span> to the first parameter of the asynchronous object's <span

        class="courier">open</span> function, and then use the <span class="courier">setRequestHeader</span> function to specify its content type. The posted data will be put in the post body of the request, so the server needs the content type information. The posted data will be the argument when calling the <span

        class="courier">send</span> function.<br>
      &nbsp;<br>
      For example, when posting form data, the <span class="courier">'Content-Type'</span> header should be <span

        class="courier">'application/x-www-form-urlencoded'</span>. The following is a demonstration. <br>
      <div class="courier" style="margin-left: 40px;"><span><strong>...</strong></span><span><strong><br>
          </strong></span><span><strong>var url = 'somewhere';</strong></span><span><strong><br>
          </strong></span><span><strong>var queryString = 'a=10&amp;b=20';</strong></span><span><strong><br>
          </strong></span><span><strong>xmlHttp.open('POST', url);</strong></span><span><strong><br>
          </strong></span><span><strong>xmlHttp.setRequestHeader('Content-Type',&nbsp; 'application/x-www-form-urlencoded');</strong></span><span><strong><br>
          </strong></span><span><strong>xmlHttp.send(queryString); </strong></span></div>
      <br>
      The data put in the post body may be other formats, such as XML or JSON. You should set respective request headers for them. I'll mention them afterword. <br>
      <br>
      The following example encapsulates several operations of asynchronous objects, and use that to rewrite the second example of <a

        href="GET.html">Making GET Requests</a>. <br>
      <ul>
        <li><a href="samples/POST-1.html">POST-1.html</a></li>
      </ul>
      <pre class="prettyprint"><code lang="javascript">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta content="text/html; charset=UTF-8" http-equiv="content-type"&gt;
        &lt;script type="text/javascript"&gt;
            window.onload = function() {
                var xhr = window.XMLHttpRequest &amp;&amp; 
                      (window.location.protocol !== 'file:' 
                          || !window.ActiveXObject) ?
                       function() {
                           return new XMLHttpRequest();
                       } :
                       function() {
                          try {
                             return new ActiveXObject('Microsoft.XMLHTTP');
                          } catch(e) {
                             throw new Error('XMLHttpRequest not supported');
                          }
                       };
                
                function param(obj) {
                    var pairs = [];
                    for(var name in obj) {
                        var pair = encodeURIComponent(name) + '=' + 
                                   encodeURIComponent(obj[name]);
                        pairs.push(pair.replace('/%20/g', '+'));
                    }
                    return pairs.join('&amp;');
                }
                
                function ajax(option) {
                    option.type = option.type || 'GET';
                    option.header = option.header || {
                      'Content-Type':'application/x-www-form-urlencoded'};
                    option.callback = option.callback || function() {};
                    
                    if(!option.url) {
                        return;
                    }
                    
                    var request = xhr();
                    request.onreadystatechange = function() {
                        option.callback.call(request, request);
                    };
                    
                    var body = null;
                    var url = option.url;
                    if(option.data) {
                        if(option.type === 'POST') {
                            body = param(option.data);
                        }
                        else {
                            url = option.url + '?' + param(option.data) 
                                     + '&amp;time=' + new Date().getTime();
                        }
                    }
                    
                    request.open(option.type, url);
                    for(var name in option.header) {
                        request.setRequestHeader(
                                name, option.header[name]);
                    }
                    request.send(body);
                }
                
                document.getElementById('url').onblur = function() {
                    ajax({
                        type: 'POST',
                        url : 'POST-1.php',
                        data: {url : document.getElementById('url').value},
                        callback: function(request) {
                            if(request.readyState === 4) {
                                if(request.status === 200) {
                                    var message = '';
                                    if(request.responseText 
                                         === 'urlExisted') {
                                        message = 'URL existed';
                                    }
                                    document.getElementById('message')
                                        .innerHTML = message;
                                }
                            }
                        }
                    });
                };
            };
        &lt;/script&gt;        
    &lt;/head&gt;
    &lt;body&gt;
        Add a bookmark&lt;br&gt;
        URL: &lt;input id="url" type="text"&gt;
        &lt;span id="message" style="color:red"&gt;&lt;/span&gt;&lt;br&gt;
        Title: &lt;input type="text"&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <br>
      In the above example, you can pass the <span class="courier">ajax</span> function an option object. The available options are as follows:&nbsp; <br>
      <ul>
        <li><span class="courier">type</span>: Used to specify the request type. The default value is <span

            class="courier">'GET'</span>.</li>
        <li><span class="courier">url</span>: The requested URL.</li>
        <li><span class="courier">data</span>: The request parameters.</li>
        <li><span class="courier">header</span>: The request header. The default value is <span

            class="courier">'application/x-www-form-urlencoded'</span>. </li>
        <li><span class="courier">callback</span>: The callback function for different states of the asynchronous object. Its first parameter and this will be the asynchronous object. (The first parameter of the callback function referred by <span

            class="courier">onreadystatechange</span> is an event object in Firefox, but <span

            class="courier">undefined</span> in Internet Explorer. The callback function's <span

            class="courier">this</span> is the <span class="courier">XMLHttpRequest</span> instance in Firefox, but <span

            class="courier">window</span> (the global object) in Internet Explorer. We encapsulate these in-consistencies here.)</li>
      </ul>
  <div class="recommend" style="text-align: center;"><hr><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article></main></div></body>
<script src="http://openhome.cc/Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
