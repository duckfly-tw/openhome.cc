<!doctype html><html lang="en-us">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="After parsing HTML, all created DOM elements will form a tree structure. Browsers will render all el...">

<meta property="og:locale" content="en_US">
<meta property="og:title" content="Updating the DOM Tree">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/Blog/UpdatingDOMTree.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="After parsing HTML, all created DOM elements will form a tree structure. Browsers will render all el...">


    <title>Updating the DOM Tree</title>

<link rel="stylesheet" href="http://openhome.cc/Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="http://openhome.cc/Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="http://openhome.cc/Gossip/css/caterpillar.css">
     <script async src="http://openhome.cc/Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="UpdatingDOMTree.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">&lt;&lt; JavaScript TOC</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Updating the DOM Tree</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
      
      <br>
      After parsing HTML, all created DOM elements will form a tree structure. Browsers will render all elements according to this tree. Once the DOM tree is changed, browser rendering changes simultaneously. This is the base of dynamically modifying a document. <br>
      <br>
      The following example shows how to add and delete images dynamically. <br>
      <ul>
        <li><a href="samples/UpdatingDOMTree-1.html">UpdatingDOMTree-1.html</a></li>
      </ul>
      <pre class="prettyprint"><code lang="javascript">&lt;html&gt;
    &lt;head&gt;
        &lt;meta content="text/html; charset=UTF-8" http-equiv="content-type"&gt;
        &lt;script type="text/javascript"&gt;
            window.onload = function() {
            
                document.getElementById('add').onclick = function() {
                    var images = document.getElementById('images');
                    
                    var img = document.createElement('img');
                    img.src = document.getElementById('src').value;
                    img.onclick = function() {
                        images.removeChild(this);
                    };
                    
                    images.appendChild(img);
                };
            };
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;input id="src" type="text"&gt;&lt;button id="add"&gt;Add&lt;/button&gt;
        &lt;div id="images"&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <br>
      There's no <span class="courier">img</span> tag in this document. After entering an image URL in the <span>input</span> box and pressing Add button, <span

        class="courier">document.creatElement</span> will create an <span

        class="courier">img</span> element dynamically. The element hasn't been appended to the DOM tree, so it doesn't appear on the page yet. You assign the <span

        class="courier">src</span> property the entered URL and the <span

        class="courier">onclick</span> event a function called when the image is clicked. The function will use the <span

        class="courier">removeChild</span> function of <span class="courier">images</span> (the <span

        class="courier">div</span> element with an <span class="courier">id</span> attributes) to remove <span

        class="courier">this</span> image. Finally, <span class="courier">images</span> uses <span

        class="courier">appendChild</span> to append the <span class="courier">img</span> element. Browsers render the page according to the new DOM tree now. <br>
      <br>
      After JavaScript changes the DOM tree, however, you cannot see the modified HTML in the "View Source" window of browsers. The "View Source" window only shows the loaded static HTML. You have to use a tool, such as a DOM Inspector, to observe the dynamically-modified elements. For example, The Elements tab of Chrome Developer Tools is shown as follow: <br>
      <div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" alt="The Elements tab of Chrome Developer Tools" src="images/UpdatingDOMTree-1.PNG" /></div></div><br>
      <br>
      A node can only have one parent node. Using <span class="courier">appendChild</span> to append an existing node on the DOM tree means the node will depart from its original parent node and be appended to the new one. For example:<br>
      <ul>
        <li><a href="samples/UpdatingDOMTree-2.html">UpdatingDOMTree-2.html</a></li>
      </ul>
      <pre class="prettyprint"><code lang="javascript">&lt;html&gt;
    &lt;head&gt;
        &lt;meta content="text/html; charset=UTF-8" http-equiv="content-type"&gt;
        &lt;script type="text/javascript"&gt;
            window.onload = function() {
                document.getElementById('image').onclick = function() {
                    var container1 = document.getElementById('container1');
                    var container2 = document.getElementById('container2');
                    if(this.parentNode === container1) {
                        container2.appendChild(this);
                    }
                    else {
                        container1.appendChild(this);
                    }
                };
            };
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        Container 1: &lt;div id="container1"&gt;
        &lt;img id="image" src=
      "https://openhome.cc/Gossip/images/caterpillar_small.jpg"/&gt;
                &lt;/div&gt;&lt;br&gt;
        Container 2: &lt;div id="container2"&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <br>
      In this example, the two <span class="courier">div</span> elements will append the <span

        class="courier">img</span> element alternately when it's clicked. Because a node can own only one parent node, <span

        class="courier">appendChild </span>will depart the appended element from the original parent node. <br>
      <br>
      The <span class="courier">createElement</span> function is used to create an element corresponding with the specified tag. Creating a text node, however, needs the <span

        class="courier">createTextNode </span>function. A rarely-used<span

        class="courier"> createAttribute</span> function is used to create an attribute. For example, appending text in <span

        class="courier">&lt;div id="console"&gt;&lt;/div&gt;</span> may use following code: <br>
      <div class="courier" style="margin-left: 40px;"><span><strong>var text = document.createTextNode('your text ....');</strong></span><span><strong></strong></span><span><br>
        </span><span><strong></strong></span><span><strong>document.getElementById('console').appendChild(text);</strong></span><span><br>
        </span></div>
      <br>
      You can also use <span class="courier">insertBefore</span> or <span

        class="courier">replaceChild</span> function to update a DOM tree. Take a look at <a

        href="http://www.w3schools.com/dom/dom_document.asp">DOM Document</a> for details. <br>
      <br>
      Note that browsers will re-render the page once a node is appended to the DOM tree. Frequently creating and appending nodes to the DOM tree will cause performance problems. It's recommended to organize a tree fragment in the background. Once the fragment is prepared, append its root node to the DOM tree. This way gets better performance. <br>
      <br>
      The <span class="courier">createDocumentFragment</span> function can be used to create a <span

        class="courier">DocumentFragment</span> instance. You can use it to organize a tree fragment and then append the <span

        class="courier">DocumentFragment</span> instance to the DOM tree. <br>
      <br>
      DOM elements have a non-standard <span class="courier">innerHTML</span> property used to return the contained HTML of an element. You can assign it a HTML string. Browsers will parse it and create corresponding elements. Modern browsers almost support it though it's not a standard property. In fact, HTML 5 accepts <span

        class="courier">innerHTML</span> as a standard property. For example, creating <span

        class="courier">"&lt;b&gt;Hello&lt;/b&gt;"</span> in a <span class="courier">div</span> tag can be as follow: <br>
      <div class="courier" style="margin-left: 40px;"><span><strong>document.getElementById('console').innerHTML = '&lt;b&gt;Hello&lt;/b&gt;';</strong></span></div>
      <br>
      Note that Internet Explorer miraculously doesn't support the <span

        class="courier">innerHTML</span> assignment of the <span class="courier">select</span> element.<br>
      <br>
    <div class="recommend" style="text-align: center;"><hr><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
    
        </article></main></div></body>
<script src="http://openhome.cc/Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
