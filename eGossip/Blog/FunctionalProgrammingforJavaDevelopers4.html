<!doctype html><html lang="en">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="One important concept in functional programming is - variables are immutable. Technically speaking, ...">

<meta property="og:locale" content="en">
<meta property="og:title" content="Functional Programming for Java Developers, Part 4 - Immutability">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/Blog/FunctionalProgrammingforJavaDevelopers4.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="One important concept in functional programming is - variables are immutable. Technically speaking, ...">


    <title>Functional Programming for Java Developers, Part 4 - Immutability</title>

<link rel="stylesheet" href="../../Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../../Gossip/css/caterpillar.css">
     <script async src="../../Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="FunctionalProgrammingforJavaDevelopers4.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">&lt;&lt; Blog Picks</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Functional Programming for Java Developers, Part 4 - Immutability</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            <br>
      One important concept in functional programming is - <span style="font-weight: bold;">variables are immutable</span>. Technically speaking, purely functional programming languages don't have variables. For example, if you write <span

        class="courier">x = 1</span> in Haskell, you're saying that <span

        class="courier">x</span> is <span class="courier">1</span>. You don't say that <span

        class="courier">x</span> stores the value <span class="courier">1</span> currently, and wish it storing something else later. What you can do is to get the value <span

        class="courier">1</span> through the name <span class="courier">x</span>. <br>
      <br>
      Are there problems if variables are mutable? If variables are mutable in a code flow, changing their values is too easy to divide a problem into sub problems. A method using non-local variables may have side effects. That is, the method may return different results even if you give the same arguments. The method may have invisible inputs and outputs. If the state of an object is mutable, the object may be the aggregation of side effects, because field members are non-local variables for methods. The difficulty of tracing variables will increase to the level of tracing the state of an object. Once the object is used in a concurrent context, it's hard to deal with synchronization of the object state. <br>
      <br>
      Immutability is a basic feature in purely functional programming languages. It forces us to decouple a long code flow into smaller sub flows. A method using non-local variables has no side effects. An object is not the aggregation of side effects. There's no problem about thread synchronization. <br>
      <br>
      It may be hard for you – an imperative programmer - to think about immutable variables, but it's not so hard. Have you found out that we didn't change any variable value or object state in those examples of previous articles? We map the head element and pass the tail list to the <span

        class="courier">map</span> method. We filter the head element and pass the tail list to the <span

        class="courier">filter</span> method. We reduce the head element and pass the tail list to the <span

        class="courier">reduce</span> method. We didn't change any variable value or object state.<br>
      <br>
      Once you cannot use mutable variables, control flows will be changed. <br>
      <br>
      For example, you cannot use loops, such as <span class="courier">for</span> or <span

        class="courier">while</span>. The problem of loops is that they are born to produce side effects. They always change variable values or object states. Changing several variable values or object states in a loop is easy for programmers and produces more and more complex code flows. That is, the loop may deal with several sub problems at the same time and make the loop itself a logic clump.<br>
      <br>
      Let's think a question. Why do programmers use loops? They want to solve repetitive problems. What do repetitive problems mean? Each repetitive problem is basically a sub problem. What's the substitution if programmers cannot use a loop to solve a sub problem? Yes, recursion. But, as we've seen in <a

        href="FunctionalProgrammingforJavaDevelopers1.html">Functional Programming for Java Developers, Part 1</a>, the point is not recursion. The point is how to divide a problem into sub problems. Yes, the point is not loops. The point is how to divide a problem into sub problems. Loops and recursion are only tools to describe sub problems. But, recursion is the better, clearer and preferred tool to do that.<br>
      <br>
      We can see that. Once variables are immutable, you're forced to divide a problem into sub problems because you have no choice. Immutability is a way to force you to find a logical clump of code and use a method to extract that. So, you cannot use a loop, recursion is the better substitution. You have to use a method to encapsulate an <span

        class="courier">if-else</span> statement because an <span class="courier">if-else</span> statement is also born to modify variables. For example, if you have the following code...<br>
      <br>
      <div class="courier" style="margin-left: 40px;"><span>String nickName = getNickName("Justin");<br>
          if(nickName == null) {<br>
          &nbsp;&nbsp;&nbsp; nickName = "Guest";<br>
          }</span></div>
      <br>
      You may define a <span class="courier">getOrElse</span> method to encapsulate <span

        class="courier">if</span> statement.<br>
      <br>
      <div class="courier" style="margin-left: 40px;"><span>static String getOrElse(String original, String replacement) {<br>
          &nbsp;&nbsp;&nbsp; if(original == null) {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return replacement;<br>
          &nbsp;&nbsp;&nbsp; } else {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return original;<br>
          &nbsp;&nbsp;&nbsp; }<br>
          }</span></div>
      <br>
      Then, you can use the <span class="courier">getOrElse</span> method to avoid modifying the variable.<br>
      <br>
      <div class="courier" style="margin-left: 40px;">String nickName = getOrElse(getNickName("Justin"), "Guest");</div>
      <br>
      In fact, Java has a similar syntax to the <span class="courier">if-else</span> expression commonly used in a functional programming language. That is the ternary operator <span

        class="courier">?:</span> - using it is not suggested though. If you really want to use the ternary operator, you may write code as follows:<br>
      <br>
      <div class="courier" style="margin-left: 40px;">String name = getNickName("Justin");<br>
        String nickName = (name != null ? name : "Guest");</div>
      <br>
      We've seen the points from the first chapter "Why Function Programming?" of the book Functional Programming for Java Developers in <a

        href="FunctionalProgrammingforJavaDevelopers1.html">Functional Programming for Java Developers, Part 1</a>. Because we've known what algebraic data Types, list patterns and immutability are, we can review and explain those points briefly now.<br>
      <br>
      <ul>
        <li><strong>I Have to Be Good at Writing Concurrent Programs</strong></li>
      </ul>
      <div style="margin-left: 40px;">Functional programming has no side effect because of immutability.</div>
      <ul>
        <li><strong>Most Programs Are Just Data Management Problems</strong></li>
      </ul>
      <div style="margin-left: 40px;">Functional programming defines and uses algebraic data types. Algebraic data types are easier to use in the problem with regularity, such as data management problems.</div>
      <ul>
        <li><strong>Functional Programming Is More Modular</strong></li>
      </ul>
      <div style="margin-left: 40px;">Before doing functional programming, you have to divide a problem into sub problems. Once you have solutions for sub problems, you may use these solutions in other problems with the same sub problems. </div>
      <ul>
        <li><strong>I Have to Work Faster and Faster</strong></li>
      </ul>
      <div style="margin-left: 40px;">Your code will become clearer. You'll find more high level abstractions. You'll have more solutions for common problems. You'll work faster and faster.</div>
      <ul>
        <li><strong>Functional Programming Is a Return to Simplicity</strong></li>
      </ul>
      <div style="margin-left: 40px;">Once you are familiar with functional programming, what you have to do is dividing a problem into sub problems. That's almost the all story.</div>
      &nbsp;&nbsp;&nbsp; <br>
      But, as we've seen in <a href="FunctionalProgrammingforJavaDevelopers1.html">Functional Programming for Java Developers, Part 1</a>, you cannot just apply all concepts directly without any thinking if your language is not a functional language, such as Java. In the next article, we'll get back to the real Java and see what we should take from functional programming.<br>
      <br>
      <div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article></main></div></body>
<script src="../../Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
