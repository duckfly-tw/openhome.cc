<!doctype html><html lang="en">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Let's look something easier! How to add 1 to each list element?
      
      def addOne(list):
  ...">

<meta property="og:locale" content="en">
<meta property="og:title" content="Notes: Imperative to Functional, Part 5">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/eGossip/Blog/ImperativeToFunctional5.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="Let's look something easier! How to add 1 to each list element?
      
      def addOne(list):
  ...">


    <title>Notes: Imperative to Functional, Part 5</title>

<link rel="stylesheet" href="../../Gossip/css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../../Gossip/css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../../Gossip/css/caterpillar.css">
     <script async src="../../Gossip/google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="ImperativeToFunctional5.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">&lt;&lt; Blog Picks</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../Gossip/images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../Gossip/images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Notes: Imperative to Functional, Part 5</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            

      <br>
      Let's look something easier! How to add 1 to each list element?<br>
      <br>
      <pre class="prettyprint"><code>def addOne(list):
    result = []
    for ele in list:
        result.append(ele + 1)
    return result</code></pre>
      <br>
      What if it's written functionally?<br>
      <br>
      <pre class="prettyprint"><code>def addOne(list):
    return [] if list == [] else [list[0] + 1] + addOne(list[1:])</code></pre>
      <br>
      What if you want all list elements multiplied by 3?<br>
      <br>
      <pre class="prettyprint"><code>def multiplyThree(list):
    return [] if list == [] else [list[0] * 1] + multiplyThree(list[1:])</code></pre>
      <br>
      How can all list elements be 'xxx'? Why not simply write a general <span

        class="courier">map</span>:<br>
      <br>
      <pre class="prettyprint"><code><strong>def map(func, list):
    return [] if list == [] else [func(list[0])] + map(func, list[1:])</strong></code></pre>
      <br>
      Then, if you want to add 1 to each list element, you can do as such:<br>
      <br>
      <pre class="prettyprint"><code>map(lambda ele: ele + 1, list)</code></pre>
      <br>
      Multiplying all list elements by 3 is as follows:<br>
      <br>
      <pre class="prettyprint"><code>map(lambda ele: ele * 3, list)</code></pre>
      <br>
      If you want to 'xxx' all list elements, just...<br>
      <br>
      <pre class="prettyprint"><code>map(lambda ele: xxx(ele), list)</code></pre>
      <br>
      Similarly, How to filter out list elements greater than 3?<br>
      <br>
      <pre class="prettyprint"><code>def greatThanThree(list):
    result = []
    for ele in list:
        if ele &gt; 3:
            result.append(ele)
    return result</code></pre>
      <br>
      Rewrite it functionally?<br>
      <br>
      <pre class="prettyprint"><code>def greatThanThree(list):
    return [] if list == [] else \
        ([list[0]] + greatThanThree(list[1:]) if list[0] &gt; 3 else greatThanThree(list[1:]))</code></pre>
      <br>
      What if you want filter list elements less than 3? You will write something similar to the above structure, so just define a <span

        class="courier">filter</span> directly!<br>
      <br>
      <pre class="prettyprint"><code><strong>def filter(func, list):
    return [] if list == [] else \
        ([list[0]] + filter(func, list[1:]) if func(list[0]) else filter(func, list[1:]))</strong></code></pre>
      <br>
      Then, to filter list elements less than 3 is as follows:<br>
      <br>
      <pre class="prettyprint"><code>filter(lambda ele: ele &gt; 3, list)</code></pre>
      <br>
      Here you can see, <span class="courier">map</span> and <span class="courier">filter</span> are very common operations, just as <span

        class="courier">fold</span> mentioned in previous articles. Have you found that, however? The structure of <span

        class="courier">map</span> or <span class="courier">filter</span> is similar to <span

        class="courier">fold</span>? Actually, you can also implement <span

        class="courier">map</span> and <span class="courier">filter</span> with <span

        class="courier">fold</span>. For example, you can use Python's <span

        class="courier">reduce</span>, an implementation of <span class="courier">foldLeft</span>,&nbsp; to define a <span

        class="courier">map</span>:<br>
      <br>
      <pre class="prettyprint"><code>def map(func, list):
    return reduce(lambda lt, elem: lt + [func(elem)], list, [])</code></pre>
      <br>
      You can also use <span class="courier">reduce</span> to implement <span

        class="courier">filter</span>:<br>
      <br>
      <pre class="prettyprint"><code>def filter(func, list):
    return reduce(lambda lt, elem: lt + [elem] if func(elem) else lt, list, [])</code></pre>
      <br>
      Using <span class="courier">reduce</span> to add 1 to all list elements is ok but it'll be <span

        class="courier">reduce(lambda lt, elem: lt + [elem + 1], list, [])</span>. Directly <span

        class="courier">reduce</span> the entire list to filter list elements less than 3 is no problem, but you'll write <span

        class="courier">reduce(lambda lt, elem: lt + [elem] if elem&gt; else lt, list, [])</span>. At this time, it's better to write more clear code such as <span

        class="courier">map(lambda ele: ele + 1, list)</span> and <span

        class="courier">filter(lambda ele: ele&gt; 3, list)</span> respectively. Of course, <span

        class="courier">addOne(list)</span> and <span class="courier">greaterThanThree(list)</span> are more clear. That's the problem of readability. That's why we said that don't go too far while using general <span

        class="courier">reduce</span>, <span class="courier">map</span> and <span

        class="courier">filter</span>. If you want, you can write almost everything with <span

        class="courier">map</span>, <span class="courier">filter</span> and <span

        class="courier">reduce</span>. But if you can get readability with a little encapsulation, why not do it? Which is better to sum up <span

        class="courier">[1, 2, 3]</span>? Writing <span class="courier">sum([1, 2, 3])</span> with Python's built-in <span

        class="courier">sum</span> or <span class="courier">reduce(lambda s, e: s + e [1, 2, 3], 0)</span> or <span

        class="courier">reduce(int.__add__, [1, 2, 3], 0)</span>?<br>
      <br>
      In addition to <span class="courier">reduce</span>, there are also <span

        class="courier">map</span> and <span class="courier">filter</span> in Python's <span

        class="courier">functools</span>, but their return value are different from <span

        class="courier">map</span> and <span class="courier">reduce</span> defined above. Python's <span

        class="courier">map</span> and <span class="courier">filter</span> don't directly return a <span

        class="courier">list</span>, they return <span class="courier">map</span> and <span

        class="courier">filter</span> object respectively. Simply speaking, these two objects are generators. If you want to get a <span

        class="courier">list</span>, you can use list. For example, <span

        class="courier">list(map(int.__add__, [1, 2, 3]))</span> or <span

        class="courier">list(filter(lambda ele,: ele,&gt; 3, [1, 2, 3, 4, 5]))</span>.<br>
      <br>
      In fact, some languages have list comprehensions. It makes you to do <span

        class="courier">map</span> and <span class="courier">filter</span> in a relatively simple syntax. In Python, for example, you can add 1 to all <span>list</span> elements with <span

        class="courier">[ele + 1 for ele in list]</span>. To filter list elements greater than 3, you can use <span

        class="courier">[ele for ele, in list if ele &gt; 3]</span>. You guys familiar with Python should know this syntax.<br>
      <br>
      Basically, problems that can be solved by <span class="courier">map</span> and <span

        class="courier">filter</span> can be also cleared up with list comprehensions. But something done by list comprehensions would be achieved troublesomely by <span

        class="courier">map</span> and <span class="courier">filter</span>. For example, a nested list comprehension is such a situation:<br>
      <br>
      <pre class="prettyprint"><code>[(i, j) for i in [1, 2, 3] for j in [4, 5, 6]]</code></pre>
      <br>
      This will produce <span class="courier">[(1, 4), (1, 5), (1, 6), (2, 4), (2, 5), (2, 6), (3, 4), (3, 5) , (3, 6)]</span>. If you implement it with Python's <span

        class="courier">reduce</span> and <span class="courier">map</span> defined above, you would have to write down:<br>
      <br>
      <pre class="prettyprint"><code>reduce(list.__add__, map(lambda i: map(lambda j: (i, j),  [4, 5, 6]), [1, 2, 3]))</code></pre>
      <br>
      A list comprehension is not just a more clear syntax, however. In some languages, it will look more like a mathematical expression. For example, a comprehension for a set that contains the positive even integers from 1 to 100 is <span

        class="courier">{2 * x | x ∈ {1, 2..100}}</span>. If you use Haskell's list comprehension, it will be <span

        class="courier">[2 * x | x &lt;- [1, 2 .. 100]]</span>, looks really like the original mathematical definition.<br>
      <br>
     <div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
    
        </article></main></div></body>
<script src="../../Gossip/js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
