<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="首先要取得Spring的相關檔案，Spring的檔案放在 SourceForge。

      






撰寫此文時，Spring最新的版本是1.2.5，有兩個下載版本，一個是...">

<meta property="og:locale" content="zh_TW">
<meta property="og:title" content="第一個 Spring 程式">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/Gossip/SpringGossip/FirstSpring.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="首先要取得Spring的相關檔案，Spring的檔案放在 SourceForge。

      






撰寫此文時，Spring最新的版本是1.2.5，有兩個下載版本，一個是...">


    <title>第一個 Spring 程式</title>

<link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="FirstSpring.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span>
        
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">回 Spring 目錄</a>
            <ul class="pure-menu-list">
                <br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>第一個 Spring 程式</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
      




首先要取得Spring的相關檔案，Spring的檔案放在 <a href="http://sourceforge.net/project/showfiles.php?group_id=73357">SourceForge</a>。<br>

      <br>






撰寫此文時，Spring最新的版本是1.2.5，有兩個下載版本，一個是spring-framework-1.2.5-with-
dependencies.zip，一個是spring-framework-1.2.5.zip，with-dependencies的包括一些
ant、jakarta-commons、struts、velocity等等其它開源Java專案的相依檔案，如果您也需要這些相關檔案，可以下載這個
版本，如果您已經有這些相關檔案，則只需要下載spring-framework-1.2.5.zip這個檔案。 <br>

      <br>



下載zip檔案並解壓縮之後，在dist目錄下就是使用Spring所需要的相關檔案，如果下載的是with-dependencies版本，則在lib
目錄中的是您可能會用到的相依檔案。在dist目錄下，spring-core.jar是Spring的核心，如果日後需要使用到Spring其它的子框
架支援，再將其它的jar檔案加入即可，例如spring-aop.jar、spring-webmvc.jar等等。您也可以直接使用
spring.jar這個檔案，它包括了所有Spring支援的功能所需要的所有類別，而不再需要加入個別的jar檔案。 <br>

      <br>



注意在Spring 1.2之後，原先於spring-core.jar中與Bean相關的一些套件，現在已移至spring-beans.jar中。<br>

      <br>



就這邊接下來要練習的第一個Spring程式，要將spring-core.jar、spring-beans.jar，以及相依的commons-
logging.jar加至Classpath的路徑中，您可以在lib目錄的jakarta-commons目錄中找到。 <br>

      <br>



來撰寫您的第一個組件（Component），它只是一個簡單的JavaBean，用來向使用者打聲招呼：









 <br>



      
      <ul>

        <li>HelloBean.java</li>

      
      </ul>



      
      <pre class="prettyprint"><code lang="java">package onlyfun.caterpillar; <br><br>public class HelloBean { <br>    private String helloWord; <br>    <br>    public void setHelloWord(String helloWord) { <br>        this.helloWord = helloWord; <br>    } <br>    public String getHelloWord() { <br>        return helloWord; <br>    } <br>}</code></pre>






      <br>

      

稍後您可以透過setHelloWord()這個Setter來設定新的招呼語，不過並不是親自撰寫程式來作這些事，而是在組態檔案定義，由Spring
來為您作設定的動作，接著可以撰寫Bean的定義檔案，定義檔案會告訴Spring容器，如何完成相依物件的關係注入等動作，Bean定義檔的名稱可以自
由定義，例如這邊取名為beans-config.xml：<br>



      
      <ul>

        <li>beans-config.xml</li>

      
      </ul>



      <span style="font-family: Courier New,Courier,monospace;"></span>
      
      <pre class="prettyprint"><code lang="java">&lt;?xml version="1.0" encoding="UTF-8"?&gt; <br>&lt;!DOCTYPE beans PUBLIC "-//SPRING/DTD BEAN/EN" <br>  "http://www.springframework.org/dtd/spring-beans.dtd"&gt; <br><br>&lt;beans&gt; <br>    &lt;bean id="helloBean" <br>          class="onlyfun.caterpillar.HelloBean"&gt; <br>        &lt;property name="helloWord"&gt;<br>            &lt;value&gt;Hello!Justin!&lt;/value&gt;<br>        &lt;/property&gt; <br>    &lt;/bean&gt; <br>&lt;/beans&gt;</code></pre>







      <br>






      定義檔中定義了JavaBean的別名與來源類別，&lt;property&gt;標籤中設定了希望注入至JavaBean的字串值，撰寫一個簡單的示範程式： <br>



      
      <ul>

        <li>SpringDemo.java</li>

      
      </ul>



      
      <pre class="prettyprint"><code lang="java">package onlyfun.caterpillar; <br><br>import org.springframework.core.io.FileSystemResource;<br>import org.springframework.core.io.Resource;<br>import org.springframework.beans.factory.BeanFactory; <br>import org.springframework.beans.factory.xml.XmlBeanFactory; <br><br>public class SpringDemo { <br>    public static void main(String[] args) { <br>        Resource rs = <br>            new FileSystemResource("beans-config.xml"); <br>        BeanFactory factory = <br>            new XmlBeanFactory(rs); <br>        <br>        HelloBean hello = <br>            (HelloBean) factory.getBean("helloBean"); <br>        System.out.println(hello.getHelloWord()); <br>    } <br>}</code></pre>



      <br>

      

BeanFactory是 <a href="../DesignPattern/SimpleFactory.htm">Factory 模式</a>
的一個實作例子，但用途更為一般，可以建立、管理不同型態的物件，由於這邊所使用的Bean定義檔是XML，所以使用實作BeanFactory介面的
XmlBeanFactory來作為管理Bean的實際物件，在Spring
1.2中，XmlBeanFactory只接受實作Resource介面的物件，像是ClassPathResource、
FileSystemResource、InputStreamResource、ServletContextResource、
UrlResource等，分別表示不同的檔案來源物件，這邊所使用的是FileSystemResource，表示指定相對路徑或絕對路徑來取得
Bean定義檔， 同樣的，如果您的Bean定義檔是位於Classpath路徑中，您也可以使用ClasspPathResource來取得定義檔。<br>

      <br>



這是從比較低層次的角度來使用Spring的IoC容器功能，藉由BeanFactory來讀取組態檔案並完成依賴的關聯注入，這邊的依賴是什麼？指的是
HelloBean相依於String物件，透過Setter所保留的介面，使用Setter
injection來完成這個依賴注入，而不是將招呼語寫死在HelloBean，BeanFactory是整個Spring的重點所在，整個
Spring的核心都圍繞著它，在這邊使用的是XmlBeanFactory，負責讀取XML組態檔案，您也可以使用properties檔案，這之後會
再介紹。 <br>

      <br>



BeanFactory讀取Bean的組態設定並完成關係維護之後，可以藉由getBean()方法並指定Bean的別名來取得Bean實例，如果使用
BeanFactory的話，只有在真正需要Bean物件時，才會實際建立Bean實例，而不是在一開始建立BeanFactory時就建立Bean實
例，來看看實際運行之後的效果



：
      
      <div class="cmd"><span>2005/10/16 下午 07:14:03 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions<br>



資訊: Loading XML bean definitions from file [C:\workspace\SpringDemo\beans-config.xml]<br>



Hello!Justin!</span><span><br>






      </span></div>






      <br>

      

如果今天您要想改變招呼語，則只要更改beans-config.xml就可以了，不用修改主要的程式，從比較一般的角度來看，就意味著如果您想要改變一些物件之間的依賴關係，則只要修改組態檔即可，而不用修改組件的任何一行程式。 



<br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></article></main></div></body>
<script src="../js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
