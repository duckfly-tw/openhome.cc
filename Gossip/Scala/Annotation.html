<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="標註（Annotation）是撰寫在原始碼中的資訊，可以提供程式碼以外的額外資訊，與註解不同的是，標註本身有其結構，你可以使用工具提取這些結構化訊息。Scala本身提供一些標註，可提供編譯器或運行平台...">

<meta property="og:locale" content="zh_TW">
<meta property="og:title" content="標註（Annotation）">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/Gossip/Scala/Annotation.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="標註（Annotation）是撰寫在原始碼中的資訊，可以提供程式碼以外的額外資訊，與註解不同的是，標註本身有其結構，你可以使用工具提取這些結構化訊息。Scala本身提供一些標註，可提供編譯器或運行平台...">


    <title>標註（Annotation）</title>

<link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="Annotation.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span>
        
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="https://openhome.cc/Gossip/Scala/">回 Scala 目錄</a>
            <ul class="pure-menu-list">
                <br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>標註（Annotation）</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            標註（Annotation）是撰寫在原始碼中的資訊，可以提供程式碼以外的額外資訊，與註解不同的是，標註本身有其結構，你可以使用工具提取這些結構化訊息。<br><br>Scala本身提供一些標註，可提供編譯器或運行平台（JVM）使用所加註的訊息，如果平台是JVM，在Java中所撰寫的標註，也可以使用在Scala的語法之中。<br><br>以下簡介Scala本身所提供的幾個標註。首先是<span style="font-weight: bold;">@deprecated</span>，也許你原先撰寫了某個類別或函式，別人也使用了你撰寫的類別或函式，但之後你發現該類別或函式有些不適當的地方（也許是效能、安全等問題），為了向前相容性，你不可以直接移除該類別或函式，以免已使用你所撰寫的類別或函式的客戶端，突然發現他們找不到該類別或函式了。<br><br>你可以在類別或函式上標註@deprecated，例如：<br><div style="margin-left: 40px;"><span style="font-weight: bold;"><span style="color: red;">@deprecated</span> class Some {</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; ...</span><br><span style="font-weight: bold;">}</span><br><br><span style="font-weight: bold;"><span style="color: red;">@deprecated</span> def someFunc = {</span><br><span style="font-weight: bold;">&nbsp; &nbsp; ....</span><br><span style="font-weight: bold;">}<br><br>class Other {<br></span><span style="font-weight: bold;"><span style="color: red;">&nbsp; &nbsp; @deprecated</span> def otherFunc = {</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; ...</span><br><span style="font-weight: bold;">&nbsp; &nbsp; }</span><br><span style="font-weight: bold;">}<br></span></div><br>如果客戶端再度使用了你所提供的這些類別或函式，則編譯時會出現以下的訊息，提醒他們使用了不再建議使用的API：<br><div style="margin-left: 40px;"><span style="font-weight: bold;">warning: there were deprecation warnings; re-run with -deprecation for details one warning found</span><br></div><br>如果運行的平台是在JVM，則Scala的編譯器會將@deprectated轉換為Java的@Deprecated標註，如此若你在Java中使用了Scala所編譯出來的類別，使用Java編譯器時也會出現警示訊息。<br><br>Scala的標註也可以用於運算式（Expression），例如在 <a href="SealedClass.html">密封類別（Sealed class）</a> 中看過的例子，當編譯器好意提出一些你未注意到的檢查狀況時的警示訊息，而你不想再看到這些囉嗦的訊息時，可以使用 <span style="font-weight: bold;">@unchecked</span> 標註（Annotation）來告訴編譯器住嘴：<br><div style="margin-left: 40px;"><span style="font-weight: bold;">...</span><br><span style="font-weight: bold;">def what(d: Drawing) = (d: @unchecked) match {</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; case Point(_, _)&nbsp;&nbsp;&nbsp; =&gt; "點"</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; case Cylinder(_, _) =&gt; "柱"</span><br><span style="font-weight: bold;">}</span><br></div><br>當你要在多執行緒環境下共用存取某個類別的可變狀態資料成員（Field）時，可將該成員標註為<span style="font-weight: bold;">@volatile</span>，這告訴編譯器，該成員會在多執行緒環境下被共用存取，如果運行的環境為JVM，編譯器會將@volatile轉為Java語法的volatile修飾字。<br><br>Scala本身不提供序列化機制，然而提供了三個與序列化有關的標註：<span style="font-weight: bold;">@serializable</span>、<span style="font-weight: bold;">@SerialVersionUID</span>以及<span style="font-weight: bold;">@transient</span>。
這三個標註告知底層平台哪些類別可以進行序列化、其序列化版本識別為何以及哪些成員（Field）不用序列化。如果是在JVM平台上，
@serializable將對應至實作java.io.Serializable介面，@SerialVersionUID將對應至final
static的serialVersionUID，而@transient將對應至transient關鍵字。<br><br>如果是在JVM上，<span style="font-weight: bold;">@clonable</span>將對應至實作java.lang.Clonable介面，<span style="font-weight: bold;">@remote</span>將對應至實作java.rmi.Remote介面。<br><br>Scala本身並不需要JavaBean形式的設值方法（Setter）與取值方法（Getter），在JVM平台上，如果你想要Scala的類別編譯出來後，其可變資料成員自動生成設值與取值方法，則可以使用<span style="font-weight: bold;">@scala.reflect.BeanProperty</span>，例如：<br><pre class="prettyprint"><code lang="scala">import <span style="font-weight: bold;">scala.reflect.BeanProperty</span><br>class Some {<br><span style="font-weight: bold;">    @BeanProperty</span> private var x = 10<br>}</code></pre><br>這個類別在使用scalac編譯之後，若使用Java的javap指令，可以看到以下的資訊：<br><div style="margin-left: 40px;">public class Some extends java.lang.Object implements scala.ScalaObject{<br>&nbsp;&nbsp;&nbsp; public Some();<br>&nbsp;&nbsp;&nbsp; public void setX(int);<br>&nbsp;&nbsp;&nbsp; public int getX();<br>&nbsp;&nbsp;&nbsp; public int \$tag()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws java.rmi.RemoteException;<br>}<br></div><br>在Scala中並不區分受檢例外（Checked exception）與非受檢例外（Unchecked exception），因此你可以撰寫類似以下的程式碼：<br><pre class="prettyprint"><code lang="scala">import java.io._<br><br>class Some {<br>    def writeTo(file: String) {<br>        val writer = new BufferedWriter(new FileWriter(file));<br>        writer.write("...");<br>        writer.close();<br>    }<br>}</code></pre><br>若平台是JVM，編譯這個類別後，使用Java的javap指令，可以看到writeTo()方法並沒有throws宣告：<br><div style="margin-left: 40px;"><span style="font-weight: bold;">public class Some extends java.lang.Object implements scala.ScalaObject{</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public Some();</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public void writeTo(java.lang.String);</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public int \$tag()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws java.rmi.RemoteException;</span><br><span style="font-weight: bold;">}</span><br></div><br>在Java
的程式碼中仍然可以使用這個編譯好的類別（因為受檢例外是編譯器檢查，而非JVM的驗證器），Scala沒有throws語句，若你想要編譯出來的類別，
可以在writeTo()方法上宣告throws
IOException，以便在Java程式中使用到writeTo()方法時，編譯器可以檢查是否處理IOException，則你可以使用<span style="font-weight: bold;">@throws</span>標註，例如：<br><pre class="prettyprint"><code lang="scala">import java.io._<br><br>class Some {<br><span style="font-weight: bold;">    @throws(classOf[IOException]) </span><br>    def writeTo(file: String) {<br>        val writer = new BufferedWriter(new FileWriter(file));<br>        writer.write("...");<br>        writer.close();<br>    }<br>}</code></pre><br>編譯這個類別後，使用Java的javap指令，可以看到writeTo()方法已加上throws宣告：<br><div style="margin-left: 40px;"><span style="font-weight: bold;">public class Some extends java.lang.Object implements scala.ScalaObject{</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public Some();</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public void writeTo(java.lang.String)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: red;">throws java.io.IOException</span>;</span><br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public int \$tag()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws java.rmi.RemoteException;</span><br><span style="font-weight: bold;">}</span><br></div><br>Scala本身並不提供撰寫標註的機制，其所提供的標註僅提供底層平台轉換時的一些資訊，如果你的平台是JVM，那麼你可以使用Java的標註撰寫語法，將撰寫好的標註使用在Scala之中。




<br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>

  </article></main></div></body>
<script src="../js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
