<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Java Tutorial 第一堂（4）套件、I/O 與例外&nbsp;&lt;&lt; 前情
      
      
      第二堂上課囉！在知道怎麼撰寫、執行第一個 Java 程式之...">

<meta property="og:locale" content="zh_TW">
<meta property="og:title" content="Java Tutorial 第二堂（1）數值與字串型態">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/Gossip/CodeData/JavaTutorial/NumberString.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="Java Tutorial 第一堂（4）套件、I/O 與例外&nbsp;&lt;&lt; 前情
      
      
      第二堂上課囉！在知道怎麼撰寫、執行第一個 Java 程式之...">


    <title>Java Tutorial 第二堂（1）數值與字串型態</title>

<link rel="stylesheet" href="../../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../../css/caterpillar.css">
     <script async src="../../google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="NumberString.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span>
        
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">回 Java Tutorial</a>
            <ul class="pure-menu-list">
                <br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../../images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Java Tutorial 第二堂（1）數值與字串型態</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
             
      <br>
      <br>
      第二堂上課囉！在知道怎麼撰寫、執行第一個 Java 程式之後，接下來就要瞭解一下 Java 這個程式語言，只不過我們只剩五個小時，因而採取的方式是，在這一個小時很快地瀏覽過 Java 語言的重要基本元素，之後四個小時再從更多實際的範例中瞭解 Java 語言。
      <br>
      <br>
      那麼，哪些東西才是語言中重要而基本的元素呢？Pascal 之父 Niklaus E. Writh 曾說過：
      <p style="padding-left: 30px;"><strong><span style="color: #ff0000;"><em>Algorithms + Data Structures = Programs</em></span></strong></p>
      演算法與資料結構就等於程式，而一門語言提供的資料型態（Data type）、運算子（Operator）、程式碼封裝方式等，會影響演算法與資料結構的實作方式，因此這一堂對於 Java 語言講解的重點將選定在：
      <ul>
        <li><span style="line-height: 1.714285714; font-size: 1rem;">型態系統、變數（Variable）與運算子（Operator）</span></li>
        <li><span style="line-height: 1.714285714; font-size: 1rem;">方法（Method）、類別（Class）與套件（Package）</span></li>
      </ul>
      <h1>型態系統</h1>
      雖然帶動與普及了物件導向的設計，不過&nbsp;Java 本身並不是純綷的物件導向語言，像是就型態系統而言，Java 就並非每個值都是物件，就目前版本的 Java 而言，混合了兩個型態系統：<span

        style="color: #ff0000;"><strong>基本型態（Primitive type）</strong></span>與<span

        style="color: #ff0000;"><strong>物件型態（Object type）</strong></span>。
      <br>
      <br>
      Java 中的基本型態就是純綷的值，1 就是 1，0.2 就是 0.2，<code>true</code> 就是 <code>true</code>，除此之外沒有其他資訊了，基本型態的存在，代表著過去程式設計的主要目的：進行數學運算。實際上，基本型態是 Java 這種命令式（Imperative）語言中存在的函數式（Functional）元素，因為 1 就是 1，你沒有辦法改變它，1 + 2 是一個數學操作，結果是產生新的值 3。
      <br>
      <br>
      Java 支援物件導向，物件型態就是另一型態系統，物件是由一組相關的狀態，以及支援狀態的操作組成。對於基本型態，Java 亦有對應的包裹器（Wrapper）型態，可配合需要物件的場合。過去曾經討論過，在未來的版本中也許會拿掉 Java 中基本型態，只留下物件型態，不過現階段而言，基本型態與物件型態還是並存的，兩種都必須瞭解。
      <br>
      <br>
      型態眾多，對於初學一門語言來說，或說對於學習 Java 語言來說，這邊將著重在以下幾個型態之介紹：
      <ul>
        <li><span style="line-height: 1.714285714; font-size: 1rem;">數值型態（Numeric type）</span></li>
        <li><span style="line-height: 1.714285714; font-size: 1rem;">字元（Char）、字串型態（String type）</span></li>
        <li><span style="line-height: 1.714285714; font-size: 1rem;">容器型態（Container type）</span></li>
      </ul>
      這篇文章中，我們要先來認識數值型態與字串型態，而數值型態中會一併介紹基本型態與對應的物件型態。
      <h1>數值型態</h1>
      在基本型態中，依需要的資料長度不同，整數可以使用 <code>byte</code>（單位元組）、<code>short</code>（雙位元組）、<code>int</code>（四位元組）與 <code>long</code>（八位元組）型態。基本上，沒有特定需求（像是處理位元資料、時間戳記等），多半使用 <code>int</code> 整數。
      <br>
      <br>
      <strong>如果僅寫下 1 這樣的實字（Literal），會是 <code>int</code> 型態</strong>；如果實字指定給變數，實字數值若在變數型態可裝載範圍內，則會將數值儲存至變數，如果不行就會編譯錯誤；
      <pre class="prettyprint"><code lang="java">byte number1 = 1;
byte number2 = 128; // error: possible loss of precision</code></pre>
      <br>
      Java 中不會自動使用 <code>long</code> 來儲存較長的整數實字，如果想要寫下的實字是 <code>long</code> 型態，必須在實字後加上 <code>L</code>，透過以下這個例子會比較清楚：
      <pre class="prettyprint"><code lang="java">long number1 = 12345678987654321L;
long number2 = 12345678987654321; // error: integer number too large: 12345678987654321</code></pre>
      <code><br>
        long</code> 型態是可以容納 12345678987654321的，第二行編譯錯誤的原因是在於編譯器發現用 <code>int</code> 裝不下 12345678987654321 這個實字，而不是 <code>long</code> 型態的變數 <code>number2</code> 裝不下 12345678987654321。
      <br>
      <br>
      那麼超過 <code>long</code> 可容納範圍的數要怎麼表示？像是 9223372036854775808L 是會編譯錯誤的！Java 使用<strong> <code>java.math.BigInteger</code> </strong>來解決。例如要表示數學運算 9223372036854775808 + 9223372036854775808 的結果，可以如下：
      <pre class="prettyprint"><code lang="java">import java.math.BigInteger;
import static java.lang.System.out;

public class Cal {
    public static void main(String[] args) {
        BigInteger x = new BigInteger(args[0]);
        BigInteger y = new BigInteger(args[2]);
        switch(args[1]) {
            case "+": out.println(x.add(y)); break;
            case "-": out.println(x.subtract(y)); break;
            case "x": out.println(x.multiply(y)); break;
            case "/": out.println(x.divide(y));
        }
    }
}</code></pre>
      <span style="color: #ff0000;"><strong><code><br>
            switch</code> 從 JDK7 開始，可以支援字串</strong></span>，在這之前，僅支援整數、字元與列舉（<code>Enum</code>），這個程式可以進行簡單的加、減、乘、除運算，像是…
      <br>
      <br>
      <a href="images/java-tutorial-the-2nd-class-1-1.png"><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" class="alignnone size-full wp-image-3039"

          alt="java-tutorial-the-2nd-class-1-1" src="images/java-tutorial-the-2nd-class-1-1.png"

          height="39" width="739" /></div></div></a>
      <span style="line-height: 1.714285714; font-size: 1rem;"><br>
        <br>
        如果需要將基本型態包裝為物件型態，可以直接使用對應的 </span><code style="line-height: 1.714285714;">Byte</code><span

        style="line-height: 1.714285714; font-size: 1rem;">、</span><code

        style="line-height: 1.714285714;">Short</code><span style="line-height: 1.714285714; font-size: 1rem;">、</span><code

        style="line-height: 1.714285714;">Integer</code><span style="line-height: 1.714285714; font-size: 1rem;"> 與 </span><code

        style="line-height: 1.714285714;">Long</code><span style="line-height: 1.714285714; font-size: 1rem;"> 包裹器（Wrapper）類別，像是：</span>
      <pre class="prettyprint"><code lang="java">Integer x = 10;
Integer y = 20;
Integer z = x + y;</code></pre>
      <br>
      這當中有一些<span style="color: #ff0000;"><strong>語法蜜糖</strong></span>，目的在讓你使用這些包裹器類別時，如同使用基本型態一樣的方便。
      <br>
      <br>
      在基本型態中，依需要的資料精確度不同，浮點數可以使用 <code>float</code>（四位元組） 與 <code>double</code>（八位元組）兩個型態。<strong>在程式中寫下像是 0.3 這樣的浮點數實字，會使用 <code>double</code> 型態</strong>，因此 …
      <pre class="prettyprint"><code lang="java">double number1 = 0.3;
float number2 = 0.3; // error: possible loss of precision</code></pre>
      <br>
      如果想要使用 <code>float</code> 型態，有兩種方式，一是在實字上指定 <code>F</code>，表示這個浮點數要使用 <code>float</code>，另一種方式就是用所謂的轉型（Cast）語法叫編譯器別囉嗦：
      <pre class="prettyprint"><code lang="java">float number1 = 0.3F;
float number2 = (float) 0.3;</code></pre>
      <span style="color: #ff0000;"><strong><br>
          在數值前加上一個型態限定，通常被稱之為轉型，實際上，這就是關閉編譯器在此處的型態檢查</strong></span>，這樣編譯器就會乖乖地完成編譯，只不過你如果要編譯器在編譯時別那麼囉嗦，那執行時期如果 <code>double</code> 的值真的超過了 <code>float</code> 變數可容納的範圍，那就只能硬裝進去了，也就是多出來的位元組會被切掉，也就是會有精度遺失問題。
      <br>
      <br>
      多數 CPU 與浮點運算器多採用 <a href="http://zh.wikipedia.org/wiki/IEEE_754">IEEE754 浮點數運算（IEEE 754 floating-point arithmetic）</a>，某些浮點數本身就有誤差，這是每個程式人都應該知道的事。像是 1.0 - 0.8 在程式中不會是 0.2，是電腦科學中違反數學的例子之一：
      <pre class="prettyprint"><code lang="java">System.out.println(1.0 - 0.8); // 顯示 0.19999999999999996</code></pre>
      <br>
      如果你需要精確度，程式中不應當使用浮點數來直接進行運算，尤其是要避免「<a href="https://www.facebook.com/codedata.tw/posts/531921813556596">算錢用浮點，遲早被人扁</a>」的可能性發生，在需要浮點數精度的時候，Java 中可以使用&nbsp;<strong><code>java.math.BigDecimal</code></strong>，例如：
      <pre class="prettyprint"><code lang="java">import java.math.BigDecimal;
import static java.lang.System.out;

public class Cal {
    public static void main(String[] args) {
        BigDecimal x = new BigDecimal(args[0]);
        BigDecimal y = new BigDecimal(args[2]);
        switch(args[1]) {
            case "+": out.println(x.add(y)); break;
            case "-": out.println(x.subtract(y)); break;
            case "x": out.println(x.multiply(y)); break;
            case "/": out.println(x.divide(y));
        }
    }
}</code></pre>
      <br>
      這個例子不過是將前一個計算大整數的程式，把 <code>BigInteger</code> 改為 <code>BigDecimal</code>，以支援浮點數精度，一個使用的例子是…
      <br>
      <br>
      <a href="images/java-tutorial-the-2nd-class-1-2.png"><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" class="alignnone size-full wp-image-3045"

          alt="java-tutorial-the-2nd-class-1-2" src="images/java-tutorial-the-2nd-class-1-2.png"

          height="37" width="595" /></div></div></a>
      <h1>字元、字串型態</h1>
      字串是由字元組成，在 Java 中要表示字元，必須使用單引號來包裹，像是 <code>'A'</code>、<code>'程'</code> 就表示字元，型態是 <code>char</code> 基本型態。<span

        style="color: #ff0000;"><strong>Java 支援 Unicode，內部實作採用 UTF-16 Big Endian</strong></span>，也就是說，無論中英文字元，都會使用兩個位元組，這也就是為何在入門階段，不用特別在意原始碼文字編碼問題處理的原因。由於單引號被用來表示一個字元實字，因此如果想要表示單引號字元的話，就必須使用略過（Escape）字元 <code>\</code>，也就是 <code>'\''</code>，而為了表示略過字元，則必須使用 <code>'\\'</code>。
      <br>
      <br>
      如果要表示一串字元，也就是字串的話，Java 中使用雙引號來包裹，像是 <code>"codedata"</code>、<code>"程式"</code> 就表示字串，當然，如果字串中必須表示雙引號，也必須使用略過字元，像是 <code>"\"Code\" &amp; \"Data\""。</code>
      <br>
      <br>
      <strong><span style="color: #ff0000;">Java 中的字串不可變（Immutable）</span></strong>，你無法改變已建立的字串內容，字串是 <code>String</code> 類別的實例，因此可以使用 <code>String</code> 類別上定義的各個方法，像是以 <code>length</code> 方法得知字串中的字元個數，使用 <code>contains</code> 得知字串是否包括某個子字串，使用 <code>substring</code> 來進行字串切割等，要進行字串的串接，可以直接使用 <code>+</code>。
      <pre class="prettyprint"><code lang="java">import static java.lang.System.out;

public class Main {
    public static void main(String[] args) {
        String name = "codedata";

        out.println(name.length());          // 8
        out.println(name.contains("coded")); // true
        out.println(name.charAt(3));         // e
        out.println(name.substring(2, 5));   // ded
        out.println(name + name);            // codedatacodedata

        char[] characters = name.toCharArray();
        for(char ch : characters) {
            out.printf("%c ", ch);  // c o d e d a t a
        }
    }
}</code></pre>
      <br>
      在 Java 中，只有陣列與具有 <code>Iterable</code> 行為的物件，才能運用 for-each 語法，因而範例中使用 <code>toCharArray</code> 取得字元陣列，再透過 for-each 語法逐一取得陣列中的字元並顯示。<code>System.out</code> 的 <code>printf</code> 方法可以進行字串格式化再輸出，<code>%c</code> 佔位符號表示這邊將會有個字元。<code>String</code> 有個 <code>static</code> 方法 <code>format</code>，也可以進行字串格式化，傳回新的字串。例如：
      <pre class="prettyprint"><code lang="java">String desc = String.format("(%d %.2f %s)", 1, 99.3, "codedata");
System.out.println(desc); // (1 99.30 codedata)</code></pre>
      <br>
      格式化字串時所需要的語法，可以參考 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax">Format String syntax</a>。
      談到這邊該注意的是，<span style="color: #ff0000;"><strong>Java 中若要比較兩個基本型態，可以使用 <code>==</code>，然而要比較兩個物件的狀態是否相同，則需透過物件上定義的 <code>equals</code> 方法</strong></span>。例如：
      <pre class="prettyprint"><code lang="java">import static java.lang.System.out;

public class Welcome {
    public static void main(String[] args) {
        if(args[0].equals("codedata")) {
	           out.println("Hi, Admin!");
        } else {
	           out.printf("Welcome, %s%n", args[0]);
        }
    }
}</code></pre>
      <br>
      以下是這個程式原本想要的情況：<br>
      <br>
      &nbsp;<a href="images/java-tutorial-the-2nd-class-1-3.png"><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" class="alignnone size-full wp-image-3060"

          alt="java-tutorial-the-2nd-class-1-3" src="images/java-tutorial-the-2nd-class-1-3.png"

          height="87" width="673" /></div></div></a>
      <br>
      <br>
      然而，如果將程式中&nbsp;<code>if(args[0].equals("codedata"))</code> 改為 <code>if(args[0] == "codedata")</code>，結果就會是如下，再也看不到親切的站長問候：
      <br>
      <br>
      <a href="images/java-tutorial-the-2nd-class-1-4.png"><div class="pure-g"><div class="pure-u-1"><img class="pure-img-responsive" class="alignnone size-full wp-image-3061"

          alt="java-tutorial-the-2nd-class-1-4" src="images/java-tutorial-the-2nd-class-1-4.png"

          height="85" width="648" /></div></div></a>
      <br>
      <br>
      其實，<span style="color: #ff0000;"><strong><code>==</code> 的本質上其實並沒有改變</strong></span>，它還是僅比較兩邊的值，如果 <code>==</code> 兩邊是基本型態，比較兩邊值是否相等，如果 <code>==</code> 兩邊是物件，也是比較兩邊值是否相等，只不過這個值不是指物件的狀態，而是指<strong>參考（Reference）</strong>。
      <br>
      <br>
      本來嘛！要比較兩個物件的狀態，該怎麼比，本來就該定義，Java 中就是使用 <code>equals</code> 方法來定義，只不過 <strong>Java 中使用 <code>==</code> 比較物件時，不會像有的程式語言會自動去呼叫 <code>equals</code> 方法，<span

          style="color: #ff0000;">在 Java 中，得明確地呼叫 <code>equals</code> 來比較物件狀態</span></strong>。
      <br>
      <br>
      有關物件相等性更多的說明，可以參考本站 <a href="http://www.codedata.com.tw/java/object-equality-1/">物件相等性（上）</a>的文章，至於容器型態及 <code>if</code>、<code>for</code>、<code>while</code> 等流程語法，會在下篇文章中說明。
      <br>
      <br><br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></article></main></div></body>
<script src="../../js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
