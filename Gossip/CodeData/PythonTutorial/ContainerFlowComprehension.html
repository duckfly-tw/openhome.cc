<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Python 2 Tutorial 第二堂（1）數值與字串型態 &lt;&lt; 前情
                  想想你平時撰寫的一些應用程式，大部份是在處理一組資料，Python 對...">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="Python 2 Tutorial 第二堂（2）容器、流程、for 包含式">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/CodeData/PythonTutorial/ContainerFlowComprehension.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="Python 2 Tutorial 第二堂（1）數值與字串型態 &lt;&lt; 前情
                  想想你平時撰寫的一些應用程式，大部份是在處理一組資料，Python 對...">
    <title>Python 2 Tutorial 第二堂（2）容器、流程、for 包含式</title>
    <link rel="stylesheet" href="../../css/pure-0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../../css/layouts/side-menu-old-ie.css">    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="../../css/layouts/side-menu.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="../../css/caterpillar.css">
    <script async="" src="../../google-code-prettify/run_prettify.js"></script>
  <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
  <body>
    <div id="layout">
      <!-- Menu toggle --> <a href="ContainerFlowComprehension.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span> </a>
      <div id="menu">
        <div class="pure-menu"> <a class="pure-menu-heading" href="index.html">回 Python Tutorial</a>
          <ul class="pure-menu-list">
            <br>
            <div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img
                  title="Twitter" alt="Twitter" src="../../images/twitter.png"></a> <a
                href="http://www.facebook.com/openhome.cc"><img title="Facebook"
                  alt="Facebook" src="../../images/facebook.png"></a> </div>
            <br>
            <div id="search box">
              <script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div>
            <br>
            <div class="ad" style="text-align: center;">
              <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
              <!-- 2015 新版型 160 x 600 廣告 --> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px"
                data-ad-client="ca-pub-9750319131714390" data-ad-slot="3747048883"></ins>
              <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
          </ul>
        </div>
      </div>
      <main id="main">
        <header class="header">
          <h1>Python 2 Tutorial 第二堂（2）容器、流程、for 包含式</h1>
        </header>
        <article class="content"><br>
          <div class="ad-3" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="7104125683" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <br>
          <br>
          想想你平時撰寫的一些應用程式，大部份是在處理一組資料，Python 對管理資料用的容器（Container）型態，在語法上提供直接支援，加上 <code>for</code> 包含式（comprehension）的支援，在資料處理問題上可獲得不少的便利性。 <br>
          <br>
          Python 支援的容器型態有 <code>list</code>、<code>set</code>、<code>dict</code>、<code>tuple</code> 等。
          <h1>list 型態</h1>
          <code>list</code> 是有序且可變群集（Collection），在 Python 中，<code>[1, 2, 3]</code> 這樣的語法，即可建立含元素 1、2、3 而索引 0、1、2 的 <code>list</code> 實例。 <code><br>
            <br>
            list</code> 與先前介紹過的 <code>string</code> 享有共同的操作。<code>len</code> 傳回 <code>list</code> 長度；<code>in</code> 可測試某元素是否在 <code>list</code> 中；<code>+</code> 可以用來串接兩個 <code>list</code>；<code>*</code> 可用來複製出指定數量的 <code>list</code>。<code>[]</code> 可以指定索引，用以從 <code>list</code> 中取得元素，負索引是從最後一個元素計數，使用 <code>[]</code> 來切割 <code>list</code> 或許是最有用的功能。其他操作還有…
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; [0] * 10
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
&gt;&gt;&gt; ', '.join(['justin', 'caterpillar', 'openhome'])
'justin, caterpillar, openhome'
&gt;&gt;&gt; list('justin')
['j', 'u', 's', 't', 'i', 'n']
&gt;&gt;&gt;</code></pre>
          <h1>set 型態</h1>
          <code>set</code> 型態是無序群集，管理的元素不會重複而且<strong>必須<del>不可變（Immutable）</del>是 <a
              href="http://docs.python.org/2/glossary.html#term-hashable">hashable</a></strong>（這中間還有一些要討論的東西，可以參考 <a
            href="http://www.codedata.com.tw/java/object-equality-1/">物件相等性（上）</a>）。以下是 <code>set</code> 的幾個功能示範：
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; admins = {'Justin', 'caterpillar'}  # 建立 set
&gt;&gt;&gt; users = {'momor', 'hamini', 'Justin'}
&gt;&gt;&gt; 'Justin' in admins  # 是否在站長群？
True
&gt;&gt;&gt; admins &amp; users      # 同時是站長群也是使用者群的？
{'Justin'}
&gt;&gt;&gt; admins | users      # 是站長群或是使用者群的？
{'hamini', 'caterpillar', 'Justin', 'momor'}
&gt;&gt;&gt; admins - users      # 站長群但不使用者群的？
{'caterpillar'}
&gt;&gt;&gt; admins ^ users      # XOR
{'hamini', 'caterpillar', 'momor'}
&gt;&gt;&gt; admins &gt; users      # ∈
False
&gt;&gt;&gt; admins &lt; users 
False 
&gt;&gt;&gt;</code></pre>
          <h1>dict 型態</h1>
          鍵（Key）值（Value）對應的物件，<strong>鍵物件必須是 hashable</strong>。以下是一些操作示範：
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; passwords = {'Justin' : 123456, 'caterpillar' : 933933}
&gt;&gt;&gt; passwords['Justin']
123456
&gt;&gt;&gt; passwords['Hamimi'] = 970221   # 增加一對鍵值
&gt;&gt;&gt; passwords
{'caterpillar': 933933, 'Hamimi': 970221, 'Justin': 123456}
&gt;&gt;&gt; del passwords['caterpillar']   # 刪除一對鍵值
&gt;&gt;&gt; passwords
{'Hamimi': 970221, 'Justin': 123456}
&gt;&gt;&gt; passwords.items()
[('Hamimi', 970221), ('Justin', 123456)]
&gt;&gt;&gt; passwords.keys()
['Hamimi', 'Justin']
&gt;&gt;&gt; passwords.values()
[970221, 123456]
&gt;&gt;&gt;</code></pre>
          <br>
          使用 <code>[]</code> 時如果指定的鍵不存在，會發生 <code>KeyError</code>，可以使用 <code>dict</code> 的 <code>get</code> 方法，指定鍵不存在時傳回的預設值。例如：
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; passwords.get('openhome', '000000')
'000000'
&gt;&gt;&gt; passwords['openhome']
Traceback (most recent call last):
  File "", line 1, in 
KeyError: 'openhome'
&gt;&gt;&gt;</code></pre>
          <h1>tuple 型態</h1>
          <code>tuple</code> 型態作用類似 <code>list</code>，不過 <strong><code>tuple</code> 實例是不可變（Immutable）</strong>，也就是一旦建立，無法對其增減元素。除了增減元素個數之外，<code>tuple</code> 與 <code>list</code> 操作上類似，事實上，循序結構的物件（像是字串、<code>list</code>、<code>tuple</code> 等），在 Python 中共享某些操作方式。管理物件時該使用可變物件還是不可變物件？不可變物件在某些情況下，會擁有較好的效能，之後還會談到更多有關不可變物件的好處。 <br>
          <br>
          （在靜態定型的 Haskell 語言中，Tuple 更具效用，因為 Tuple 中的元素型態就組成了一個新的但未命名的型態。） <span
            style="color: #ff0000;"><strong><br>
              <br>
              練習 3：Python 互動模式與直譯器指令</strong></span> <br>
          <br>
          開啟一個終端機，鍵入 <code>python</code> 指令進入互動模式，接著鍵入以下指令，你會看到什麼？
          <ul>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">1 + 2</span></li>
            <li><code style="line-height: 1.714285714;">_</code><span style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # </span><code
                style="line-height: 1.714285714;">_</code><span style="line-height: 1.714285714; font-size: 1rem;"> 代表最後一次執行結果</span></li>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">_ + 3</span></li>
            <li><code style="line-height: 1.714285714;">help()</code><span
                style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 進入文件查詢介面</span></li>
            <li><code style="line-height: 1.714285714;">len</code><span
                style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 查詢 </span><code
                style="line-height: 1.714285714;">len</code><span style="line-height: 1.714285714; font-size: 1rem;"> 函式說明</span></li>
            <li><code style="line-height: 1.714285714;">keywords</code><span
                style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 查詢關鍵字有哪些</span></li>
            <li><code style="line-height: 1.714285714;">quit</code><span
                style="line-height: 1.714285714; font-size: 1rem;">（或是 </span><code
                style="line-height: 1.714285714;">q）&nbsp;</code><span style="line-height: 1.714285714; font-size: 1rem;">&nbsp;# 離開文件查詢介面</span></li>
            <li><code style="line-height: 1.714285714;">help(len)</code><span
                style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 直接查詢 </span><code
                style="line-height: 1.714285714;">len</code><span style="line-height: 1.714285714; font-size: 1rem;"> 函式說明</span></li>
            <li><code style="line-height: 1.714285714;">Ctrl + D</code><span
                style="line-height: 1.714285714; font-size: 1rem;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 離開互動模式</span></li>
          </ul>
          離開互動模式後，直接鍵入以下指令會看到什麼？
          <ul>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">python -h</span></li>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">python -c 'print "Hello! Python!"'</span></li>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">python -c 'help(len)'</span></li>
            <li><span style="font-family: Consolas, Monaco, 'Lucida Console', monospace; font-size: 0.857142857rem; line-height: 2;">python -c 'import this'</span></li>
          </ul>
          <code>-h</code> 引數會顯示使用說明，<code>-c</code> 會直譯後續給定的字串文字，因此 <code>python -c 'help(len)'</code> 就是顯示 <code>len</code> 函式的說明，<strong><span
              style="color: #ff0000;"><code>import this</code> 會顯示一段文件，代表 Python 的哲學，也是發展的規範</span></strong>：
          <pre class="prettyprint"><code lang="python">The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!</code></pre>
          <h1>if、for 與 while</h1>
          流程語法中最簡單的 <code>if..else</code> 分支判斷，在 Python 中是這樣寫的：
          <pre class="prettyprint"><code lang="python">from sys import argv
if len(argv) &gt; 1:
    print 'Hello, ' + argv[1]
else:
    print 'Hello, Guest'</code></pre>
          <br>
          在 Python 中，使用 <code>:</code> 來做為區塊（Block）開始的標示，相同縮排則表示了相同區塊範圍的程式碼，縮排必須一致，如果想使用四個空白字元縮排，整個程式都必須是四個空白字元縮排，如果要用 Tab 縮排，整個程式都必須使用 Tab 縮排。Python 中的 <code>if..else</code> 也有運算式（Expression）形式，使用上就像是 C 或 Java 的三元運算子 <code>?</code>:。<code>if</code> 條件式成立的話，會傳回 <code>if</code> 左邊的值，否則傳回 <code>else</code> 右邊的值。例如上面的程式也可以寫為：
          <pre class="prettyprint"><code lang="python">from sys import argv
print 'Hello, ' + (argv[1] if len(argv) &gt; 1 else 'Guest')</code></pre>
          <br>
          Python 中的 <code>for</code> 可用來迭代循序結構的物件。例如想將某 <code>list</code> 的元素都做二次方運算，收集在另一個 <code>list</code> 中的話，可以如下：
          <pre class="prettyprint"><code lang="python">numbers = [10, 20, 30]
squares = []
for number in numbers:
    squares.append(number ** 2)
print squares</code></pre>
          <br>
          至於 <code>while</code>，一般是用在結束條件不確定的情況下。例如求最大公因數可以如下：
          <pre class="prettyprint"><code lang="python">print 'Enter two numbers...'
m = int(raw_input('Number 1: '))
n = int(raw_input('Number 2: '))
while n != 0:
   r = m % n
   m = n
   n = r
print 'GCD: {0}'.format(m)</code></pre>
          <br>
          回頭看看這個範例：
          <pre class="prettyprint"><code lang="python">numbers = [10, 20, 30]
squares = []
for number in numbers:
    squares.append(number ** 2)
print squares</code></pre>
          <br>
          將某 <code>list</code> 的元素都做二次方運算，收集在另一個 <code>list</code> 中的話，其實還可以使用 <code>for</code> 包含式：
          <pre class="prettyprint"><code lang="python">numbers = [10, 20, 30]
print [number ** 2 for number in numbers]</code></pre>
          <br>
          這樣的寫法顯然簡潔多了。<code>for</code> 包含式也可以與條件式結合。例如想收集某個 <code>list</code> 中的奇數元素至另一 <code>list</code>，單純使用 <code>for</code> 迴圈，可以如下：
          <pre class="prettyprint"><code lang="python">numbers = [11, 2, 45, 1, 6, 3, 7, 8, 9]
odd_numbers = []
for number in numbers:
    if number % 2 != 0:
        odd_numbers.append(number)
print odd_numbers</code></pre>
          <br>
          使用 <code>for</code> 包含式的程式碼就簡潔多了：
          <pre class="prettyprint"><code lang="python">numbers = [11, 2, 45, 1, 6, 3, 7, 8, 9]
print [number for number in numbers if number % 2 != 0]</code></pre>
          <code><br>
            for</code> 包含式（comprehension）也可以形式巢狀結構，例如有個元素都為 <code>list</code> 的 <code>list</code>，想將其中的 <code>list</code> 元素串起來，也就是將之平坦化，可以如下：
          <pre class="prettyprint"><code lang="python">lts = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
print [ele for lt in lts for ele in lt]</code></pre>
          <br>
          當你使用 <code>[]</code> 包圍住 <code>for</code> 包含式（comprehension） 時，會建立 <code>list</code> 實例，如果使用 <code>{}</code> 的話，可以建立 <code>set</code> 實例，重複的元素會自動去除。例如：
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; {name for name in ['caterpillar', 'Justin', 'caterpillar', 'openhome']}
set(['caterpillar', 'Justin', 'openhome'])
&gt;&gt;&gt;</code></pre>
          <br>
          也可以建立 <code>dict</code> 實例。例如：
          <pre class="prettyprint"><code lang="python">&gt;&gt;&gt; names = ['caterpillar', 'justin', 'openhome']
&gt;&gt;&gt; passwds = [123456, 654321, 13579]
&gt;&gt;&gt; {name : passwd for name, passwd in zip(names, passwds)}
{'justin': 654321, 'openhome': 13579, 'caterpillar': 123456}
&gt;&gt;&gt; 
</code></pre> <br>
          上例中的 <code>zip</code> 函式，就如名稱意義，會將兩個 <code>list</code> 像拉鏈一樣，兩兩相扣在一起為 <code>tuple</code>，這些 <code>tuple</code> 元素組成一個新的 <code>list</code>，對於 <code>tuple</code> 元素組成的這個 <code>list</code>，每個 <code>tuple</code> 中的一對元素再指定給 <code>name</code> 與 <code>passwd</code>，最後這對 <code>name</code> 與 <code>passwd</code> 組成 <code>dict</code> 的一對鍵值。 <br>
          <br>
          （有些人剛接觸 Python 時，不太習慣 <code>for</code> 包含式的寫法，可以來看看 Haskell 中如何表達數學式 <code>S = { 2 . x | x ∈ N, x ≦ 10}</code>，Haskell 是寫為 <code>[2 * x | x &lt;- N, x &lt;= 10]</code> ，跟原本的數學式很相像，用這個方向來理解 Python 的 <code>for</code> 包括式，就比較能夠接受這樣的寫法。） <strong><span
              style="color: #ff0000;"><br>
              <br>
              練習 4：使用 <code>for</code> 包含式</span></strong> <br>
          <br>
          在 LAB 檔案中，有個&nbsp;exercises\exercise4\exercise4-1.py，內容如下：
          <pre class="prettyprint"><code lang="python">numbers = []
for number in range(20):
    numbers.append(str(number))
print ", ".join(numbers)</code></pre>
          <br>
          請試著使用 <code>for</code> 包含式來改寫它，解答可在 LAB 檔案的 solutions\exercise4\exercise4-1.py 找到。 <br>
          <br>
          （如果想挑戰比較難的練習，可試著使用 <code>for</code> 包含式來求解以下問題：找出周長為 24，每個邊長都為整數且不超過 10 的直角三角形。你可以試著看看 LAB 檔案中 exercises\exercise4\exercise4-2.py 的提示，解答可在 LAB 檔案的 solutions\exercise4\exercise4-2.py 找到） <br>
          <br>
          <br>
          <br>
          <div class="ad336-280" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins
              class="adsbygoogle" style="display:inline-block;width:336px;height:280px"
              data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <div class="recommend" style="text-align: center;">
            <hr>
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
      </main>
    </div></body>
    <script src="../../js/ui.js"></script>
    <div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>

</html>
