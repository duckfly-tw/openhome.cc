<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="你可以使用:name方式建立Symbol實例。例如：
      
      
      
      
      &gt;&gt; :a
=&gt; :a
&gt;&gt; :a...">

<meta property="og:locale" content="zh_TW">
<meta property="og:title" content="符號型態">
<meta property="og:type" content="article">
<meta property="og:url" content="https://openhome.cc/Gossip/Ruby/Symbol.html">
<meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
<meta property="og:site_name" content="OPENHOME.CC">
<meta property="og:description" content="你可以使用:name方式建立Symbol實例。例如：
      
      
      
      
      &gt;&gt; :a
=&gt; :a
&gt;&gt; :a...">


    <title>符號型態</title>

<link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
<!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="Symbol.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">回 Ruby 目錄</a>
            <ul class="pure-menu-list">
                <br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br><div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>符號型態</h1>
        </header>

        <article class="content"><br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            <span style="font-family: Courier New,Courier,monospace;">你可以使用<span style="font-weight: bold;">:name</span>方式建立Symbol實例。例如</span>：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; :a<br>
</span>=&gt; :a<span style="font-weight: bold;"><br>
&gt;&gt; :a.class<br>
            </span>=&gt; Symbol<span style="font-weight: bold;"><br>
            </span><span style="font-weight: bold;">&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>




      <br>
      Ruby以<span style="font-family: Courier New,Courier,monospace;">Symbol</span>實例代表程式中使用到的符號象徵，像是變數名稱、方法名稱、類別名稱、模組名稱等，如果你使用某個物件的<span style="font-family: Courier New,Courier,monospace;">methods</span>方法，可以取得<span style="font-family: Courier New,Courier,monospace;">Symbol</span>實例組成的陣列。例如取得字串的方法清單：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; "".methods<br>
</span>=&gt; [:&lt;=&gt;, :==, :===, :eql?, :hash, :casecmp, :+, :*, :%, :[], :[]=, :insert, :le<br>
ngth, :size, :bytesize, :empty?, :=~, :match, :succ, :succ!, :next, :next!, :upt<br>
o, :index, :rindex, :replace, :clear, :chr, :getbyte, :setbyte, :to_i, :to_f, :t<br>
o_s, :to_str, :inspect, :dump, :upcase, :downcase, :capitalize, :swapcase, :upca<br>
se!, :downcase!, :capitalize!, :swapcase!, :hex, :oct, :split, :lines, :bytes, :<br>
chars, :codepoints, :reverse, :reverse!, :concat, :&lt;&lt;, :crypt, :intern, :to_sym,<br>
&nbsp;:ord, :include?, :start_with?, :end_with?, :scan, :ljust, :rjust, :center, :sub<br>
, :gsub, :chop, :chomp, :strip, :lstrip, :rstrip, :sub!, :gsub!, :chop!, :chomp!<br>
, :strip!, :lstrip!, :rstrip!, :tr, :tr_s, :delete, :squeeze, :count, :tr!, :tr_<br>
s!, :delete!, :squeeze!, :each_line, :each_byte, :each_char, :each_codepoint, :s<br>
um, :slice, :slice!, :partition, :rpartition, :encoding, :force_encoding, :valid<br>
_encoding?, :ascii_only?, :unpack, :encode, :encode!, :to_r, :to_c, :&gt;, :&gt;=, :&lt;,<br>
&nbsp;:&lt;=, :between?, :nil?, :!~, :class, :singleton_class, :clone, :dup, :initialize<br>
_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust, :untrusted?, :tr<br>
ust, :freeze, :frozen?, :methods, :singleton_methods, :protected_methods, :priva<br>
te_methods, :public_methods, :instance_variables, :instance_variable_get, :insta<br>
nce_variable_set, :instance_variable_defined?, :instance_of?, :kind_of?, :is_a?,<br>
&nbsp;:tap, :send, :public_send, :respond_to?, :respond_to_missing?, :extend, :displa<br>
y, :method, :public_method, :define_singleton_method, :__id__, :object_id, :to_e<br>
num, :enum_for, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__]<span style="font-weight: bold;"><br>
&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>





      <br>
      <span style="font-family: Courier New,Courier,monospace;">可以使用Symbol.all_symbols取得目前程式中所有Symbol實例清單</span>，這是一份很長的內容。例如以Ruby 1.9.2 p290，在irb中取得的清單長度是3519。<br>
      <br>
先前談過，變數名稱、方法名稱、類別名稱、模組名稱等都是一種符號象徵，當你建立了一個變數名稱、方法名稱、類別名稱、模組名稱，那麼在<span style="font-family: Courier New,Courier,monospace;">Symbol.all_symbols就會有個Symbol實例來代表它：</span><br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; Symbol.all_symbols.size<br>
</span>=&gt; 3519<span style="font-weight: bold;"><br>
&gt;&gt; abc = 10<br>
            </span>=&gt; 10<span style="font-weight: bold;"><br>
&gt;&gt; Symbol.all_symbols.size<br>
            </span>=&gt; 3520<span style="font-weight: bold;"><br>
&gt;&gt; def some; end<br>
            </span>=&gt; nil<span style="font-weight: bold;"><br>
&gt;&gt; Symbol.all_symbols.size<br>
            </span>=&gt; 3521<span style="font-weight: bold;"><br>
&gt;&gt; class Other; end<br>
            </span>=&gt; nil<span style="font-weight: bold;"><br>
&gt;&gt; Symbol.all_symbols.size<br>
            </span>=&gt; 3522<span style="font-weight: bold;"><br>
&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>






      <br>
      變數名稱、方法名稱、類別名稱、模組名稱等都是一種符號象徵，都會有個<span style="font-family: Courier New,Courier,monospace;">Symbol</span>實例來代表，反過來說，你也可以使用<span style="font-family: Courier New,Courier,monospace;">Symbol</span>實例來代表你想表示的對象。例如想得知某個字串上是否有<span style="font-family: Courier New,Courier,monospace;">upcase</span>方法，可以如下：<span style="font-family: Courier New,Courier,monospace;"></span><br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; "".methods.include? :upcase<br>
</span>=&gt; true<span style="font-weight: bold;"><br>
&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>







      <br>
      例如，陣列上有個<span style="font-family: Courier New,Courier,monospace;">reduce</span>方法，可以指定程式區塊，對逐一移出陣列的元素進行某些動作，第一個區塊參數是程式區塊傳回值，預設為0，每次移出陣列的值會作為第二個區塊參數。例如想要對陣列中的值加總，可以如下：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; [1, 2, 3, 4, 5].reduce { |sum, element|<br>
?&gt;&nbsp;&nbsp;&nbsp;&nbsp; sum + element<br>
&gt;&gt; }<br>
</span>=&gt; 15<span style="font-weight: bold;"><br>
&gt;&gt; </span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>








      <br>
      <span style="font-family: Courier New,Courier,monospace;">{}的區塊寫法與do..end是幾乎相同的意義，慣例中，在一行中可寫完的區塊可使用{}，有傳回值的時候也可使用 {}，do..end則通常用於具有邊際效應的程式區塊。</span><br>
      <br>
實際上，若你只是對傳入的兩個區塊參數進行相加，可以指定<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">:+</span>，這代表著使用<span style="font-family: Courier New,Courier,monospace;">+</span>方法：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; [1, 2, 3, 4, 5].reduce(:+)<br>
</span>15<span style="font-weight: bold;"><br>
            </span><span style="font-weight: bold;">
&gt;&gt; </span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>









      <br>
      名稱是一種符號，字串撰寫名稱，可以使用字串的<span style="font-family: Courier New,Courier,monospace;">to_sym方法從字串取得Symbol實</span>例，事實上，許多接受<span style="font-family: Courier New,Courier,monospace;">Symbol</span>作為引數的方法，也接受字串：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; "+".to_sym<br>
</span>=&gt; :+<span style="font-weight: bold;"><br>
&gt;&gt; "+".to_sym.class<br>
            </span>=&gt; Symbol<span style="font-weight: bold;"><br>
&gt;&gt; [1, 2, 3, 4, 5].reduce("+")<br>
            </span>=&gt; 15<span style="font-weight: bold;"><br>
&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>










      <br>
      許多初學者因此搞不清楚字串與<span style="font-family: Courier New,Courier,monospace;">Symbol</span>的差別，正如先前所談，程式語意上，名稱只是一種符號，字串是用來撰寫名稱，如果就程式執行來說，<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">Symbol</span><span style="font-weight: bold;">實例是不可變動的（Immutable），而且整個程式中，</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">Symbol</span><span style="font-weight: bold;">實例是唯一的（Unique）</span>，但字串則沒有這兩個特性。例如：<br>
      
      
      
      
      <div class="cmd"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt; x = "123"<br>
</span>=&gt; "123"<span style="font-weight: bold;"><br>
&gt;&gt; x &lt;&lt; "456"<br>
            </span>=&gt; "123456"<span style="font-weight: bold;"><br>
&gt;&gt; x<br>
            </span>=&gt; "123456"<span style="font-weight: bold;"><br>
&gt;&gt; "123".object_id<br>
            </span>=&gt; 20334732<span style="font-weight: bold;"><br>
&gt;&gt; "123".object_id<br>
            </span>=&gt; 20182656<span style="font-weight: bold;"><br>
&gt;&gt; :a.object_id<br>
            </span>=&gt; 332744<span style="font-weight: bold;"><br>
&gt;&gt; :a.object_id<br>
            </span>=&gt; 332744<span style="font-weight: bold;"><br>
&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span><span style="color: rgb(255, 255, 255);"><br>




            </span></div>











      <br>
      <br>
<br>





<br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></article></main></div></body>
<script src="../js/ui.js"></script>
</html>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
