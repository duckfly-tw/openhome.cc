<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/OpenSCAD/'https://openhome.cc/zh-tw/openscad/curve/text-tower/'">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="挑戰過 文字之塔，下一步會不會想挑戰 文字之球 呢？
這玩意兒不好列印，不過，還是有人印得很漂亮呢！我是開了支撐，勉勉強強還算可以：先從簡單的開始
要讓字繞著球，需要的數學會更多一些，因此，我們...">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="文字與圓球">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/OpenSCAD/TextSphere.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="挑戰過 文字之塔，下一步會不會想挑戰 文字之球 呢？
這玩意兒不好列印，不過，還是有人印得很漂亮呢！我是開了支撐，勉勉強強還算可以：先從簡單的開始
要讓字繞著球，需要的數學會更多一些，因此，我們...">
    <title>文字與圓球</title>
    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="../css/caterpillar.css">
    <script async="" src="../google-code-prettify/run_prettify.js"></script>
  <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
  <body>
    <div id="layout">
      <!-- Menu toggle --> <a href="TextSphere.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --> <span></span> </a>
      <div id="menu">
        <div class="pure-menu"> <a class="pure-menu-heading" href="https://openhome.cc/Gossip/OpenSCAD/index.html">回
            OpenSCAD 目錄</a>
          <ul class="pure-menu-list">
            <li class="pure-menu-item"><br>
              <div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img
                    title="Twitter" alt="Twitter" src="../images/twitter.png"></a>
                <a href="http://www.facebook.com/openhome.cc"><img title="Facebook"
                    alt="Facebook" src="../images/facebook.png"></a>
                </div>
              <br>
              <div id="search box">
                <script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div>
              <br>
              <div class="ad" style="text-align: center;">
                <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- 2015 新版型 160 x 600 廣告 --> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px"
                  data-ad-client="ca-pub-9750319131714390" data-ad-slot="3747048883"></ins>
                <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
          </ul>
        </div>
      </div>
      <main id="main">
        <header class="header">
          <h1>文字與圓球</h1>
        </header>
        <article class="content"> <br>
          <div class="ad-3" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="7104125683" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <p>挑戰過 <a href="TextCylinder.html">文
              字之塔</a>，下一步會不會想挑戰 <a href="https://www.thingiverse.com/thing:1651681">文
              字之球</a> 呢？</p>
          <p><a href="https://www.thingiverse.com/thing:1651681"></a></p>
          <div class="pure-g">
            <div class="pure-u-1"><a href="https://www.thingiverse.com/thing:1651681"><img
                  class="pure-img-responsive" src="http://thingiverse-production-new.s3.amazonaws.com/renders/cf/92/35/46/cd/ab5cc9916d567d4345300ee32cbad367_preview_featured.JPG"
                  alt="文字與圓球"></a></div>
          </div>
          <p></p>
          <p>這玩意兒不好列印，不過，<a href="https://www.thingiverse.com/thing:1639055/#made">還
              是有人印得很漂亮呢</a>！我是開了支撐，勉勉強強還算可以：</p>
          <p><a href="https://www.thingiverse.com/thing:1639055"></a></p>
          <div class="pure-g">
            <div class="pure-u-1"><a href="https://www.thingiverse.com/thing:1639055"><img
                  class="pure-img-responsive" src="http://thingiverse-production-new.s3.amazonaws.com/renders/18/7e/93/db/32/03eb87bb01c19da9058408d9e9a7b3b6_preview_featured.jpg"
                  alt="PI Sphere"></a></div>
          </div>
          <p></p>
          <h1>先從簡單的開始</h1>
          <p>要讓字繞著球，需要的數學會更多一些，因此，我們先從簡單的開始，首先，你要能讓方塊繞著 z 軸轉 180
            度，如果不會的話，建議你先看看之前的文章，我是這麼做的：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 10;
length = 5;
for(a = [0:step_angle:180]) {
    rotate([0, 0, a]) translate([radius, 0, 0]) 
        cube([length, length, length], center = true);
}
</code></pre>
          <p>非常簡單的程式，結果就是：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-1.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>如果每個方塊除了繞 z 軸轉之外，同時再繞著 y 軸會如何呢？例如，同時繞 y 軸轉 -45 度：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 10;
length = 5;
for(a = [0:step_angle:180]) {
    rotate([0, -45, a]) translate([radius, 0, 0]) 
        cube([length, length, length], center = true);
}
%sphere(radius);
</code></pre>
          <p>結果會是半圓弧的部份跑到半徑與平面夾 45 度的地方，我故意加上個透明球，這樣比較看得出來：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-4.JPG"
                alt="文字與圓球"></div>
          </div>
          <p>你可以試著將 45 改為 30、60 等其他數字，半圓弧的部份就會是跑到半徑與平面夾 30、60 度的地方。</p>
          <p>如果繞 y 軸轉時，也是一邊從 -90 到 90 度遞增地轉動，這時會發現，方塊就是繞著球轉了：</p>
          <p>          <pre class="prettyprint"><code lang="openscad">
radius = 40;
step_angle = 10;
length = 5;
for(a = [0:step_angle:180]) {
    rotate([0, -90 + a, a]) translate([radius, 0, 0]) 
        cube([length, length, length], center = true);
}
%sphere(radius);
</code></pre></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-2.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>如果這時將步進角調小一些會如何呢？</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 0.25;
length = 5;
for(a = [0:step_angle:180]) {
    rotate([0, -90 + a, a]) translate([radius, 0, 0]) 
        cube([length, length, length], center = true);
}
%sphere(radius);
</code></pre>
          <p>結果會是：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-3.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>你可以試著將上面的模型重複個 8 次，每次繞 z 軸再轉 45 度，然後就知道 <a href="http://www.thingiverse.com/thing:1681678">Spinning
              picture ornament</a> 怎麼做了：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="http://thingiverse-production-new.s3.amazonaws.com/renders/d5/c4/fe/1f/9b/44d1c379100277e73f36c1462fa941be_preview_featured.jpg"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>不過，正如 <a href="https://openhome.cc/Gossip/OpenSCAD/Polyline3D.html">3D 線段</a>
            中提到的，還有更優雅的方式，可以建立這樣的螺線，當時最後的練習也有提供程式碼實作，別忘了回頭去看一下。</p>
          <h1>讓文字繞著球</h1>
          <p>於是，現在該是將方塊改為文字了，字的大小就暫時設為 10 好了，看看會如何：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 10;
font_size = 10;
thickness = 1;

for(a = [0:step_angle:180]) {
    rotate([0, -90 + a, a]) translate([radius, 0, 0]) 
        rotate([90, 0, 90]) 
            linear_extrude(thickness) 
                 text("A", size = font_size, valign = "center", halign = "center");
}
%sphere(radius);
</code></pre>
          <p>喔！繞著球的文字出現了：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-5.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>不過，這離 <a href="https://www.thingiverse.com/thing:1651681">文字之球</a>
            還有點距離，原因是字不夠密，為什麼字不夠密？原因之一是字降得過快，原因之二是字總共繞 z 軸只轉了半圈，實際上，文字之球中的文字是繞 z
            軸轉了好幾圈。</p>
          <p>因此，這跟剛剛在做 <a href="http://www.thingiverse.com/thing:1681678">Spinning
              picture ornament</a> 時不一樣，不能只改變 <code>step_angle</code>，因為這只會改變繞
            y 軸遞增的速度，實際上繞 z 軸還是只有 180 度。</p>
          <p>如果繞 z 軸遞增 180 度，而繞 y 軸只有從 -90 度開始遞增 90 度（也就是 180 / 2）的話會如何呢？</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-6.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>喔？文字繞到 xy 平面就停了，因為只繞 z 軸 180 度嘛！這簡單，只要繞 z 軸 180 兩遍就好了，如果繞 y 軸只有從
            -90 度開始遞增 45 度（也就是 180 / 4）的話會如何呢？為了讓文字能繞到球底部，你會需要繞 z 軸 180
            四遍，因此，你會發現到這呈反比的關係，於是我們可以寫下以下的程式：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 10;
font_size = 10;
thickness = 1;

total_semi_circles = 15;

for(a = [0:step_angle:180 * total_semi_circles]) {
    rotate([0, -90 + a / total_semi_circles, a]) translate([radius, 0, 0]) 
        rotate([90, 0, 90]) 
            linear_extrude(thickness) 
                text("A", size = font_size, valign = "center", halign = "center");
}
%sphere(radius);
</code></pre>
          <p>耶！文字繞球出現了：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-7.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>你可以改變 <code>total_semi_circles</code> 的大小，數字越大繞得越密，反之就越疏，<a href="https://www.thingiverse.com/thing:1651681">文
              字之球</a> 有個開口，這只要調整 <code>a</code> 的起始值就可以了：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
step_angle = 10;
font_size = 10;
thickness = 1;

total_semi_circles = 15;
open_begin = 500;

for(a = [open_begin:step_angle:180 * total_semi_circles]) {
    rotate([0, -90 + a / total_semi_circles, a]) translate([radius, 0, 0]) 
        rotate([90, 0, 90]) 
            linear_extrude(thickness) 
                text("A", size = font_size, valign = "center", halign = "center");
}
%sphere(radius);
</code></pre>
          <p>結果會是：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-8.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>因此，只要適當地改變這幾個參數，調整文字大小與疏密度至好看的外觀，就可以做出文字之球了…</p>
          <h1>精確地控制數字</h1>
          <p>本來事情可以就這麼結案了，Thingiverse
            上的作品也就只是這樣而已，不過，到底什麼是「適當地」改變這幾個參數？啊！就試啊！試到覺得好看為止…</p>
          <p>我這邊覺得好看的意思是，文字的開頭必須是不重疊，而且下一層跟上一層正好是一個字級的疏密度，並且可以適當地決定球的開口，難道就沒有個方式
            可以知道適當的參數設定嗎？其實是有的，不過當時我懶得再做下去了…</p>
          <p>首先來想想第一個需求好了，文字的開頭必須是不重疊，因此，我可以設定一圈要多少個字，且開口必須是 0 到 180
            度哪個位置，這樣才能知道文字的開頭處圓周長多少：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-9.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>如果開口夾角 <code>angle</code> 是 180 的某個比例 <code>open_begin_ratio</code>，
            那麼：</p>
          <pre class="prettyprint"><code lang="openscad">angle = 180 * open_begin_ratio;
</code></pre>
          <p>此時，圓切面的圓周長就是 <code>2 * PI * (radius * sin(angle))</code>，如果一圈有 <code>chars_per_circle</code>
            個字，那麼每個字的大就會是：</p>
          <pre class="prettyprint"><code lang="openscad">font_size = 2 * PI * radius * sin(angle) / chars_per_circle;
</code></pre>
          <p>每個字間的夾角就會是：</p>
          <pre class="prettyprint"><code lang="openscad">step_angle = 360 / chars_per_circle;
</code></pre>
          <p>再來處理開口，還記得剛剛這張圖怎麼來的嗎？</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-4.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>當繞軸 y 是從 -45 度開始時，也就是說，如果 <code>-90 + a / total_semi_circles</code>
            時，<code>a / total_semi_circles</code> 若是從 45
            開始，就可以從該位置開始畫起，也就是若開口角度為 <code>a / total_semi_circles = angle</code>，
            那麼 <code>a = angle * total_semi_circles</code>，也就是 <code>a</code>
            的開始必須是 <code>angle * total_semi_circles</code>：</p>
          <pre class="prettyprint"><code lang="openscad">begin_angle = angle * total_semi_circles;
</code></pre>
          <p>總圈數呢？因為字每轉一圈，才會剛好又回到同一面，我們希望字每轉一圈，正好是在上一層字的下方，因此，<code>2 * PI *
              radius / font_size</code> 就是層數，而轉一圈是一層，也就是轉兩個半圈是一層，因此總圈數就是：</p>
          <pre class="prettyprint"><code lang="openscad">total_semi_circles = 2 * PI * radius / font_size;
</code></pre>
          <p>把上頭所有的關係整理一下，寫入程式中，就會變成：</p>
          <pre class="prettyprint"><code lang="openscad">radius = 40;
thickness = 1;
chars_per_circle = 20;
open_begin_ratio = 0.25;

angle = 180 * open_begin_ratio;
font_size = 2 * PI * radius * sin(angle) / chars_per_circle;
step_angle = 360 / chars_per_circle;
total_semi_circles = 2 * PI * radius / font_size;
begin_angle = angle * total_semi_circles;

for(a = [begin_angle:step_angle:180 * total_semi_circles]) {
    rotate([0, -90 + a / total_semi_circles, a]) translate([radius, 0, 0]) 
        rotate([90, 0, 90]) 
            linear_extrude(thickness) 
                text("A", size = font_size, valign = "center", halign = "center");
}
%sphere(radius);
</code></pre>
          <p>完成的結果就是：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextSphere-10.JPG"
                alt="文字與圓球"></div>
          </div>
          <p></p>
          <p>這麼一來，就只要決定半徑、厚度、每一圈的字數，以及開口比例，剩下的數字，就會自動計算出來，這樣比較合理，而這個過程，是程式建模的挑戰，
            然而也是有趣的地方，你得去觀察，然後思考，尋求規則，接著逐一解決，不單是數學需要這個過程，也不單是程式需要這個過程，你玩弄任何的東西都需
            要這個過程，這麼一來，你的設計才會被賦予深度，才會有靈魂！</p>
          <br>
          <br>
          <div class="ad336-280" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins
              class="adsbygoogle" style="display:inline-block;width:336px;height:280px"
              data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <div class="recommend" style="text-align: center;">
            <hr>
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
      </main>
    </div></body>
    <script src="../js/ui.js"></script>
    <div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
</html>
