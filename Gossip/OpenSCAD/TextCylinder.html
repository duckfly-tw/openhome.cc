<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/OpenSCAD/'https://openhome.cc/zh-tw/openscad/curve/text-tower/'">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="文字之塔是我最喜歡的作品之一：
你可以自行輸入想要的文字，字元越多，塔就越高，照片中的是 程式寫不出來時的 20 個理由。
從繞圓到繞圓柱如果你會 繞圓的文字，那麼下一步要讓文字繞圓柱，基本上就不...">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="文字與圓柱">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/OpenSCAD/TextCylinder.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="文字之塔是我最喜歡的作品之一：
你可以自行輸入想要的文字，字元越多，塔就越高，照片中的是 程式寫不出來時的 20 個理由。
從繞圓到繞圓柱如果你會 繞圓的文字，那麼下一步要讓文字繞圓柱，基本上就不...">
    <title>文字與圓柱</title>
    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="../css/caterpillar.css">
    <script async="" src="../google-code-prettify/run_prettify.js"></script>
  <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
  <body>
    <div id="layout">
      <!-- Menu toggle --> <a href="TextCylinder.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --> <span></span> </a>
      <div id="menu">
        <div class="pure-menu"> <a class="pure-menu-heading" href="https://openhome.cc/Gossip/OpenSCAD/index.html">回
            OpenSCAD 目錄</a>
          <ul class="pure-menu-list">
            <li class="pure-menu-item"><br>
              <div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img
                    title="Twitter" alt="Twitter" src="../images/twitter.png"></a>
                <a href="http://www.facebook.com/openhome.cc"><img title="Facebook"
                    alt="Facebook" src="../images/facebook.png"></a>
                </div>
              <br>
              <div id="search box">
                <script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div>
              <br>
              <div class="ad" style="text-align: center;">
                <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- 2015 新版型 160 x 600 廣告 -->
                <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px"
                  data-ad-client="ca-pub-9750319131714390" data-ad-slot="3747048883"></ins>
                <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
          </ul>
        </div>
      </div>
      <main id="main">
        <header class="header">
          <h1>文字與圓柱</h1>
        </header>
        <article class="content"> <br>
          <div class="ad-3" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="7104125683" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <p>文字之塔是我最喜歡的作品之一：</p>
          <p><a href="https://www.thingiverse.com/thing:1241377"></a></p>
          <div class="pure-g">
            <div class="pure-u-1"><a href="https://www.thingiverse.com/thing:1241377"><img
                  class="pure-img-responsive" src="https://openhome.cc/Gossip/OpenSCAD/images/HelloOpenSCAD-7.JPG"
                  alt="文字之塔"></a></div>
          </div>
          <p></p>
          <p>你可以自行輸入想要的文字，字元越多，塔就越高，照片中的是 <a href="https://www.geeksaresexy.net/2014/04/14/top-20-replies-by-programmers-when-their-programs-dont-work-pict/">程
              式寫不出來時的 20 個理由</a>。</p>
          <h1>從繞圓到繞圓柱</h1>
          <p>如果你會 <a href="TextCircle.html">繞
              圓的文字</a>，那麼下一步要讓文字繞圓柱，基本上就不太是難事，首先你要決定的是，留下哪些參數給使用者調整，你可以留下半徑、字級，然
            後自動計算一圈的字數，或者是留下字數、字級，自動計算半徑，也可以留下半徑、字數，自動計算字級，其實哪種設計方式都可以，看你設定的使用對象
            是誰。</p>
          <p>如果你的對象是個設計師或者開發者之類的，那麼他可能會每個版本都想要，如果你的對象是一般使用者，那麼太多選項有時是一種困擾，至於我，其實
            做模型只是想驗證腦中的想法，會留下哪些參數，有時只是興之所致，或者是覺得將來我要再印製模型時，可能會想用哪個參數來決定，反正這是我自己寫
            的，大不了直接修改程式碼…XD</p>
          <p>在這邊，我們就讓任務簡單一些，一圈就固定 40 個字，而半徑就定為 40
            mm，因為我想做個筆筒，而通常大概就這個半徑左右，這麼一來，要讓字繞圓，每個字間的角度是 360 / 40，也就是 9
            度，而每個字的大小就是 2 * PI * 40 / 40，也就是 2 * PI。</p>
          <p>當然，不要有魔法數字，因此，還是這麼寫下來比較清楚：</p>
          <pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;

for(i = [0 : chars_per_circle - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, 0]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) text(
                chars[i], 
                font = "Courier New; Style = Bold", 
                size = char_size, 
                valign = "center", halign = "center"
            );
}
</code></pre>
          <p>這麼一來，就可以有以下的效果：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-1.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <p>當然，這只是繞圓而已，接下來，要讓每個字能緩降，那麼每個字要降多少呢？一圈 40 個字，因此每個字都要降 <code>char_size
              / 40</code>，直到指定的 chars 用盡為止：</p>
          <pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;
z_offset_per_char = char_size / 40;


for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) text(
                chars[i], 
                font = "Courier New; Style = Bold", 
                size = char_size, 
                valign = "center", halign = "center"
            );
}
</code></pre>
          <p>畫出來的成果如下：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-2.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <h1>加上螺旋線</h1>
          <p>當然，懸空的字是不能列印的，因此我為這個模型加上螺旋線，讓字出現在螺旋線之間，螺旋線的作法之一，是可以用公式來計算每個座標點，然後每個
            座標點繪製一個小方塊，只要方塊之間夠密，看來就會像是個螺旋線，而不會是一個一個分離的小方塊。</p>
          <p>不過，雖然人類視覺上看來是螺旋線，實際上產生出來的模型還是許多小方塊組成，也就是實際上產生的線，會有許多的面組成，這樣模型檔在
            render 時會很久，而且模型檔案出來容量會很大。</p>
          <p>因此，我們採取比較經濟的作法，在每個字的上頭畫上一條線：</p>
          <pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
char_thickness = 1;
z_offset_per_char = char_size / 40;
line_thickness = char_size / 8;


for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) 
                union() {
                    text(
                        chars[i], 
                        font = "Courier New; Style = Bold", 
                        size = char_size, 
                        valign = "center", halign = "center"
                    );
                    translate([0, char_size / 2, 0])
                        square([char_size, line_thickness], center = true);
                }
}
</code></pre>
          <p>成果會是：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-3.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <p>這樣當然行不通，因為每個線之間沒有接起來，這不是問題，只要將每個線再稍微拉長一些，因為字的大小、半徑是固定的、一圈的字數是固定的，要拉
            多長就直接試誤吧！可以剛好線與線之間接上就可以了，我試的結果，差不多是字級的 1.106 倍。</p>
          <p>不過另一個問題是，線拉長之後，會變成這樣：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-4.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <p>一高一低對吧！所以了，每條線必須傾斜一個角度，只是要傾斜多少角度呢？字級已知、轉一圈的長度已知，線的厚度也已知的情況下，其實就是一個三
            角函式關係：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-5.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <p>知道上面那張圖之後，就可以知道 tan 值了吧！因此要傾斜的角度就是 <code>atan((字級 + 線厚) / 圓周長)</code>：</p>
          <pre class="prettyprint"><code lang="openscad">chars = "3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481";

PI = 3.14159;
chars_per_circle = 40;
radius = 40;
step_angle = 360 / chars_per_circle;
circumference = 2 * PI * radius;
char_size = circumference / chars_per_circle;
z_offset_per_char = char_size / 40;
char_thickness = 1;
line_thickness = char_size / 8;
line_angle_offset = -atan((char_size - line_thickness)/circumference);

for(i = [0 : len(chars) - 1]) {
    rotate(i * step_angle) 
        translate([0, radius + char_size / 2, -z_offset_per_char * i]) 
            rotate([90, 0, 180]) linear_extrude(char_thickness) union() {
                text(
                    chars[i], 
                    font = "Courier New; Style = Bold", 
                    size = char_size, 
                    valign = "center", halign = "center"
                );
                rotate([0, 0, line_angle_offset]) translate([0, char_size / 2, 0])
                    square([char_size * 1.106, line_thickness], center = true);
            }
}
</code></pre>
          <p>這樣看起來就美多了：</p>
          <p></p>
          <div class="pure-g">
            <div class="pure-u-1"><img class="pure-img-responsive" src="images/TextCylinder-6.JPG"
                alt="文字與圓柱"></div>
          </div>
          <p></p>
          <p>什麼？那個 3.14159
            的小數點浮空了？這個部份就給你作為練習了，加個判斷式就可以解決掉了，至於如何做成筆筒，也當作練習吧！記得，可以將 <code>$fn</code>
            設為 40，並讓每個面與字貼齊，可以減少模型的複雜度。</p>
          <p>不知道你還記不記得 <a href="https://openhome.cc/Gossip/OpenSCAD/Polyline3D.html">3D 線段</a>
            中最後的練習？想要為文字加上螺線，也可以使用那時的 <code>polyline3D</code> 模組喔！</p>
          <br>
          <br>
          <div class="ad336-280" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins
              class="adsbygoogle" style="display:inline-block;width:336px;height:280px"
              data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <div class="recommend" style="text-align: center;">
            <hr>
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
      </main>
    </div></body>
    <script src="../js/ui.js"></script>
    <div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
  
</html>
