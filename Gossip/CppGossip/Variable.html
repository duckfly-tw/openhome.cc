<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="字面常數儲存於記憶體，現在的問題是若要將數值儲存在記憶體，並在稍後取回使用，該如何進行？
變數（Variable）提供一個有名稱的記憶體儲存空間，變數可包含的資訊包含變數資料型態、變數記憶體位址與變數...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="變數">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/CppGossip/Variable.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="字面常數儲存於記憶體，現在的問題是若要將數值儲存在記憶體，並在稍後取回使用，該如何進行？
變數（Variable）提供一個有名稱的記憶體儲存空間，變數可包含的資訊包含變數資料型態、變數記憶體位址與變數...">

    <title>變數</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="Variable.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html">回 C++ 目錄</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a></div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>變數</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p><a href="LiteralConstant.html">字面常數</a>儲存於記憶體，現在的問題是若要將數值儲存在記憶體，並在稍後取回使用，該如何進行？</p>
<p>變數（Variable）提供一個有名稱的記憶體儲存空間，變數可包含的資訊包含變數資料型態、變數記憶體位址與變數儲存值；C++ 開發者也常用物件（object）這個名稱來表示變數，因為物件對 C++ 開發者來說，不只是表示類別實例之類的東西，而是代表著一塊記憶體區域，可能含有型態與值等資訊。</p>
<p>在 C++ 中要使用變數，必須先宣告變數名稱與資料型態，例如：</p>
<pre class="prettyprint"><code lang="c++">int age;            // 宣告一個整數變數
double money;      // 宣告一個倍精度浮點數變數
</code></pre>
<p>C++ 使用 <code>int</code>、<code>float</code>、<code>double</code>、<code>char</code>、<code>bool</code> 等宣告變數名稱與型態，變數命名時不可以使用數字作為開頭，也不可以使用一些特殊字元，像是 *&amp;^% 之類的字元，變數名稱不可以與 C++ 內定的關鍵字同名，例如 <code>int</code>、<code>float</code>、<code>class</code> 等等。</p>
<p>在 C++ 宣告變數，會配置一塊記憶體空間，空間長度依宣告時的資料型態而定，如果在函式外宣告變數，變數會預設為對應型態的零值，若是在函式中宣告變數，被配置的這塊空間中原先可能就有資料，也因此變數在宣告後的值是不可預期的，應該在在變數宣告後初始其值，可以使用「指定運算子」（Assignment operator）<code>=</code> 來指定變數的值，例如：</p>
<pre class="prettyprint"><code lang="c++">int ageForStudent = 0;
double scoreForStudent = 0.0;
char levelForStudent = 'A';
</code></pre>
<p>上例中三個變數分別被初始為 <code>0</code>、<code>0.0</code> 與 <code>'A'</code>，還可以使用隱喻的方式來宣告變數並指定初值，例如：</p>
<pre class="prettyprint"><code lang="c++">int ageForStudent(0);
double scoreForStudent(0.0);
char levelForStudent('A');
</code></pre>
<p>這兩種宣告方式在宣告變數的時候，同時指定變數的儲存值，字元在指定時需使用單引數 <code>''</code> 包括，在宣告並指定變數值之後，可以使用變數名稱來取得其所儲存的值，下面這個程式是個簡單的示範：</p>
<pre class="prettyprint"><code lang="c++">#include &lt;iostream&gt; 
using namespace std; 

int main() { 
    int ageForStudent; 
    double scoreForStudent; 
    char levelForStudent; 

    cout &lt;&lt; "\n年級\t得分\t等級"; 
    cout &lt;&lt; "\n" &lt;&lt; ageForStudent 
         &lt;&lt; "\t" &lt;&lt; scoreForStudent 
         &lt;&lt; "\t" &lt;&lt; levelForStudent 
         &lt;&lt; "\n"; 

    ageForStudent = 5; 
    scoreForStudent = 80.0; 
    levelForStudent = 'B'; 

    cout &lt;&lt; "\n年級\t得分\t等級"; 
    cout &lt;&lt; "\n" &lt;&lt; ageForStudent 
         &lt;&lt; "\t" &lt;&lt; scoreForStudent 
         &lt;&lt; "\t" &lt;&lt; levelForStudent 
         &lt;&lt; "\n"; 

    return 0;
}
</code></pre>
<p>這個程式先宣告變數，但沒有初始其值，第一次顯示時會出現不可預期的資料，而在指定變數的值之後，顯示變數值時就會出現指定的資料了，執行結果如下所示：</p>
<pre class="prettyprint"><code lang="c++">年級    得分    等級
4200459 1.55553e-306

年級    得分    等級
5       80      B
</code></pre>
<p>也可以在使用宣告變數後，使用以下的建構子（Constructor）方式將變數的值初始為各型態的零值：</p>
<pre class="prettyprint"><code lang="c++">int ageForStudent = int();
double scoreForStudent = double();
char levelForStudent = char();
</code></pre>
<p>在 C++ 11 中，增加了<a href="https://en.cppreference.com/w/cpp/language/list_initialization">清單初始化（list initialization）</a>，其目的在統一初始化的方式，對於基本型態，也可以使用同一種風格來初始化。</p>
<pre class="prettyprint"><code lang="c++">int ageForStudent{0};
double scoreForStudent{0.0};
char levelForStudent{'A'};
</code></pre>
<p>這種初始化還有個特性，<code>{}</code> 中的值若指定給變數時，有可能造成精度遺失的話，編譯器會提出警訊。例如：</p>
<pre class="prettyprint"><code lang="c++">double pi = 3.14159;
int x = {pi};  // warning: narrowing conversion of 'pi' from 'double' to 'int' inside { }
</code></pre>
<p>如果如下撰寫，預設是不會提出警訊的：</p>
<pre class="prettyprint"><code lang="c++">double pi = 3.14159;
int x = pi; 
</code></pre>
<p>這是因為型態發生了隱式轉換（implicit conversion），<code>pi</code> 的小數會被截去，整數部份被指定給 <code>x</code>，若在這種情況下，也想要編譯器提出警訊，編譯時可以加上 <code>-Wconversion</code> 引數。</p>
<p>可以在宣告變數時使用 <code>const</code> 關鍵字來限定，如果程式中有其他程式碼試圖改變這個變數，編譯器會檢查出這個錯誤，例如：</p>
<pre class="prettyprint"><code lang="c++">const double PI = 3.14159;
PI = 3.14;
</code></pre>
<p>這一段程式碼中的 <code>MAX</code> 變數我們使用 <code>const</code> 來限定，所以它在指定為 10 之後，就不可以再指定值給它，所以第二次指定會被編譯器指出錯誤，在 g++ 編譯器時會出現這樣的錯誤訊息：</p>
<pre class="prettyprint"><code lang="c++">error: assignment of read-only variable 'PI'
</code></pre>
<p>使用 <code>const</code> 來限定的變數，目的通常就是不希望其它程式碼來變動值，例如圓周率 PI 的指定。</p>
<p>從 C++ 11 開始，可以使用 <code>constexpr</code> 請編譯器驗證常數初始時是在編譯時期決定，例如：</p>
<pre class="prettyprint"><code lang="c++">constexpr int A = 10;
constexpr int B = sizeof(10);
constexpr int C = sizeof(B);
constexpr int D = rand();    // error: call to non-'constexpr' function 'int rand()'
</code></pre>
<p><code>rand</code> 傳回隨機亂數，因此 <code>D</code> 的實際值要在執行時期才能決定，而非編譯時期，因此發生錯誤；<code>constexpr</code> 的價值在於，在重重的運算式或函式呼叫下，編譯時期常數有時很難一眼看出，這時加上 <code>constexpr</code> 請編譯器來進行檢驗就方便多了。</p>
<p>如果要宣告無號整數變數，可以加上 <code>unsigned</code> 關鍵字，例如：</p>
<pre class="prettyprint"><code lang="c++">unsigned int i ;
</code></pre>
<p><code>bool</code> 型態的變數雖然也可視為整數型態，但不能在宣告變數時加上 <code>unsigned</code> 來修飾。</p>
<p>從 C++ 11 開始，若變數宣告後有明確地初始化，可以使用 <code>auto</code> 讓編譯器推斷變數型態，例如：</p>
<pre class="prettyprint"><code lang="c++">int ageForStudent = 5; 
double scoreForStudent = 80.0; 
char levelForStudent = 'B'; 
</code></pre>
<p>可以改為：</p>
<pre class="prettyprint"><code lang="c++">auto ageForStudent = 5; 
auto scoreForStudent = 80.0; 
auto levelForStudent = 'B'; 
</code></pre>
<p>只用 <code>auto</code> 卻沒有初始，會發生編譯錯誤：</p>
<pre class="prettyprint"><code lang="c++">auto ageForStudent; // error: declaration of 'auto ageForStudent' has no initializer
</code></pre>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
