<!doctype html><html lang="zh-tw">
<head>
    <meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/ECMAScript/'https://openhome.cc/zh-tw/javascript/basics/es5/'">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ECMAScript 6 都已經正式釋出兩年了，才來從 ECMAScript 5 開始？其實也是因為這樣，還有那樣的原因，我有必要重新看一下 JavaScript 的東西，只是看有點無聊，想說就乾脆來...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="從 ECMAScript 5 開始">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/ECMAScript/GettingStartedECMAScript5.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="ECMAScript 6 都已經正式釋出兩年了，才來從 ECMAScript 5 開始？其實也是因為這樣，還有那樣的原因，我有必要重新看一下 JavaScript 的東西，只是看有點無聊，想說就乾脆來...">

    <title>從 ECMAScript 5 開始</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="GettingStartedECMAScript5.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="https://openhome.cc/Gossip/ECMAScript/">回 JavaScript</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>從 ECMAScript 5 開始</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>ECMAScript 6 都已經正式釋出兩年了，才來從 ECMAScript 5 開始？其實也是因為這樣，還有那樣的原因，我有必要重新看一下 JavaScript 的東西，只是看有點無聊，想說就乾脆來改版好了… XD</p>
<p><a href="http://kangax.github.io/compat-table/es6/">不少長青（Even-green）瀏覽器在 ES6 的支援度上已經不錯了</a>，然而為了相容性，不少程式庫或既有應用程式，都還不是 ECMAScript 6 寫的，那麼至少，從 ECMAScript 5 嚴格模式比較好，更舊的寫法我就不再提了。</p>
<p>如果打算把應用程式從舊舊的 JavaScript 昇至 ECMAScript 6，先想辦法整理程式碼，使之能在 ECMAScript 5 嚴格模式下存活，會是比較漸進的作法；就算想用 ECMAScript 6 重寫應用程式，然而基於相容性，使用了工具將 ECMAScript 6 轉換為舊版的 JavaScript，總是有時會需要看懂轉換出來的程式碼吧！</p>
<p>因此，接下來會先以〈<a href="https://openhome.cc/Gossip/CodeData/EssentialJavaScript/">JavaScript 語言核心</a>〉為基礎進行修改，忽略那些嚴格模式下無法使用的語法元素，在 ECMAScript 5 重新整理完過後，希望能開始聊聊 ECMAScript 6，然後將〈<a href="https://openhome.cc/Gossip/JavaScript/">JavaScript 本質部份</a>〉中，瀏覽器部份的文件也用 ECMAScript 6 更新一下，並將舊版 IE 的說明剔除 … 呃… 這會是一條漫長的路（想到就蠻累的，總之慢慢來吧！ … XD）。</p>
<p>那麼，就語言的部份，還是使用 Node.js 來作為示範平臺吧！（雖然 JDK9 附的 <code>jjs</code> 也支援不少 ES6 特性了，不過不知道支援到什麼程度就是了）就寫這篇文件的時間點上，我使用的是 8.9.1 LTS 的 Windows 版本。</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node -v
v8.9.1
</code></pre>
<p>只輸入 <code>node</code> 會進入指令互動環境，按下 Ctrl+D 可以離開，如果要將程式碼寫在 .js 裏頭再執行，例如編輯一個 helloworld.js：</p>
<pre class="prettyprint"><code lang="javascript">console.log('Hello, World');
</code></pre>
<p>然後執行 <code>node helloworld.js</code> 就可以執行程式：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node helloworld.js
Hello, World
</code></pre>
<p>如果需要在執行時給定命令列引數的話，可以使用 <code>process.argv</code>，這是一個陣列（<code>Array</code> 實例），索引 0 是 <code>'node'</code> 指令名稱，索引 1 是你的 .js 檔案路徑，如果有指定引數的話，這些引數會是從索引 2 開始儲存。例如若你的 helloworld.js 是：</p>
<pre class="prettyprint"><code lang="javascript">process.argv.forEach(function(arg, index) {
    console.log(arg + ', ' + index);
});
</code></pre>
<p>那麼指定引數時，就會有以下的執行結果：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node helloworld.js arg1 arg2
C:\Program Files\nodejs\node.exe, 0
C:\workspace\helloworld.js, 1
arg1, 2
arg2, 3
</code></pre>
<p>你發現了，我使用的是 Windows 版本上的，就學習語言而言，Windows 版本基本上應該是沒問題。通常，我不太需要指令名稱與檔案路徑，因此，可以只擷取之後索引 1 之後的引數：</p>
<pre class="prettyprint"><code lang="javascript">var args = process.argv.slice(2);
console.log('Hello, ' + args[0]);
</code></pre>
<p>這樣的話，就可以透過 <code>args</code> 索引 0 開始來取得 .js 檔案名稱之後供給的命令列引數了：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node helloworld.js Justin
Hello, Justin
</code></pre>
<p>ECMAScript 5 的嚴格模式（strict mode），這只要在你想要的程式碼範疇中，加入一段 <code>use strict</code> 字串，如果有支援嚴格模式的環境就會採納，沒有支援的環境，只是當作一個平凡的字串罷了。</p>
<p>例如，在 ES5 的嚴格模式下，不允許對未使用 <code>var</code> 宣告的變數指定值：</p>
<pre class="prettyprint"><code lang="javascript">'use strict';

x = 10;
console.log(x);
</code></pre>
<p>使用 Node.js 的話，執行以上 .js 檔案，將會發生錯誤：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node helloworld.js
C:\workspace\helloworld.js:4
    x = 10;
      ^

ReferenceError: x is not defined
    at Object.&lt;anonymous&gt; (C:\workspace\helloworld.js:4:7)
    at Module._compile (module.js:635:30)
    at Object.Module._extensions..js (module.js:646:10)
    at Module.load (module.js:554:32)
    at tryModuleLoad (module.js:497:12)
    at Function.Module._load (module.js:489:3)
    at Function.Module.runMain (module.js:676:10)
    at startup (bootstrap_node.js:187:16)
    at bootstrap_node.js:608:3
</code></pre>
<p>也可以在使用 <code>node</code> 指令時，加上 <code>--use_strict</code>，例如：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node --use_strict
&gt; x = 10;
ReferenceError: x is not defined
    at repl:1:3
    at ContextifyScript.Script.runInThisContext (vm.js:50:33)
    at REPLServer.defaultEval (repl.js:240:29)
    at bound (domain.js:301:14)
    at REPLServer.runBound [as eval] (domain.js:314:12)
    at REPLServer.onLine (repl.js:441:10)
    at emitOne (events.js:121:20)
    at REPLServer.emit (events.js:211:7)
    at REPLServer.Interface._onLine (readline.js:282:10)
    at REPLServer.Interface._line (readline.js:631:8)
&gt;
</code></pre>
<p>必須先聲明的是，這系列不是 JavaScript/ECMAScript 語言入門，我只會寫些語言中我覺得有興趣的特性，因此，雖然從 ES7 開始，ECMAScript 打算採頻繁的方式，持續每年釋出新版本，內容包含當年已完成的新特性就好，不過，我目前的規劃是不打算跟著這樣 ES7、ES8 寫下去，而這系列也不會是 Node.js 的介紹，方才一連串的簡介，只是為了後續介紹語言核心時的必要準備。</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
