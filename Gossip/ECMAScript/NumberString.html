<!doctype html><html lang="zh-tw">
<head>
    <meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/ECMAScript/'https://openhome.cc/zh-tw/javascript/es-basics/number-string/'">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JavaScript 中的基本資料型態包括了數值、字串與布林值，型態名稱分別為 number、string 與布林值 boolean，在 ES6 中，多了個 symbol，這會在下一篇文件中說明。
至...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="增強的數值與字串">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/ECMAScript/NumberString.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="JavaScript 中的基本資料型態包括了數值、字串與布林值，型態名稱分別為 number、string 與布林值 boolean，在 ES6 中，多了個 symbol，這會在下一篇文件中說明。
至...">

    <title>增強的數值與字串</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="NumberString.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="https://openhome.cc/Gossip/ECMAScript/">回 JavaScript</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>增強的數值與字串</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>JavaScript 中的基本資料型態包括了數值、字串與布林值，型態名稱分別為 <code>number</code>、<code>string</code> 與布林值 <code>boolean</code>，在 ES6 中，多了個 <code>symbol</code>，這會在下一篇文件中說明。</p>
<p>至於 <code>number</code> 的部份，在 ES6 中，可以使用 <code>Number.MAX_SAFE_INTEGER</code> 與 <code>Number.MIN_SAFE_INTEGER</code> 來取得可表達的最大整數與最小整數，而 <code>Number.isSafeInteger</code> 可用來檢查一個整數是否在安全範圍內：</p>
<pre class="prettyprint"><code lang="javascript">&gt; Number.MAX_SAFE_INTEGER;
9007199254740991
&gt; Number.MIN_SAFE_INTEGER;
-9007199254740991
&gt; Number.isSafeInteger(9007199254740992);
false
&gt; Number.isSafeInteger(9007199254740991);
true
&gt; Number.isInteger(9007199254740992)
true
&gt;
</code></pre>
<p><code>Number.isInteger</code> 只檢查數字是不是整數，不會考慮它是不是安全範圍內的整數。至於兩個符點數之間，最小的差距，可以使用 <code>Number.EPSILON</code> 來取得：</p>
<pre class="prettyprint"><code lang="javascript">&gt; Number.EPSILON;
2.220446049250313e-16
&gt;
</code></pre>
<p>可以使用 <code>0b</code>（或 <code>0B</code>） 撰寫二進位數來表示數字，或者是 <code>0o</code>（或<code>0O</code>？別這麼寫啦！）撰寫八進位數來表示數字。例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; 0b0100
4
&gt; 0o77
63
&gt;
</code></pre>
<p>（在 ES5 嚴格模式下，不允許使用八進位 <code>077</code> 來表示 63，因為有人會誤用 0 來對齊數字。）</p>
<p>如果你有個字串 <code>'0b0100'</code>、<code>'0o77'</code>，可以使用 <code>Number</code>（而不是使用 <code>parseInt</code>）來轉換為 10 進位數字，例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; Number('0b0100')
4
&gt; Number('0o77')
63
&gt;
</code></pre>
<p>只不過，這就與 <code>Number</code> 的 <code>toString</code> 字串不一致了，因為它少了 0b 或 0o 的前置：</p>
<pre class="prettyprint"><code lang="javascript">&gt; (4).toString(2)
'100'
&gt; (63).toString(8)
'77'
&gt; parseInt('100', 2)
4
&gt; parseInt('77', 8)
63
&gt;
</code></pre>
<p><code>Number</code> 的 <code>toString()</code>，還是得配合 <code>parseInt</code>，不過，ES6 的 <code>Number</code> 上有個 <code>parseInt</code> 也有個 <code>parseFloat()</code>，與全域的 <code>parseInt</code> 與 <code>parseFloat</code> 是相同的：</p>
<pre class="prettyprint"><code lang="javascript">&gt; Number.parseInt === parseInt
true
&gt; Number.parseFloat === parseFloat
true
&gt;
</code></pre>
<p>因為 ES6 想要遠離全域的束縛，一些原本是全域函式的東西，都被放到了某個名稱之下，不過，有些獲得了增強，例如 <code>Number.isNaN</code> 與 <code>isNaN</code> 行為上是不同的，只有 <code>NaN</code> 能讓 <code>Number.isNaN</code> 為 <code>true</code> 了：</p>
<pre class="prettyprint"><code lang="javascript">&gt; Number.isNaN(NaN);
true
&gt; Number.isNaN(1 / 'two');
true
&gt; Number.isNaN('caterpillar');
false
&gt; Number.isNaN(undefined);
false
&gt; Number.isNaN('0');
false
&gt;
</code></pre>
<p><code>Number.isFinite</code> 與 <code>isFinite</code> 也不同，<code>Number.isFinite</code> 遇到非 <code>number</code> 就會是 <code>false</code>：</p>
<pre class="prettyprint"><code lang="javascript">&gt; isFinite('15')
true
&gt; Number.isFinite('15')
false
&gt; Number.isFinite(15);
true
&gt; Number.isFinite(Infinity);
false
&gt;
</code></pre>
<p>在字串的部份，ES6 中，如果字串中的字元不有 0000 ~ FFFF 的範圍之中（也就是 BMP 外的字元），例如高音譜記號的 1D11E，可以直接使用 <code>\u{1D11E}</code> 來表示了，使用 <code>'\uD834\uDD1E'</code> 也是可以啦！</p>
<pre class="prettyprint"><code lang="javascript">&gt; '\u{1D11E}' === '\uD834\uDD1E';
true
&gt;
</code></pre>
<p>在 ES6 中支援模版字串（Template string），必須使用 ` 來建立模版字串，不少文件最愛舉的例子是它可以換行，例如，有個 helloworld.js 檔案寫了以下的內容的話：</p>
<pre class="prettyprint"><code lang="javascript">let html = `&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Hello, World&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        Hello, World
    &lt;/body&gt;
&lt;/html&gt;`;

console.log(html);
</code></pre>
<p>執行這個 .js 檔案你會看到：</p>
<pre class="prettyprint"><code lang="javascript">C:\workspace&gt;node --use_strict helloworld.js
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
            &lt;title&gt;Hello, World&lt;/title&gt;
        &lt;/head&gt;
    &lt;body&gt;
            Hello, World
        &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>該換行的都換行了，簡單來說，它會保留 ` 之間的內容。例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; let s = `Your left brain has nothing right.
... Your right brain has nothing left.`
undefined
&gt; s;
'Your left brain has nothing right.\nYour right brain has nothing left.'
&gt; typeof s;
'string'
&gt;
</code></pre>
<p>一個模版字串的型態也是 <code>string</code>。模版字串中若 <code>${}</code> 的部份，會執行 <code>${}</code> 中的內容，然後取得結果再與其他字串結合在一起，例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; `1 + 2 = ${1 + 2}`
'1 + 2 = 3'
&gt; let a = 1;
undefined
&gt; let b = 2;
undefined
&gt; `${a} + ${b} == ${a + b}`
'1 + 2 == 3'
&gt; let o = {p : 10};
undefined
&gt; `${o.p}`;
'10'
&gt; let arr = [1, 2, 3];
undefined
&gt; `Double arr: ${arr.map(n =&gt; n * 2)}`;
'Double arr: 2,4,6'
&gt;
</code></pre>
<p>最後一個看到的是 ES6 的箭號函式（Arrow function），之後就會談到。可以想見的，如果想要建立模版，例如 HTML，使用模版字串很方便，例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; let title = 'Hello, World';
undefined
&gt; let message = 'Hello? World?';
undefined
&gt; let html = `&lt;!DOCTYPE html&gt;
... &lt;html&gt;
...     &lt;head&gt;
...         &lt;title&gt;${title}&lt;/title&gt;
...     &lt;/head&gt;
...     &lt;body&gt;
...         ${message}
...     &lt;/body&gt;
... &lt;/html&gt;`;
undefined
&gt; console.log(html);
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
            &lt;title&gt;Hello, World&lt;/title&gt;
        &lt;/head&gt;
    &lt;body&gt;
            Hello? World?
        &lt;/body&gt;
&lt;/html&gt;
undefined
&gt;
</code></pre>
<p>經常被拿來在說明模版字串之後提及的是標記模版（Tagged template），如前面提過的，模版字串中若 <code>${}</code> 的部份，會執行 <code>${}</code> 中的內容，然後取得結果再與其他字串結合在一起，如果你想分別處理其他字串以及 <code>${}</code> 運算結果，例如 <code>${}</code> 可能來自使用者輸入，而你想要將有安全疑慮的字元替換掉，那標記模版（Tagged template）就會派上用場。</p>
<p>不過，標記模版其實是個函式呼叫的特殊形式，如果你有個函式 <code>f</code>，那麼：</p>
<pre class="prettyprint"><code lang="javascript">let a = 10;
let b = 20;

f(`${a} + ${b} = ${a + b}`);
</code></pre>
<p>結果就相當於：</p>
<pre class="prettyprint"><code lang="javascript">f('10 + 20 = 30');
</code></pre>
<p>然而，如果你使用：</p>
<pre class="prettyprint"><code lang="javascript">f`${a} + ${b} = ${a + b}`
</code></pre>
<p>就會將 <code>${}</code> 外的字串分割出來，使用陣列儲存，然後運算出 <code>${a}</code>、<code>${b}</code>、<code>${a + b}</code> 的值，最後再用陣列與運算出來的值來呼叫函式，也就是相當於：</p>
<pre class="prettyprint"><code lang="javascript">f(['', ' + ', ' = ', ''], 10, 20, 30);
</code></pre>
<p>接下來，就看你的函式中怎麼處理這些值了，例如：</p>
<pre class="prettyprint"><code lang="javascript">function f(strings, value1, value2, value3) {
    // 函式處理
}
</code></pre>
<p>如果你的標記模版中 <code>${}</code> 數量是固定的，這樣就夠了，不過，若是事先無法決定個數，那麼可以定義以下這樣的函式：</p>
<pre class="prettyprint"><code lang="javascript">function f(strings, ...values) {
    // 函式處理
}
</code></pre>
<p><code>...</code> 是 ES6 中的 Rest 運算子，當它出現在參數時，會將呼叫函式時其餘的引數收集在一個陣列中，當成函式的引數傳入，因此就標記模版來說，就是將 <code>${}</code> 的結果收集至陣列，然後當成第二個引數傳入函式了。</p>
<p>如果你想要 <code>console.log</code> 能顯示 <code>'\n'</code> 字樣，基本上在字串中要 escape：</p>
<pre class="prettyprint"><code lang="javascript">&gt; console.log('ABC\nEFG');
ABC
EFG
undefined
&gt; console.log('ABC\\nEFG');
ABC\nEFG
undefined
&gt; console.log(`ABC\nEFG`);
ABC
EFG
undefined
&gt; console.log(`ABC\\nEFG`);
ABC\nEFG
undefined
&gt;
</code></pre>
<p>在 ES6 中，有個 <code>String.raw</code> 函式，搭配標記模版，可以直接 escape，讓 <code>\n</code> 這類的字元，不會被轉譯為換行：</p>
<pre class="prettyprint"><code lang="javascript">&gt; String.raw`ABC\nEFG`
'ABC\\nEFG'
&gt; console.log(String.raw`ABC\nEFG`)
ABC\nEFG
undefined
&gt;
</code></pre>
<p>函式搭配標記模版時，函式的第一個參數值雖是陣列，然而會加上一個 <code>raw</code> 特性，可用來取得未轉譯字串的清單：</p>
<pre class="prettyprint"><code lang="javascript">&gt; function f(strings) {
...     console.log(strings);
...     console.log(strings.raw);
... }
undefined
&gt; f`ABC\nEFG`
[ 'ABC\nEFG' ]
[ 'ABC\\nEFG' ]
undefined
&gt; 
</code></pre>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
