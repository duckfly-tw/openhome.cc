<!doctype html><html lang="zh-tw">
<head>
    <meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/ECMAScript/'https://openhome.cc/zh-tw/javascript/basics/array/'">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="陣列是記憶體中線性的連續資料，在 JavaScript 中，並沒有實際的陣列，而是以物件來模擬出相似的操作外觀。如果你要在 JavaScript 中建立所謂的陣列（以下還是先簡稱陣列），可以使用 Ar...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="數字為特性的陣列">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/ECMAScript/Array.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="陣列是記憶體中線性的連續資料，在 JavaScript 中，並沒有實際的陣列，而是以物件來模擬出相似的操作外觀。如果你要在 JavaScript 中建立所謂的陣列（以下還是先簡稱陣列），可以使用 Ar...">

    <title>數字為特性的陣列</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="Array.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="https://openhome.cc/Gossip/ECMAScript/">回 JavaScript</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>數字為特性的陣列</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>陣列是記憶體中線性的連續資料，在 JavaScript 中，並沒有實際的陣列，而是以物件來模擬出相似的操作外觀。如果你要在 JavaScript 中建立所謂的陣列（以下還是先簡稱陣列），可以使用 <code>Array</code> 建構出實例。例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; var array1 = new Array();
undefined
&gt; array1.length;
0
&gt; var array2 = new Array(10);
undefined
&gt; array2.length;
10
&gt; var array3 = new Array(10, 20, 30);
undefined
&gt; array3.length;
3
&gt; 
</code></pre>
<p>上面示範了三種 <code>Array</code> 實例建構的方式，第一種方式建構出沒有任何元素的陣列，第二種方式建構出長度為 10 的陣列，每個索引位置（0 到 9）都是 <code>undefined</code>，第三種方式則建構出內含三個元素的陣列，索引 0 開始分別是 10、20、30。</p>
<p>實際上，很少人會直接使用 <code>Array</code> 建構陣列，而會使用陣列實字（Array literal）。例如：</p>
<pre class="prettyprint"><code lang="javascript">&gt; var array1 = [];
undefined
&gt; array1.length;
0
&gt; var array2 = [];
undefined
&gt; array2.length = 10;
10
&gt; array2.length;
10
&gt; var array3 = [10, 20, 30];
undefined
&gt; array3.length;
3
&gt; 
</code></pre>
<p>你並沒有看錯，在 JavaScript 中，<code>Array</code> 建立的實例，<code>length</code> 特性是可讀可寫的。例如：</p>
<pre class="prettyprint"><code lang="javascript">function print(array) {
    for(var i = 0; i &lt; array.length; i++) {
         console.log(array[i]);
    }
}

var array = [1, 2, 3];
print(array);  // 1 2 3
console.log('........');

array.length = 5;
print(array);  // 1 2 3 undefined undefined
console.log('........');

array.length = 2;
print(array);  // 1 2
console.log('........');

array.length = 3;
print(array);  // 1 2 undefined
</code></pre>
<p>在上面的例子中，陣列原本的長度為 3，後來設定 <code>length</code> 為 5，索引 3 與 4 的部份會是空項目（empty item），指定索引取值的話會是 <code>undefined</code>，將 <code>length</code> 設為 2 時，原本索引 2 的資料就沒了，就算設回 3 也找不回來了。</p>
<p>雖然陣列中的空項目取值的話會是 <code>undefined</code>，不過，當陣列中有空項目時，運算或函式會有不一致的行為：</p>
<pre class="prettyprint"><code lang="javascript">&gt; 0 in [1,, 3];
true
&gt; 0 in [,,];
false
&gt; 0 in [undefined, undefined, undefined];
true
&gt; [undefined, undefined].forEach(function(elem) {
...     console.log(undefined);
... });
undefined
undefined
undefined
&gt; [,,].forEach(function(elem) {
...     console.log(undefined);
... });
undefined
&gt;
</code></pre>
<p>從上面的例子來看，陣列中的空項目與 <code>undefined</code> 並不同，可以的話，應避免建立有空項目的陣列。</p>
<p>陣列是記憶體中線性的連續資料，在 JavaScript 中，並沒有實際的陣列，而是以物件來模擬出相似的操作外觀，事實上，用 <code>Array</code> 建構出的物件，索引其實就是以代表數字的特性罷了，事實上索引指定方式也可以用字串，只要它代表數字：</p>
<pre class="prettyprint"><code lang="javascript">&gt; var array = [1, 2, 3];
undefined
&gt; array['0'];
1
&gt; array['1'];
2
&gt; array['2'];
3
&gt; for(var i in array) {
...     console.log(i);
... }
0
1
2
undefined
&gt; delete array[1];
true
&gt; array;
[ 1, &lt;1 empty item&gt;, 3 ]
&gt; 
</code></pre>
<p>也因此，因為索引其實就是陣列物件上的特性，你也可以用 <code>delete</code> 刪除陣列中的元素，也因此，你可以輕易地使用普通物件，來模擬出陣列的操作外觀：</p>
<pre class="prettyprint"><code lang="javascript">function print(array) {
    for(var i = 0; i &lt; array.length; i++) {
         console.log(array[i]);
    }
}

// 顯示 100 200 300
print({  
    '0' : 100,
    '1' : 200,
    '2' : 300,
    length : 3
});
</code></pre>
<p>在 JavaScript 中如上模擬出所謂的陣列，是非常普遍的應用。那麼，建構 <code>Array</code> 實例，或者說使用陣列實字建構陣列的好處是什麼？當然是為了擁有 <code>Array</code> 已定義的行為，例如自動依元素內容來調整 <code>length</code>：</p>
<pre class="prettyprint"><code lang="javascript">&gt; var array = [];
undefined
&gt; array.length;
0
&gt; array[0] = 100;
100
&gt; array.length;
1
&gt; array[10] = 900;
900
&gt; array.length;
11
&gt; 
</code></pre>
<p>陣列的長度隨時可以增加或減少，指定索引元素時也不一定要連續指定，例如上例中，直接指定了索引 10 為 900，其它未指定的2到9索引處，全都是 <code>undefined</code>（就像沒有 2 到 9 的特性名稱罷了），在 JavaScript 中，也沒有所謂陣列超出索引的問題，例如上例若指定 <code>array[10000]</code>，充其量就是傳回 <code>undefined</code>。</p>
<p>直接使用 <code>Array</code> 實例來進行陣列操作，還可以獲得 <code>Array</code> 上已定義的方法。例如排序與迭代：</p>
<pre class="prettyprint"><code lang="javascript">var names = ["Justin", "Monica", "Irene"];

names.sort(function(n1, n2) {
         return n1.length - n2.length;
      })
      .forEach(function(elem) { // Irene Justin Monica
          console.log(elem);
      });
</code></pre>
<p><code>forEach</code> 是 ECMAScript 5 規範中為 <code>Array</code> 新增的方法，可以指定函式，實際上，只要是類陣列的物件，也可以使用 <code>forEach</code>。例如：</p>
<pre class="prettyprint"><code lang="javascript">var obj = {  
   '0' : 100,
   '1' : 200,
   '2' : 300,
   length : 3
};

obj.forEach = Array.prototype.forEach;

obj.forEach(function(elem, index, arr) {
    console.log(elem);
});

obj.forEach(console.log);
</code></pre>
<p>上面範例的執行結果是：</p>
<pre class="prettyprint"><code lang="javascript">100
200
300
100 0 { '0': 100,
  '1': 200,
  '2': 300,
  length: 3,
  forEach: [Function: forEach] }
200 1 { '0': 100,
  '1': 200,
  '2': 300,
  length: 3,
  forEach: [Function: forEach] }
300 2 { '0': 100,
  '1': 200,
  '2': 300,
  length: 3,
  forEach: [Function: forEach] }
</code></pre>
<p>陣列中每個元素會作為引數傳入函式，這是 JavaScript 風格的走訪陣列方式，ECMAScript 5 規範的 <code>Array</code> 中，有很多這類接受函式的方法，像是 <code>every</code>、<code>some</code>，可以測試陣列元素是否全部符合，以及某個符合條件：</p>
<pre class="prettyprint"><code lang="javascript">function isLength5(value, index, array) {
    return value.length === 5;
}

function lengthLessThan6(value, index, array) {
    return value.length &lt; 6;
}

var names = ["Justin", "Monica", "Irene"];

console.log(names.every(isLength5));         // false
console.log(names.some(lengthLessThan6));    // true
</code></pre>
<p>處理一串資料時常用的 <code>filter</code>、<code>map</code>、<code>reduce</code> 方法當然也有：</p>
<pre class="prettyprint"><code lang="javascript">var names = ["Justin", "Monica", "Irene"];

var sum = names.filter(function(elem) {
                    return elem.length &gt; 5;
               })
               .map(function(elem) {
                   return elem.length;
               })
               .reduce(function(accum, elem) {
                   return accum + elem;
               }, 0);

console.log(sum);  // 12
</code></pre>
<p><code>reduce</code> 是從陣列索引 0 迭代至尾端，相對地，有個 <code>reduceRight</code> 是從陣列尾端往前迭代至索引 0。除此之外，ECMAScript 5 還新增了 <code>indexOf</code>、<code>lastIndexOf</code> 方法，更多 <code>Array</code> 上可用的方法，可以參考 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array - JavaScript | MDN</a>。</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
