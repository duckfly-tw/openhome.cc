<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="變數（Variable）是儲存值的位置，變數宣告可以給予識別名稱（Identifier）、型態與初始值，在 Go 中寫下的 10、3.14、true、"Justin" 等稱之為常數（Constant）...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="變數宣告、常數宣告">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/Go/VariableConstantDeclaration.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="變數（Variable）是儲存值的位置，變數宣告可以給予識別名稱（Identifier）、型態與初始值，在 Go 中寫下的 10、3.14、true、"Justin" 等稱之為常數（Constant）...">

    <title>變數宣告、常數宣告</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="VariableConstantDeclaration.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html"><< Go 語言</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a></div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>變數宣告、常數宣告</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>變數（Variable）是儲存值的位置，變數宣告可以給予識別名稱（Identifier）、型態與初始值，在 Go 中寫下的 <code>10</code>、<code>3.14</code>、<code>true</code>、<code>"Justin"</code> 等稱之為常數（Constant），常數宣告可給予這些常數識別名稱。</p>
<h1>基本變數宣告</h1>
<p>要在 Go 中進行變數宣告有多種形式，使用 <code>var</code> 是最基本的方式。例如，宣告一個 <code>x</code> 變數，型態為 <code>int</code>，初始值為 <code>10</code>：</p>
<pre class="prettyprint"><code lang="golang">var x int = 10
</code></pre>
<p>這麼一來，從 <code>x</code> 這個位置開始，儲存了 <code>int</code> 長度的值 10，在宣告變數時，型態是寫在名稱之後。你也可以同時建立多個變數並指定初值：</p>
<pre class="prettyprint"><code lang="golang">var x, y, z int = 10, 20, 30
</code></pre>
<p>這樣的話，<code>x</code>、<code>y</code>、<code>z</code> 的型態都是 <code>int</code>，值分別是 <code>10</code>、<code>20</code>、<code>30</code>。如果宣告多個變數時，想要指定不同的型態，可以使用批量宣告：</p>
<pre class="prettyprint"><code lang="golang">var (
    x int = 10
    y string = "Justin"
    z bool = true
)
</code></pre>
<p>如果宣告變數時指定了型態，但未指定初值，那麼編輯器會提供預設初值，例如：</p>
<pre class="prettyprint"><code lang="golang">var (
    a bool        
    b int32
    c float32
    d string
    e complex128
)
</code></pre>
<p>在上面的宣告中，<code>a</code>、<code>b</code>、<code>c</code>、<code>d</code>、<code>e</code> 的值分別會是 <code>false</code>、<code>0</code>、<code>0.0</code>、<code>""</code> 與 <code>0 + 0i</code>。在 Go 中，宣告了變數，程式中卻沒有取用的動作，那麼會發生 declared and not used 的編譯錯誤。</p>
<h1>自動推斷型態</h1>
<p>在 Go 中宣告變數並指定值時，可以不用提供型態，由編譯器自動推斷型態，例如：</p>
<pre class="prettyprint"><code lang="golang">var x = 10
</code></pre>
<p>上頭的 <code>x</code> 型態會是 <code>int</code>，而底下的宣告：</p>
<pre class="prettyprint"><code lang="golang">var x, y, z = 10, 3.14, "Justin"
</code></pre>
<p><code>x</code>、<code>y</code>、<code>z</code> 的型態分別會是 <code>int</code>、<code>float64</code> 與 <code>string</code>，批量宣告時也可以自動推斷型態，例如：</p>
<pre class="prettyprint"><code lang="golang">var (
    x = 10        // int 型態
    y = 3.14      // float32 型態
    z = "Justin"  // string 型態
)
</code></pre>
<h1>短變數宣告</h1>
<p>在函式中，想要定義變數值的場合，可以使用短變數宣告，例如：</p>
<pre class="prettyprint"><code lang="golang">x := 10
y := 3.14
z := "Justin"
</code></pre>
<p>如果 <code>x</code> 是首次定義，就等於是宣告變數並指定值。上例也可以寫成一行：</p>
<pre class="prettyprint"><code lang="golang">x, y, z := 10, 3.14, "Justin"
</code></pre>
<p>由於 Go 的函式外，每個語法都必須以關鍵字開始，因此短變數宣告不能在函式外使用。</p>
<p><code>var</code> 宣告的變數名稱不可重複，然而，短變數宣告時，若同一行內有新宣告了另一變數，就可以重複宣告已存在的變數，例如，以下是合法的，因為使用 <code>:=</code> 時有一個新的 <code>y</code> 變數：</p>
<pre class="prettyprint"><code lang="golang">var x = 10
x, y :=  20, 30
</code></pre>
<p>此時，並沒有建立一個新的 <code>x</code> 變數，只是將新值指定給 <code>x</code> 而已。</p>
<p>由於短變數宣告可以同時宣告變數並指定值，因此對於底下這類需求：</p>
<pre class="prettyprint"><code lang="golang">package main

import "fmt"

func main() {
    var x = true
    if x {
        fmt.Println(x)
    }
}
</code></pre>
<p>在上例，<code>x</code> 的範圍是整個 <code>main</code>，若改為底下，範圍就只會是 <code>if</code> 區塊：</p>
<pre class="prettyprint"><code lang="golang">package main

import "fmt"

func main() {
    if x := true; x {
        fmt.Println(x)
    }
}
</code></pre>
<p>類似地，<code>for</code> 之類的語法，也常運用短變數宣告。</p>
<p>（在數學上 <code>A := B</code> 的寫法，涵義是藉由 B 來定義 A，例如數學上若已經定義 <code>x</code> 以及 <code>f(x)</code>，<code>x := f(x)</code> 表示用舊的 <code>x</code> 定義新的 <code>x</code>，這反而像是程式語言中的 <code>x = f(x)</code> 指定的概念，當然，數學上的符號與程式語言中的符號是有出入的，Go 在這邊只是借用了 <code>:=</code> 來作為另一種變數宣告符號。）</p>
<h1>調換變數值</h1>
<p>在 Go 中，要調換兩變數的值很簡單，例如底下的程式執行過後，<code>x</code> 會是 <code>20</code>，而 <code>y</code> 會是 <code>10</code>：</p>
<pre class="prettyprint"><code lang="golang">var x = 10
var y = 20
x, y = y, x
</code></pre>
<h1>基本常數宣告</h1>
<p>如一開始談到的，在 Go 中寫下的 <code>10</code>、<code>3.14</code>、<code>true</code>、<code>"Justin"</code> 等稱之為常數（Constant），常數宣告可給予這些常數識別名稱，要給予名稱時使用的是 <code>const</code> 關鍵字，例如：</p>
<pre class="prettyprint"><code lang="golang">const x = 10
</code></pre>
<p>正如〈<a href="http://openhome.cc/Gossip/Go/PreDeclaredType.html">認識預定義型態</a>〉中談過的，10 會是一個整數常數，不過型態未定，如果要定義一個常數的型態，可以使用 <code>int32()</code>、<code>int64()</code> 之類的函式進行型態轉換，或者是在使用 <code>const</code> 宣告常數名稱時指定型態，例如：</p>
<pre class="prettyprint"><code lang="golang">const x int32 = 10
</code></pre>
<p>這邊的 <code>10</code> 就是 <code>int32</code> 型態了，注意，這邊的 <code>x</code> 並不是一個變數，而是一個識別名稱罷了，因此，會說 <code>x</code> 常數的型態是 <code>int32</code>，而不能說 <code>x</code> 變數的型態是 <code>int32</code>。</p>
<p>如果有多個常數要宣告，也可以批量宣告，例如：</p>
<pre class="prettyprint"><code lang="golang">const (
    x = 10
    y = 3.14
    z = "Justin"
)
</code></pre>
<p>再次地，<code>x</code>、<code>y</code>、<code>z</code> 分別是未定型態的整數、浮點數與字串常數（而不是 <code>int</code>、<code>float64</code>、<code>string</code> 這三個 Go 中定義的型態），如果你想要讓他們為已定義型態的整數、浮點數與字串常數，可以在宣告時指定型態：</p>
<pre class="prettyprint"><code lang="golang">const (
    x int = 10
    y float32 = 3.14
    z string = "Justin"
)
</code></pre>
<p>由於常數並非變數，因此，宣告了常數並不一定要用到，底下的程式不會發生錯誤：</p>
<pre class="prettyprint"><code lang="golang">package main

import "fmt"

func main() {
    const (
        x = 10
        y = 3.14
        z = "Justin"
    )

    fmt.Println(x)
    fmt.Println(y)
}
</code></pre>
<h1>常數運算式</h1>
<p>由於常數可以是未定型態，因此一個有趣的地方就是，像 <code>2 + 3.0</code>、<code>15 / 4</code>、<code>15 / 4.0</code> 這樣的常數運算式，該怎麼在編譯時期決定它們的值？答案是根據運算式中的常數運算元是整數、<code>rune</code>（單引號括住的常數）、浮點數或複數來決定，如果運算式中包括了越後面的常數，就會用它來決定。</p>
<p>因此，<code>2 + 3.0</code> 會是未定型態的浮點數 <code>5.0</code>，<code>15 / 4</code> 會是未定型態的整數 <code>3</code>，然而，<code>15 / 4.0</code>，會是浮點數型態的 <code>3.75</code>，在規格書的〈<a href="https://golang.org/ref/spec#Constant_expressions">Constant expressions</a>〉中，列出了說明以及一些範例，例如：</p>
<pre class="prettyprint"><code lang="golang">const a = 2 + 3.0          // a == 5.0   (untyped floating-point constant)
const b = 15 / 4           // b == 3     (untyped integer constant)
const c = 15 / 4.0         // c == 3.75  (untyped floating-point constant)
const Θ float64 = 3/2      // Θ == 1.0   (type float64, 3/2 is integer division)
const Π float64 = 3/2.     // Π == 1.5   (type float64, 3/2. is float division)
const d = 1 &lt;&lt; 3.0         // d == 8     (untyped integer constant)
const e = 1.0 &lt;&lt; 3         // e == 8     (untyped integer constant)
const f = int32(1) &lt;&lt; 33   // illegal    (constant 8589934592 overflows int32)
const g = float64(2) &gt;&gt; 1  // illegal    (float64(2) is a typed floating-point constant)
const h = "foo" &gt; "bar"    // h == true  (untyped boolean constant)
const j = true             // j == true  (untyped boolean constant)
const k = 'w' + 1          // k == 'x'   (untyped rune constant)
const l = "hi"             // l == "hi"  (untyped string constant)
const m = string(k)        // m == "x"   (type string)
const Σ = 1 - 0.707i       //            (untyped complex constant)
const Δ = Σ + 2.0e-4       //            (untyped complex constant)
const Φ = iota*1i - 1/1i   //            (untyped complex constant)
</code></pre>
<p>現在，應該能明白，〈<a href="http://openhome.cc/Gossip/Go/PreDeclaredType.html">認識預定義型態</a>〉中 <code>math.MaxInt64</code> 若不加上 <code>int64</code>，何以會 overflow 的錯誤了。</p>
<p>附帶一提的是，在 Go 中，模組中定義的名稱若要能在模組外可見，必須是首字大寫，而對於像 <code>math.MaxInt64</code> 這類的公用常數，可以定義在一個 .go 檔案之中，例如 <code>math.MaxInt64</code>，就是定義在一個 <a href="https://golang.org/src/math/const.go">const.go</a> 之中。</p>
<h1>使用 iota 列舉</h1>
<p>如果要需要列舉一些常數時，可以使用 <code>iota</code>，它每遇到一次 <code>const</code>，就會重置為 <code>0</code>，若它在批量常數宣告中使用時，第一次出現時的預設值是 <code>0</code>，每出現一次就遞增 <code>1</code>，例如：</p>
<pre class="prettyprint"><code lang="golang">const (
    x = iota   // 0
    y = iota   // 1
    z = iota   // 2
 )
</code></pre>
<p>因為 <code>const</code> 批量宣告時，若後面的值沒寫出，會使用前一個值設定，例如：</p>
<pre class="prettyprint"><code lang="golang">const (
    x = 1
    y      // 1
    z      // 1
 )
</code></pre>
<p>因此，如果是連續的列舉，只要寫一次 <code>iota</code> 就可以了，這表示後續的值，也都使用 <code>iota</code>，結果就是：</p>
<pre class="prettyprint"><code lang="golang">const (
    x = iota   // 0
    y          // 1
    z          // 2
 )
</code></pre>
<p>其實也可以這麼寫來列舉常數，只是比較麻煩：</p>
<pre class="prettyprint"><code lang="golang">const x, y, z = iota, iota, iota
</code></pre>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
