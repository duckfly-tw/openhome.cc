<!doctype html><html lang="zh-tw">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="unicodeã€unicode/utf8ã€unicode/utf16 æ˜¯ç”¨ä¾†åˆ¤æ–·ã€è™•ç† Unicode ä»¥åŠ UTF-8ã€UTF-16 ç·¨ç¢¼çš„å¥—ä»¶ï¼Œåœ¨ä½¿ç”¨é€™äº›å¥—ä»¶ä¹‹å‰ï¼Œè¦å…ˆçŸ¥é“çš„æ˜¯ï¼ŒGo èªç‚ºã€Œå­—å…ƒã€...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="unicode å¥—ä»¶">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/Go/Unicode.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="unicodeã€unicode/utf8ã€unicode/utf16 æ˜¯ç”¨ä¾†åˆ¤æ–·ã€è™•ç† Unicode ä»¥åŠ UTF-8ã€UTF-16 ç·¨ç¢¼çš„å¥—ä»¶ï¼Œåœ¨ä½¿ç”¨é€™äº›å¥—ä»¶ä¹‹å‰ï¼Œè¦å…ˆçŸ¥é“çš„æ˜¯ï¼ŒGo èªç‚ºã€Œå­—å…ƒã€...">

    <title>unicode å¥—ä»¶</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- ç¶²é å±¤ç´šå»£å‘Š --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="Unicode.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="index.html"><< Go èªè¨€</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a></div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 æ–°ç‰ˆå‹ 160 x 600 å»£å‘Š -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>unicode å¥—ä»¶</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 æ–°ç‰ˆå‹å›æ‡‰å¼å»£å‘Š --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p><code>unicode</code>ã€<code>unicode/utf8</code>ã€<code>unicode/utf16</code> æ˜¯ç”¨ä¾†åˆ¤æ–·ã€è™•ç† Unicode ä»¥åŠ UTF-8ã€UTF-16 ç·¨ç¢¼çš„å¥—ä»¶ï¼Œåœ¨ä½¿ç”¨é€™äº›å¥—ä»¶ä¹‹å‰ï¼Œè¦å…ˆçŸ¥é“çš„æ˜¯ï¼ŒGo èªç‚ºã€Œå­—å…ƒã€çš„å®šç¾©éæ–¼æ¨¡ç³Šï¼Œåœ¨ Go ä¸­ä½¿ç”¨ <code>rune</code> å„²å­˜ Unicode ç¢¼é»ï¼ˆCode pointï¼‰ï¼Œè€Œ Go ä¸­å­—ä¸²æ˜¯ UTF-8 ç·¨ç¢¼çš„ä½å…ƒçµ„çµ„æˆã€‚</p>
<p><a href="https://golang.org/pkg/unicode/"><code>unicode</code></a> å¥—ä»¶ä¸»è¦ç”¨ä¾†åˆ¤æ–· Unicode ç¢¼é»çš„ç‰¹æ€§ï¼ˆpropertiesï¼‰ï¼Œåœ¨ Unicode è¦ç¯„ä¸­ï¼Œæ¯å€‹ç¢¼é»æœƒè¢«æŒ‡å®šæŸäº›ç‰¹æ€§ï¼Œå…·æœ‰ç›¸åŒç‰¹æ€§çš„ä¸€çµ„ç¢¼é»æ§‹æˆä¸€å€‹é›†åˆï¼Œä»¥ä¾¿æ–¼ç†è§£ã€åˆ¤æ–·é€™çµ„ç¢¼é»ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<a href="https://en.wikipedia.org/wiki/Template:General_Category_(Unicode)">General Category</a> ç‰¹æ€§æœ‰ Letter/L ä»£è¡¨å­—æ¯ã€Number/N ä»£è¡¨æ•¸å­—ç­‰ï¼Œåœ¨ Go çš„ <a href="https://golang.org/pkg/unicode/#pkg-variables">unicode å¥—ä»¶æ–‡ä»¶çš„ Variables</a> ä¸€é–‹é ­ï¼Œåˆ—å‡ºçš„å°±æ˜¯é€™é¡ç‰¹æ€§çš„è®Šæ•¸ï¼š</p>
<pre class="prettyprint"><code lang="golang">var (
    ...
    Digit  = _Nd // åé€²ä½æ•¸å­—çš„é›†åˆ

    Letter = _L  // å­—æ¯é›†åˆ
    L      = _L
    ...
    Number = _N  // æ•¸å­—é›†åˆ
    N      = _N
    ...
}
</code></pre>
<p>æ¯å€‹è®Šæ•¸çš„å‹æ…‹éƒ½æ˜¯ <code>*RangeTable</code>ï¼Œç”±ç¢¼é»çš„ç¯„åœç­‰æ¬„ä½çµ„æˆï¼š</p>
<pre class="prettyprint"><code lang="golang">type RangeTable struct {
    R16         []Range16   // ç”¨ uint16 è¨˜éŒ„ç¢¼é»ä½ä½è‡³é«˜ä½
    R32         []Range32   // è¨˜éŒ„ R16 ç„¡æ³•è¡¨ç¤ºçš„ç¯„åœï¼Œç”¨ uint32 è¨˜éŒ„ç¢¼é»ä½ä½è‡³é«˜ä½
    LatinOffset int 
}
</code></pre>
<p>ç¢¼é»ç¯„åœè¡¨å¯ä»¥åœ¨ <a href="https://golang.org/src/unicode/tables.go">tables.go</a> æ‰¾åˆ°ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œå­—æ¯é›†åˆçš„ç¢¼é»ç¯„åœï¼š</p>
<pre class="prettyprint"><code lang="golang">var _L = &amp;RangeTable{
    R16: []Range16{
        {0x0041, 0x005a, 1},
        {0x0061, 0x007a, 1},
        {0x00aa, 0x00b5, 11},
        å¾ˆé•·çš„æ¸…å–®...
</code></pre>
<p>é€éæŒ‡å®š <code>RangeTable</code>ï¼Œå°±å¯ä»¥ç°¡å–®åœ°åˆ¤æ–·ç¢¼é»æ˜¯å¦æœ‰æŸç‰¹æ€§ï¼Œä¾‹å¦‚ï¼Œ<code>Â²Â³Â¹Â¼Â½Â¾ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼ã‰›ã‰œã‰â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«â…¬â…­â…®â…¯â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸â…¹â…ºâ…»â…¼â…½â…¾â…¿</code> éƒ½æ˜¯æ•¸å­—ï¼š</p>
<pre class="prettyprint"><code lang="golang">package main

import (
    "fmt"
    "unicode"
)

func allNumbers(s string) bool {
    for _, r := range []rune(s) {
        if !unicode.Is(unicode.Number, r) {
            return false
        }
    }
    return true
}

func main() {
    // true
    fmt.Println(allNumbers("Â²Â³Â¹Â¼Â½Â¾ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼ã‰›ã‰œã‰â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«â…¬â…­â…®â…¯â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸â…¹â…ºâ…»â…¼â…½â…¾â…¿"))
}
</code></pre>
<p>Unicode å°‡å¸Œè‡˜æ–‡ã€æ¼¢å­—ç­‰ä»¥<a href="https://en.wikipedia.org/wiki/Script_(Unicode)">æ–‡å­—ï¼ˆScriptï¼‰</a>ç‰¹æ€§æ¨™ç¤ºï¼Œåœ¨ Go çš„ <a href="https://golang.org/pkg/unicode/#pkg-variables">unicode å¥—ä»¶æ–‡ä»¶çš„ Variables</a> ç¬¬äºŒçµ„åˆ—å‡ºçš„è®Šæ•¸æ¸…å–®ï¼Œå°±æ˜¯å°æ‡‰çš„ <code>RangeTable</code>ï¼Œä¾‹å¦‚ <code>unicode.Han</code> æ˜¯æ­£é«”ä¸­æ–‡ã€ç°¡é«”ä¸­æ–‡ï¼Œä»¥åŠæ—¥ã€éŸ“ã€è¶Šå—æ–‡çš„å…¨éƒ¨æ¼¢å­—ç¯„åœã€‚</p>
<p>å¦å¤–é‚„æœ‰ä¸€äº›å…¶ä»–ç‰¹æ€§ï¼Œåˆ—åœ¨ Go çš„ <a href="https://golang.org/pkg/unicode/#pkg-variables">unicode å¥—ä»¶æ–‡ä»¶çš„ Variables</a> ç¬¬ä¸‰çµ„è®Šæ•¸æ¸…å–®ï¼Œä¾‹å¦‚ <code>unicode.White_Space</code> ä»£è¡¨è¢«æ¨™ç¤ºç‚ºç©ºç™½ç‰¹æ€§çš„ç¢¼é»ï¼Œé€™åŒ…æ‹¬äº†åŠå½¢ã€å…¨å½¢ã€Tab ç­‰ã€‚</p>
<p>å¦‚æœæƒ³è¦ä½¿ç”¨å¤šå€‹ RangeTableï¼Œ<code>å¯ä»¥é€é IsOneOf</code>ï¼š</p>
<pre class="prettyprint"><code lang="golang">func IsOneOf(ranges []*RangeTable, r rune) bool
</code></pre>
<p><code>unicode</code> ä¹Ÿæä¾›äº†ä¸€äº›å¸¸ç”¨çš„åˆ¤æ–·å‡½å¼ï¼š</p>
<pre class="prettyprint"><code lang="golang">func IsControl(r rune) bool
func IsDigit(r rune) bool
func IsGraphic(r rune) bool
func IsLetter(r rune) bool
func IsLower(r rune) bool
func IsMark(r rune) bool
func IsNumber(r rune) bool
func IsPrint(r rune) bool
func IsPunct(r rune) bool
func IsSpace(r rune) bool
func IsSymbol(r rune) bool
func IsTitle(r rune) bool
func IsUpper(r rune) bool
</code></pre>
<p>åœ¨å¤§å°å¯«æˆ–ç‰¹å®šè½‰æ›ä¸Šï¼Œæœ‰ä»¥ä¸‹çš„å‡½å¼ï¼š</p>
<pre class="prettyprint"><code lang="golang">func To(_case int, r rune) rune
func ToLower(r rune) rune
func ToTitle(r rune) rune
func ToUpper(r rune) rune
</code></pre>
<p>åŸºæœ¬ä¸Šï¼Œé€™å¯ä»¥æ‡‰ä»˜å¤§å¤šæ•¸èªè¨€çš„è½‰æ›ï¼Œåƒæ˜¯å…¨å½¢å­—æ¯çš„å¤§å°å¯«æˆ–é¦–å­—æ¯å¤§å¯«ç­‰ï¼Œ<code>To</code> å¯ä½¿ç”¨çš„å¸¸æ•¸æœ‰ï¼š</p>
<pre class="prettyprint"><code lang="golang">const (
    UpperCase = iota
    LowerCase
    TitleCase
    MaxCase
)
</code></pre>
<p>ä¾‹å¦‚ï¼Œ<code>unicode.To(unicode.UpperCase, rune('ï½'))</code> å¯ä»¥å¾—åˆ° <code>'ï¼¡'</code>ã€‚</p>
<h1>unicode/utf8ã€unicode/utf16 å¥—ä»¶</h1>
<p><code>unicode/utf8</code> å¥—ä»¶æä¾›çš„å‡½å¼ï¼Œä¸»è¦æ˜¯é€²è¡Œ <code>rune</code> èˆ‡ UTF-8 ç·¨ç¢¼ä¹‹é–“çš„è™•ç†ã€‚ä¾‹å¦‚é©—è­‰æ˜¯å¦ç‚ºåˆæ³•çš„ UTF-8 <code>[]byte</code> æˆ–å­—ä¸²ï¼š</p>
<pre class="prettyprint"><code lang="golang">func Valid(p []byte) bool
func ValidString(s string) bool
</code></pre>
<p>é©—è­‰ <code>rune</code> å¯å¦ç·¨ç¢¼ç‚º UTF-8ï¼š</p>
<pre class="prettyprint"><code lang="golang">func ValidRune(r rune) bool
</code></pre>
<p>åœ¨ <code>rune</code> èˆ‡ UTF-8 ç·¨ç¢¼ä¹‹é–“è½‰æ›ï¼š</p>
<pre class="prettyprint"><code lang="golang">func DecodeLastRune(p []byte) (r rune, size int)
func DecodeLastRuneInString(s string) (r rune, size int)
func DecodeRune(p []byte) (r rune, size int)
func DecodeRuneInString(s string) (r rune, size int)
func EncodeRune(p []byte, r rune) int
</code></pre>
<p><code>unicode/utf16</code> ä¸»è¦æ˜¯é€²è¡Œ <code>rune</code> èˆ‡ UTF-16 ç·¨ç¢¼ä¹‹é–“çš„è™•ç†ï¼Œåªä¸éç›®å‰å‡½å¼åªæœ‰å¹¾å€‹ï¼š</p>
<pre class="prettyprint"><code lang="golang">func Decode(s []uint16) []rune
func DecodeRune(r1, r2 rune) rune
func Encode(s []rune) []uint16
func EncodeRune(r rune) (r1, r2 rune)
func IsSurrogate(r rune) bool
</code></pre>
<p>UTF-8 ç·¨ç¢¼ä¸‹ï¼Œç¢¼å…ƒï¼ˆcode unitï¼‰æ˜¯ 8 å€‹ä½å…ƒï¼ŒGo ä¸­ä½¿ç”¨ <code>byte</code> ä¹Ÿå°±æ˜¯ <code>uint8</code> ä¾†å„²å­˜ï¼ŒUTF-16 ç·¨ç¢¼ä¸‹ï¼Œç¢¼å…ƒï¼ˆcode unitï¼‰æ˜¯ 16 å€‹ä½å…ƒï¼ŒGo ä¸­ä½¿ç”¨ <code>uint16</code> ä¾†å„²å­˜ã€‚</p>
<p>ä¾†çœ‹å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œä½¿ç”¨ <code>unicode/utf8</code> èˆ‡ <code>unicode/utf16</code> å¥—ä»¶ä¾†é¡¯ç¤ºã€ŒHello, ä¸–ç•Œã€çš„ UTF-16 ç¢¼å…ƒï¼š</p>
<pre class="prettyprint"><code lang="golang">package main

import (
    "fmt"
    "unicode/utf8"
    "unicode/utf16"
)

func main() {    
    b := []byte("Hello, ä¸–ç•Œ")

    for len(b) &gt; 0 {
        r, size := utf8.DecodeRune(b)
        u16 := utf16.Encode([]rune{r})
        fmt.Printf("%#U:\n  Code unit %04X\n", r, u16)
        b = b[size:]
    }
}
</code></pre>
<p>é¡¯ç¤ºçµæœå¦‚ä¸‹ï¼š</p>
<pre class="prettyprint"><code lang="golang">U+0048 'H':       
  Code unit [0048]
U+0065 'e':       
  Code unit [0065]
U+006C 'l':       
  Code unit [006C]
U+006C 'l':       
  Code unit [006C]
U+006F 'o':
  Code unit [006F]
U+002C ',':
  Code unit [002C]
U+0020 ' ':
  Code unit [0020]
U+4E16 'ä¸–':
  Code unit [4E16]
U+754C 'ç•Œ':
  Code unit [754C]
</code></pre>
<p>Unicode ç¢¼é»è™Ÿç¢¼èˆ‡ç¢¼å…ƒé¡¯ç¤ºå‰›å¥½ä¸€æ¨£å°å§ï¼Ÿé€™å°±æ˜¯ç‚ºä»€éº¼å¸¸æœ‰äººæœƒäº‚èªªã€ŒUnicode ä½¿ç”¨ 16 ä½å…ƒå„²å­˜ã€çš„åŸå› ä¹‹ä¸€å§ï¼â€¦ XD</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 æ–°ç‰ˆå‹å»£å‘Š 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- è‡ªå‹•å¤§å°å›æ‡‰ç›¸ç¬¦å…§å®¹ --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
