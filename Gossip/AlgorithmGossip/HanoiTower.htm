<!DOCTYPE html>
<html lang="zh-tw">
  <head><meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/AlgorithmGossip/'https://openhome.cc/zh-tw/algorithm/basics/hanoi-tower/'">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="&nbsp;說明
      河內之塔(Towers ofHanoi)是法國人M.Claus(Lucas)於1883年從泰國帶至法國的，河內為越戰時北越的首都，即現在的胡志明市；1883年法國數...">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="河內塔">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/AlgorithmGossip/HanoiTower.htm">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="&nbsp;說明
      河內之塔(Towers ofHanoi)是法國人M.Claus(Lucas)於1883年從泰國帶至法國的，河內為越戰時北越的首都，即現在的胡志明市；1883年法國數...">
    <title>河內塔</title>
    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="../css/caterpillar.css">
    <script async="" src="../google-code-prettify/run_prettify.js"></script>
    <!-- 網頁層級廣告 -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script>
  </head>
  <body>
    <div id="layout">
      <!-- Menu toggle --> <a href="HanoiTower.htm#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span> </a>
      <div id="menu">
        <div class="pure-menu"> <a class="pure-menu-heading" href="index.html">回
            Algorithm</a>
          <ul class="pure-menu-list">
            <br>
            <div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img
                  title="Twitter" alt="Twitter" src="../images/twitter.png"></a>
              <a href="http://www.facebook.com/openhome.cc"><img title="Facebook"
                  alt="Facebook" src="../images/facebook.png"></a>
              </div>
            <br>
            <div id="search box">
              <script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div>
            <br>
            <div class="ad" style="text-align: center;">
              <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
              <!-- 2015 新版型 160 x 600 廣告 --> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px"
                data-ad-client="ca-pub-9750319131714390" data-ad-slot="3747048883"></ins>
              <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
          </ul>
        </div>
      </div>
      <main id="main">
        <header class="header">
          <h1>河內塔</h1>
        </header>
        <article class="content"><br>
          <div class="ad-3" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="7104125683" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <h2>&nbsp;說明</h2>
          河內之塔(Towers of
          Hanoi)是法國人M.Claus(Lucas)於1883年從泰國帶至法國的，河內為越戰時北越的首都，即現在的胡志明市；1883年法國數學家
          Edouard
          Lucas曾提及這個故事，據說創世紀時Benares有一座波羅教塔，是由三支鑽石棒（Pag）所支撐，開始時神在第一根棒上放置64個由上至下依
          由小
          至大排列的金盤（Disc），並命令僧侶將所有的金盤從第一根石棒移至第三根石棒，且搬運過程中遵守大盤子在小盤子之下的原則，若每日僅搬一個盤子，
          則當 盤子全數搬運完畢之時，此塔將毀損，而也就是世界末日來臨之時。<br>
          <h2>解法</h2>
          如果柱子標為ABC，要由A搬至C，在只有一個盤子時，就將它直接搬至C，當有兩個盤子，就將B當作輔助柱。 <br>
          <div style="text-align: center;">
            <div class="pure-g">
              <div class="pure-u-1"><img class="pure-img-responsive" alt="河內塔" title="河內塔"
                  src="images/hanoi-1.jpg"></div>
            </div>
            &nbsp;
            <div class="pure-g">
              <div class="pure-u-1"><img class="pure-img-responsive" alt="河內塔" title="河內塔"
                  src="images/hanoi-2.jpg"></div>
            </div>
            &nbsp;
            <div class="pure-g">
              <div class="pure-u-1"><img class="pure-img-responsive" alt="河內塔" title="河內塔"
                  src="images/hanoi-3.jpg"></div>
            </div>
            <br>
          </div>
          <br>
          如果盤數超過2個，將第三個以下的盤子遮起來，就很簡單了，每次處理兩個盤子，也就是：A-&gt;B、A
          -&gt;C、B-&gt;C這三個步驟，而被遮住的部份，其實就是進入程式的遞迴處理。<br>
          <div style="text-align: center;">
            <div class="pure-g">
              <div class="pure-u-1"><img class="pure-img-responsive" alt="河內塔" title="河內塔"
                  src="images/hanoi-4.jpg"></div>
            </div>
            <br>
            <br>
            <div style="text-align: left;">事實上，若有n個盤子，則移動完畢所需之次數為2^n -
              1，所以當盤數為64時，則所需次數為：<br>
              <br>
              2<sup>64</sup>- 1 = 18446744073709551615<br>
              <br>
              每天搬一個盤子，需要約505390248594782世紀，就算每秒鐘搬一個盤子，也要約5850億年左右。 &nbsp;</div>
          </div>
          <h2> 演算法</h2>
          <pre class="prettyprint"><code>Procedure HANOI(n, A, B, C) <br>    IF(n == 1) <br>        PRINT("Move sheet " n " from " A " to " C)<br>    ELSE <br>        HANOI(n-1, A, C, B)<br>        HANOI(1, A, B, C)<br>        HANOI(n-1, B, A, C) <br></code></pre>
          <h2> 實作：<a href="HanoiTower.htm#Toy">Toy</a>&nbsp;&nbsp; <a href="HanoiTower.htm#C">C</a>&nbsp;&nbsp;
            <a href="HanoiTower.htm#Java">&nbsp;Java</a>&nbsp;&nbsp; &nbsp;<a href="HanoiTower.htm#Python">Python</a>&nbsp;&nbsp;
            &nbsp;<a href="HanoiTower.htm#Scala">Scala</a>&nbsp;&nbsp;&nbsp; <a href="HanoiTower.htm#Ruby">Ruby</a>&nbsp;&nbsp;&nbsp;
            <a href="HanoiTower.htm#JavaScript">JavaScript</a> &nbsp;&nbsp; <a href="HanoiTower.htm#Haskell">Haskell</a>&nbsp;&nbsp;&nbsp;
            <a href="HanoiTower.htm#Prolog">Prolog</a><br>
          </h2>
          <ul>
          </ul>
          <ul>
            <li><a name="Toy"></a><a href="../Toy/index.html">Toy</a>
            </li>
          </ul>
          <pre class="prettyprint"><code>def hanoi(n, a, b, c) {
    if n == 1 {
        println('Move sheet from {0} to {1}'.format(a , c))
    } 
    else {
        hanoi(n - 1, a, c, b)
        hanoi(1, a, b, c)
        hanoi(n - 1, b, a, c) 
    }
}

hanoi(3, 'A', 'B', 'C')</code></pre>
          <ul>
          </ul>
          <p><br>
          </p>
          <ul>
            <li><a name="C">C</a> </li>
          </ul>
          <pre class="prettyprint"><code>#include &lt;stdio.h&gt;<br><br>void hanoi(int n, char A, char B, char C) {<br>    if(n == 1) {<br>        printf("Move sheet from %c to %c\n", A, C);<br>    }<br>    else {<br>        hanoi(n-1, A, C, B);<br>        hanoi(1, A, B, C);<br>        hanoi(n-1, B, A, C);<br>    }<br>}<br><br>int main() {<br>    int n;<br>    printf("請輸入盤數：");<br>    scanf("%d", &amp;n);<br>    hanoi(n, 'A', 'B', 'C');<br>    return 0;<br>} <br></code></pre>
          <br>
          <ul>
            <li><a name="Java">Java</a> </li>
          </ul>
          <pre class="prettyprint"><code>import java.util.*;<br>import static java.lang.System.out;<br><br>public class Hanoi {<br>    static class Move {<br>        char from, to;<br>        Move(char from, char to) {<br>            this.from = from;<br>            this.to = to;<br>        }<br>    }<br>	<br>    List&lt;Move&gt; solve(int n) {<br>        moves = new ArrayList&lt;Move&gt;();<br>        move(n, 'A', 'B', 'C');<br>        return moves;<br>    }<br><br>    private List&lt;Move&gt; moves;<br>	<br>    private void move(int n, char a, char b, char c) {<br>        if(n == 1) {<br>            moves.add(new Move(a, c));<br>        } else {<br>            move(n - 1, a, c, b); <br>            move(1, a, b, c); <br>            move(n - 1, b, a, c);<br>        }<br>    }<br>    <br>    public static void main(String args[]) {<br>        out.print("請輸入盤數：");<br>        Hanoi hanoi = new Hanoi();<br>        int n = new Scanner(System.in).nextInt();<br>        for(Move move : hanoi.solve(n)) {<br>            out.printf("盤由 %c 移至 %c%n", move.from, move.to);<br>        }<br>    }<br>}   </code></pre>
          <br>
          <ul>
            <li><a name="Python"></a>Python</li>
          </ul>
          <pre class="prettyprint"><code>def hanoi(n, A, B, C):<br>    if n == 1:<br>        return [(A, C)]<br>    else:<br>        return hanoi(n-1, A, C, B) + hanoi(1, A, B, C) + hanoi(n-1, B, A, C)<br><br>n = input("請輸入整數：")<br>for move in hanoi(int(n), 'A', 'B', 'C'):<br>    print("盤由 %c 移至 %c" % move)</code></pre>
          <br>
          <ul>
            <li><a name="Scala">Scala</a></li>
          </ul>
          <pre class="prettyprint"><code>def hanoi(n: Int, a: Char, b: Char, c: Char) : List[(Char, Char)] = {<br>    if (n == 1) List((a, c))<br>    else hanoi(n - 1, a, c, b) ++ hanoi(1, a, b, c) ++ hanoi(n - 1, b, a, c)<br>}<br><br>print("請輸入整數：")<br>hanoi(readInt, 'A', 'B', 'C').foreach(_ match {<br>    case (from, to) =&gt; printf("盤由 %c 移到 %c%n", from, to)<br>})</code></pre>
          <span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br>
          </span>
          <ul>
            <li><a name="Ruby">Ruby</a></li>
          </ul>
          <pre class="prettyprint"><code># encoding: Big5<br>def hanoi(n, a, b, c)<br>    if n == 1<br>        [{from: a, to: c}]<br>    else<br>        hanoi(n - 1, a, c, b) + hanoi(1, a, b, c) + hanoi(n - 1, b, a, c)<br>    end<br>end<br><br>print "請輸入整數："<br>hanoi(gets.to_i, "A", "B", "C").each do |move|<br>    print "盤子從 #{move[:from]} 移動至 #{move[:to]}\n"<br>end<br></code></pre>
          <br>
          <ul>
            <li><a name="JavaScript">JavaScript</a></li>
          </ul>
          <pre class="prettyprint"><code>function hanoi(n , a, b, c) {<br>    if(n === 1) {<br>        return [{from : a, to : c }]<br>    }<br>    return hanoi(n - 1, a, c, b).concat(<br>           hanoi(1, a, b, c), <br>           hanoi(n - 1, b, a, c)<br>    );<br>}<br>    <br>hanoi(3, 'A', 'B', 'C').forEach(function(move) {<br>    print('盤從 ' + move.from + ' 移至 ' + move.to);<br>});<br></code></pre>
          <br>
          <ul>
            <li><a name="Haskell">Haskell</a><br>
            </li>
          </ul>
          <pre class="prettyprint"><code>import Text.Printf<br><br>hanoi 1 a _ c = [(a, c)]<br>hanoi n a b c = hanoi (n - 1) a c b ++ hanoi 1 a b c ++ hanoi (n - 1) b a c<br><br>main = do <br>  putStrLn "Please enter a number: "<br>  n &lt;- getLine<br>  sequence [printf "Move from %c to %c\n" from to <br>               | (from, to) &lt;- hanoi (read n) 'A' 'B' 'C']<br></code></pre>
          <p><br>
          </p>
          <ul>
            <li><a id="Prolog">Prolog</a></li>
          </ul>
          <pre class="prettyprint"><code>hanoi(1, A, _, C, [[A, C]]).
hanoi(N, A, B, C, Result) :- NP is N - 1,
                             hanoi(NP, A, C, B, R1),
                             hanoi(1, A, B, C, R2),
                             hanoi(NP, B, A, C, R3),
                             append([R1, R2, R3], Result).

show([]) :- nl.
show([H|R]) :- writef("Move from %n to %n\n", H), show(R).
                 
main([Arg0|_]) :-
        atom_number(Arg0, N),
        hanoi(N, a, b, c, Result),
        show(Result).<br></code></pre>
          <p><br>
          </p>
          <br>
          <br>
          <div class="ad336-280" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins
              class="adsbygoogle" style="display:inline-block;width:336px;height:280px"
              data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <div class="recommend" style="text-align: center;">
            <hr>
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
      </main>
    </div>
    <script src="../js/ui.js"></script>
    <div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
  </body>
</html>
