<!DOCTYPE html>
<html lang="zh-tw">
  <head><meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/AlgorithmGossip/'https://openhome.cc/zh-tw/algorithm/basics/maze/'">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="&nbsp;說明
      由於迷宮的設計，老鼠走迷宮的入口至出口路徑可能不只一條，如何求出所有的路徑呢？            解法      求...">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="老鼠走迷宮（二）">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/AlgorithmGossip/MouseGoMaze2.htm">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="&nbsp;說明
      由於迷宮的設計，老鼠走迷宮的入口至出口路徑可能不只一條，如何求出所有的路徑呢？            解法      求...">
    <title>老鼠走迷宮（二）</title>
    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="../css/caterpillar.css">
    <script async="" src="../google-code-prettify/run_prettify.js"></script>
  <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
  <body>
    <div id="layout">
      <!-- Menu toggle --> <a href="MouseGoMaze2.htm#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon --><span></span> </a>
      <div id="menu">
        <div class="pure-menu"> <a class="pure-menu-heading" href="index.html">回
            Algorithm</a>
          <ul class="pure-menu-list">
            <br>
            <div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img
                  title="Twitter" alt="Twitter" src="../images/twitter.png"></a>
              <a href="http://www.facebook.com/openhome.cc"><img title="Facebook"
                  alt="Facebook" src="../images/facebook.png"></a>
              </div>
            <br>
            <div id="search box">
              <script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div>
            <br>
            <div class="ad" style="text-align: center;">
              <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
              <!-- 2015 新版型 160 x 600 廣告 --> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px"
                data-ad-client="ca-pub-9750319131714390" data-ad-slot="3747048883"></ins>
              <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
          </ul>
        </div>
      </div>
      <main id="main">
        <header class="header">
          <h1>老鼠走迷宮（二）</h1>
        </header>
        <article class="content"><br>
          <div class="ad-3" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="7104125683" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <h2>&nbsp;說明</h2>
          由於迷宮的設計，老鼠走迷宮的入口至出口路徑可能不只一條，如何求出所有的路徑呢？<br>
          <h2>解法</h2>
          求所有路徑看起來複雜但其實更簡單，只要在老鼠走至出口時顯示經過的路徑，然後退回上一格重新選擇下一個位置繼續遞迴就可以了，比求出單一路徑還簡
          單，我們的程式只要作一點修改就可以了。 <br>
          <h2> 演算法</h2>
          <pre class="prettyprint"><code>Procedure GO(maze[])<br>    VISIT(maze, START_I, START_J, END_I, END_J)<br>    <br>Procedure VISIT(maze[], i, j, end_i, end_j)<br>    IF maze[i][j] == 0<br>        maze[i][j] = 1<br>        IF maze[end_i][end_j] == 1<br>            PRINT maze<br>        ELSE<br>            VISIT(maze, i, j + 1, end_i, end_j)<br>            VISIT(maze, i + 1, j, end_i, end_j)<br>            VISIT(maze, i, j - 1, end_i, end_j)<br>            VISIT(maze, i - 1, j, end_i, end_j)<br>        maze[i][j] = 0<br></code></pre>
          <h2> 實作：<a href="MouseGoMaze2.htm#Toy">Toy</a>&nbsp;&nbsp; &nbsp;<a href="MouseGoMaze2.htm#C">C</a>&nbsp;&nbsp; &nbsp;<a href="MouseGoMaze2.htm#Java">Java</a>&nbsp;&nbsp;
            &nbsp;<a href="MouseGoMaze2.htm#Python">Python</a>&nbsp;&nbsp; &nbsp;<a href="MouseGoMaze2.htm#Scala">Scala</a>&nbsp;&nbsp;&nbsp;
            <a href="MouseGoMaze2.htm#Ruby">Ruby</a>&nbsp;&nbsp;&nbsp; <a href="MouseGoMaze2.htm#JavaScript">JavaScript</a>&nbsp;&nbsp;&nbsp;
            <a href="MouseGoMaze2.htm#Haskell">Haskell</a>&nbsp;&nbsp;&nbsp; <a href="MouseGoMaze2.htm#Prolog">Prolog</a><br>
          </h2>
          <ul>
            <li><a name="Toy"><a href="../Toy/index.html">Toy</a></a>  </li>
          </ul>
          <pre class="prettyprint"><code>def pt(x, y) {
    return new Object([['x', x], ['y', y]])
}

class Maze {
    def init(raw) {
        this.raw = raw
    }
 
    def get(x, y) {
        return this.raw.get(x).get(y)
    }

    def set(x, y, v) {
        this.raw.get(x).set(y, v)
    }

    def goalOrTry(st, ed) {
        if this.get(ed.x, ed.y) {
            this.print()
        }
        else {
            this.visit(pt(st.x, st.y + 1), ed)
            this.visit(pt(st.x + 1, st.y), ed) 
            this.visit(pt(st.x, st.y - 1), ed) 
            this.visit(pt(st.x - 1, st.y), ed)
        }
    }

    def visit(st, ed) {
        if not this.get(st.x, st.y) {
            this.set(st.x, st.y, 1)
            this.goalOrTry(st, ed)
            this.set(st.x, st.y, 0)
        }
    }

    def printSymbol(i, j) {
        switch this.get(i, j) {
            case 0 
                print('  ')
            case 1
                print('++')
            case 2
                print('██') 
        }
    }

    def printRow(i) {
        (iterate(0, this.raw.get(i).length())
              .forEach(j -> this.printSymbol(i, j)))
        println()
    }

    def print() {
        iterate(0, this.raw.length()).forEach(this.printRow)
    }
}

(maze = new Maze([
           [2, 2, 2, 2, 2, 2, 2, 2, 2],
           [2, 0, 0, 0, 0, 0, 0, 0, 2],
           [2, 0, 2, 2, 0, 2, 2, 0, 2],
           [2, 0, 2, 0, 0, 2, 0, 0, 2],
           [2, 0, 2, 0, 2, 0, 2, 0, 2],
           [2, 0, 0, 0, 0, 0, 2, 0, 2],
           [2, 2, 0, 2, 2, 0, 2, 2, 2],
           [2, 0, 0, 0, 0, 0, 0, 0, 2],
           [2, 2, 2, 2, 2, 2, 2, 2, 2]
         ]))

maze.visit(pt(1, 1), pt(7, 7))</code></pre>
          <br>
          <ul>
            <li><a name="C">C</a>  </li>
          </ul>
          <pre class="prettyprint"><code>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#define SIZE 9<br><br>typedef struct {<br>    int x; <br>    int y;<br>} Point;<br><br>Point pt(int, int);<br>void visit(int[][SIZE], Point, Point, void (*)(int[][SIZE]));<br>void print(int[][SIZE]);<br><br>int main(void) { <br>    int maze[SIZE][SIZE] = {{2, 2, 2, 2, 2, 2, 2, 2, 2},<br>                            {2, 0, 0, 0, 0, 0, 0, 0, 2},<br>                            {2, 0, 2, 2, 0, 2, 2, 0, 2},<br>                            {2, 0, 2, 0, 0, 2, 0, 0, 2},<br>                            {2, 0, 2, 0, 2, 0, 2, 0, 2},<br>                            {2, 0, 0, 0, 0, 0, 2, 0, 2},<br>                            {2, 2, 0, 2, 2, 0, 2, 2, 2},<br>                            {2, 0, 0, 0, 0, 0, 0, 0, 2},<br>                            {2, 2, 2, 2, 2, 2, 2, 2, 2}}; <br><br>    visit(maze, pt(1, 1), pt(7, 7), print);<br><br>    return 0; <br>}<br><br>Point pt(int x, int y) {<br>    Point p = {x, y};<br>    return p;<br>}<br><br>void visit(int maze[][SIZE], Point start, <br>           Point end, void (*take)(int[][SIZE])) {<br>    if(!maze[start.x][start.y]) {<br>         maze[start.x][start.y] = 1;<br>         if(maze[end.x][end.y]) {<br>             take(maze);<br>         }<br>         else {<br>             visit(maze, pt(start.x, start.y + 1), end, take);<br>             visit(maze, pt(start.x + 1, start.y), end, take);<br>             visit(maze, pt(start.x, start.y - 1), end, take);<br>             visit(maze, pt(start.x - 1, start.y), end, take);<br>         }<br>         maze[start.x][start.y] = 0;<br>    }<br>}<br><br>void print(int maze[][SIZE]) {<br>    int i, j;<br>    for(i = 0; i &lt; SIZE; i++) { <br>        for(j = 0; j &lt; SIZE; j++) switch(maze[i][j]) {<br>            case 0 : printf("  "); break;<br>            case 1 : printf("◇"); break;<br>            case 2 : printf("█"); <br>        }<br>        printf("\n"); <br>    }     <br>}<br></code></pre>
          <br>
          <ul>
            <li><a name="Java">Java</a>  </li>
          </ul>
          <pre class="prettyprint"><code>import static java.lang.System.out;<br><br>class Point {<br>    final int x;<br>    final int y;<br>    Point(int x, int y) {<br>        this.x = x;<br>        this.y = y;<br>    }<br>}<br><br>interface Boss {<br>    void take(int[][] maze);<br>}<br><br>public class Mouse {    <br>    public static void visit(int[][] maze, Point pt, Point end, Boss boss) {<br>        if(isVisitable(maze, pt)) {<br>            maze[pt.x][pt.y] = 1;<br>            if(isEnd(maze, end)) {<br>                boss.take(maze);<br>            } else {<br>                visit(maze, new Point(pt.x, pt.y + 1), end, boss);<br>                visit(maze, new Point(pt.x + 1, pt.y), end, boss);<br>                visit(maze, new Point(pt.x, pt.y - 1), end, boss);<br>                visit(maze, new Point(pt.x - 1, pt.y), end, boss);<br>            }<br>            maze[pt.x][pt.y] = 0;<br>        }<br>    }<br><br>    private static boolean isVisitable(int[][] maze, Point pt) {<br>        return maze[pt.x][pt.y] == 0;<br>    }<br>    <br>    public static boolean isEnd(int[][] maze, Point end) {<br>        return maze[end.x][end.y] == 1;<br>    }<br>    <br>    public static void main(String[] args) {<br>    <br>        Mouse.visit(new int[][] {<br>        <br>            {2, 2, 2, 2, 2, 2, 2, 2, 2},<br>            {2, 0, 0, 0, 0, 0, 0, 0, 2},<br>            {2, 0, 2, 2, 0, 2, 2, 0, 2},<br>            {2, 0, 2, 0, 0, 2, 0, 0, 2},<br>            {2, 0, 2, 0, 2, 0, 2, 0, 2},<br>            {2, 0, 0, 0, 0, 0, 2, 0, 2},<br>            {2, 2, 0, 2, 2, 0, 2, 2, 2},<br>            {2, 0, 0, 0, 0, 0, 0, 0, 2},<br>            {2, 2, 2, 2, 2, 2, 2, 2, 2}},<br>                        <br>            new Point(1, 1), new Point(7, 7), <br><br>            // JDK8 Lambda<br>            maze -&gt; {<br>                for(int[] row : maze) {<br>                    for(int block : row) switch(block) {<br>                        case 0: out.print("  "); break;<br>                        case 1: out.print("◇"); break;<br>                        case 2: out.print("█");<br>                    }<br>                    out.println();<br>                }<br>            }<br>        );<br>    }<br>} <br></code></pre>
          <br>
          <ul>
            <li><a name="Python">Python</a></li>
          </ul>
          <pre class="prettyprint"><code>class Mouse:<br>    @staticmethod<br>    def go(maze, start, end, take):<br>        Mouse.visit(maze, start, end, [], take)<br>    <br>    @staticmethod<br>    def visit(maze, pt, end, route, take):<br>        if Mouse.isVisitable(maze, pt, route):<br>            route.append(pt)<br>            if Mouse.isEnd(route, end):<br>                take(maze, route)<br>            else:<br>                Mouse.visit(maze, (pt[0], pt[1] + 1), end, route, take)<br>                Mouse.visit(maze, (pt[0] + 1, pt[1]), end, route, take)<br>                Mouse.visit(maze, (pt[0], pt[1] - 1), end, route, take)<br>                Mouse.visit(maze, (pt[0] - 1, pt[1]), end, route, take)<br>            route.pop()<br>    <br>    @staticmethod<br>    def isVisitable(maze, pt, route):<br>        return maze[pt[0]][pt[1]] == 0 and pt not in route<br>        <br>    @staticmethod<br>    def isEnd(route, end):<br>        return end in route<br><br>def console(maze, route):<br>    for i in range(len(maze)):<br>        for j in range(len(maze[i])):<br>            if (i, j) in route:<br>                print("◇", end="")<br>            else:<br>                {<br>                    0 : lambda: print("  ", end=""),<br>                    2 : lambda: print("█",end="")<br>                }[maze[i][j]]()<br>        print()<br>   <br>Mouse.go([<br>           [2, 2, 2, 2, 2, 2, 2, 2, 2],<br>           [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>           [2, 0, 2, 2, 0, 2, 2, 0, 2],<br>           [2, 0, 2, 0, 0, 2, 0, 0, 2],<br>           [2, 0, 2, 0, 2, 0, 2, 0, 2],<br>           [2, 0, 0, 0, 0, 0, 2, 0, 2],<br>           [2, 2, 0, 2, 2, 0, 2, 2, 2],<br>           [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>           [2, 2, 2, 2, 2, 2, 2, 2, 2]<br>         ], (1, 1), (7, 7), console)</code></pre>
          <br>
          <ul>
            <li><a name="Scala">Scala</a></li>
          </ul>
          <pre class="prettyprint"><code>case class Point(x: Int, y: Int)<br><br>object Mouse {<br>    def go(maze: List[List[Int]], start: Point, end: Point) = {<br>        visit(maze, start, end, Nil)<br>    }<br>    <br>    def visit(maze: List[List[Int]], pt: Point, <br>              end: Point, route: List[Point]): List[List[Point]] = {<br>        if(isVisitable(maze, pt, route)) {<br>            if(isEnd(pt, end)) {<br>                (end::route)::Nil <br>            } else {<br>                visit(maze, Point(pt.x, pt.y + 1), end, pt::route) ++<br>                visit(maze, Point(pt.x + 1, pt.y), end, pt::route) ++<br>                visit(maze, Point(pt.x, pt.y - 1), end, pt::route) ++<br>                visit(maze, Point(pt.x - 1, pt.y), end, pt::route)<br>            }<br>        } else {<br>            Nil<br>        }<br>    }<br>    <br>    def isVisitable(maze: List[List[Int]], pt: Point, route: List[Point]) = {<br>        maze(pt.x)(pt.y) == 0 &amp;&amp; !route.contains(pt)<br>    }<br>    <br>    def isEnd(pt: Point, end: Point) = {<br>        pt == end<br>    }<br>}<br><br>val maze = List(<br>                List(2, 2, 2, 2, 2, 2, 2, 2, 2),<br>                List(2, 0, 0, 0, 0, 0, 0, 0, 2),<br>                List(2, 0, 2, 2, 0, 2, 2, 0, 2),<br>                List(2, 0, 2, 0, 0, 2, 0, 0, 2),<br>                List(2, 0, 2, 0, 2, 0, 2, 0, 2),<br>                List(2, 0, 0, 0, 0, 0, 2, 0, 2),<br>                List(2, 2, 0, 2, 2, 0, 2, 2, 2),<br>                List(2, 0, 0, 0, 0, 0, 0, 0, 2),<br>                List(2, 2, 2, 2, 2, 2, 2, 2, 2)<br>            )<br><br>val allRoute = Mouse.go(maze, Point(1, 1), Point(7, 7))<br><br>allRoute.foreach( route =&gt;<br>    for(i &lt;- 0 until maze.length) {<br>        for(j &lt;- 0 until maze(i).length) {<br>            if(route.contains(Point(i, j))) {<br>                print("◇")<br>            } else {<br>                maze(i)(j) match {<br>                    case 0 =&gt; print("  ")<br>                    case 2 =&gt; print("█")<br>                }<br>            }<br>        }<br>        println()<br>    }<br>)<br></code></pre>
          <br>
          <ul>
            <li><a name="Ruby">Ruby</a></li>
          </ul>
          <pre class="prettyprint"><code>#encoding: Big5<br>class Mouse<br>    def self.go(maze, start, goal)<br>        visit(maze, start, goal, [], -&gt;(m, r) { yield(m, r) })<br>    end<br>    <br>    def self.visit(maze, pt, goal, route, take)<br>        if isVisitable(maze, pt, route)<br>            route &lt;&lt; pt<br>            if isGoal(route, goal)<br>                take.call(maze, route)<br>            else<br>                visit(maze, {x: pt[:x], y: pt[:y] + 1}, goal, route, take)<br>                visit(maze, {x: pt[:x] + 1, y: pt[:y]}, goal, route, take)<br>                visit(maze, {x: pt[:x], y: pt[:y] - 1}, goal, route, take)<br>                visit(maze, {x: pt[:x] - 1, y: pt[:y]}, goal, route, take)<br>            end<br>            route.pop<br>        end<br>    end<br>    <br>    def self.isVisitable(maze, pt, route)<br>        maze[pt[:x]][pt[:y]] == 0 and not route.include? pt<br>    end<br>   <br>    def self.isGoal(route, goal)<br>        route.include? goal<br>    end<br>end<br><br>maze = [<br>           [2, 2, 2, 2, 2, 2, 2, 2, 2],<br>           [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>           [2, 0, 2, 2, 0, 2, 2, 0, 2],<br>           [2, 0, 2, 0, 0, 2, 0, 0, 2],<br>           [2, 0, 2, 0, 2, 0, 2, 0, 2],<br>           [2, 0, 0, 0, 0, 0, 2, 0, 2],<br>           [2, 2, 0, 2, 2, 0, 2, 2, 2],<br>           [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>           [2, 2, 2, 2, 2, 2, 2, 2, 2]<br>       ]<br><br>Mouse.go(maze, {x: 1, y: 1}, {x: 7, y: 7}) do |maze, route|<br>    0.upto(maze.size - 1) do |i|<br>        0.upto(maze[i].size - 1) do |j|<br>            if route.include?({x: i, y: j})<br>                print "◇"<br>            else<br>                case maze[i][j]<br>                    when 0 then print "  "<br>                    when 2 then print "█"<br>                end<br>            end<br>        end<br>        puts<br>    end<br>end<br></code></pre>
          <br>
          <ul>
            <li><a name="JavaScript">JavaScript</a></li>
          </ul>
          <pre class="prettyprint"><code>var mouse = function() {<br>    function isVisitable(maze, pt) {<br>        return maze[pt.x][pt.y] === 0;<br>    }<br>    <br>    function isEnd(maze, end) {<br>        return maze[end.x][end.y] === 1;<br>    }<br>    <br>    return function visit(maze, pt, end, take) {<br>        if(isVisitable(maze, pt)) {<br>            maze[pt.x][pt.y] = 1;<br>            if(isEnd(maze, end)) {<br>                take(maze);<br>            }<br>            else {<br>                visit(maze, {x: pt.x, y: pt.y + 1}, end, take);<br>                visit(maze, {x: pt.x + 1, y: pt.y}, end, take);<br>                visit(maze, {x: pt.x, y: pt.y - 1}, end, take);<br>                visit(maze, {x: pt.x - 1, y: pt.y}, end, take);<br>            }<br>            maze[pt.x][pt.y] = 0;<br>        }<br>    };<br>}();<br><br>mouse([[2, 2, 2, 2, 2, 2, 2, 2, 2],<br>       [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>       [2, 0, 2, 2, 0, 2, 2, 0, 2],<br>       [2, 0, 2, 0, 0, 2, 0, 0, 2],<br>       [2, 0, 2, 0, 2, 0, 2, 0, 2],<br>       [2, 0, 0, 0, 0, 0, 2, 0, 2],<br>       [2, 2, 0, 2, 2, 0, 2, 2, 2],<br>       [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>       [2, 2, 2, 2, 2, 2, 2, 2, 2]],<br>      {x: 1, y: 1}, {x: 7, y: 7},<br>      function(maze) {<br>          var layout = '';<br>          maze.forEach(function(row) {<br>              row.forEach(function(block) {<br>                  switch(block) {<br>                      case 0: layout += '  '; break;<br>                      case 1: layout += '◇'; break;<br>                      case 2: layout += '█';<br>                  }<br>             });<br>             layout += '\n';<br>          });<br>          print(layout);<br>      });<br></code></pre>
          <br>
          <ul>
            <li><a name="Haskell">Haskell</a></li>
          </ul>
          <pre class="prettyprint"><code>mouse maze start end = visit maze start end []<br>    where visit maze pt end route = <br>              if isVisitable maze pt route then <br>                  if isEnd pt end then (end:route):[]<br>                  else visit maze (fst pt, snd pt + 1) end (pt:route) ++<br>                       visit maze (fst pt + 1, snd pt) end (pt:route) ++<br>                       visit maze (fst pt, snd pt - 1) end (pt:route) ++<br>                       visit maze (fst pt - 1, snd pt) end (pt:route)<br>              else []<br>                                    <br>          isVisitable maze pt route = <br>              maze !! fst pt !! snd pt == 0 &amp;&amp; not (pt `elem` route)<br>              <br>          isEnd pt end = pt == end<br>          <br>         <br>main = sequence[<br>          sequence [putStrLn row | row &lt;- toSymbol maze route] <br>          | route &lt;- mouse maze start end]<br>          <br>    where maze = [[2, 2, 2, 2, 2, 2, 2, 2, 2],<br>                  [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>                  [2, 0, 2, 2, 0, 2, 2, 0, 2],<br>                  [2, 0, 2, 0, 0, 2, 0, 0, 2],<br>                  [2, 0, 2, 0, 2, 0, 2, 0, 2],<br>                  [2, 0, 0, 0, 0, 0, 2, 0, 2],<br>                  [2, 2, 0, 2, 2, 0, 2, 2, 2],<br>                  [2, 0, 0, 0, 0, 0, 0, 0, 2],<br>                  [2, 2, 2, 2, 2, 2, 2, 2, 2]]<br>              <br>          start = (1, 1)<br>          end = (7, 7)<br>          <br>          width = length maze<br>          height = length \$ maze !! 0<br>          <br>          toSymbol maze route = [[if (i, j) `elem` route then 'M' <br>                                  else case (maze !! i !! j) of <br>                                           0 -&gt; ' '<br>                                           2 -&gt; 'X' | j &lt;- [0..height - 1]<br>                                 ] | i &lt;- [0..width - 1]]<br></code></pre>
          <p><br>
          </p>
          <ul>
            <li><a id="Prolog">Prolog</a></li>
          </ul>
          <p> </p>
          <pre class="prettyprint"><code>contains(Pt, [Pt|_]).
contains(Pt, [_|T]) :- contains(Pt, T).

elem(Maze, [Px, Py], N) :- 
    nth0(Py, Maze, Row), nth0(Px, Row, N).

visitable(Maze, Route, Pt) :- 
    elem(Maze, Pt, 0), not(contains(Pt, Route)).

finish(Pt, Pt, Route, [Pt|Route]).

workaround(Maze, End, Route, Pt, Solution) :- 
    down(Maze, End, Route, Pt, Solution); 
    right(Maze, End, Route, Pt, Solution);
    up(Maze, End, Route, Pt, Solution); 
    left(Maze, End, Route, Pt, Solution).

down(Maze, End, Route, [Px, Py], Solution) :- 
    Npy is Py + 1, 
    find(Maze, End, Route, [Px, Npy], Solution).
    
right(Maze, End, Route, [Px, Py], Solution) :- 
    Npx is Px + 1, 
    find(Maze, End, Route, [Npx, Py], Solution).
    
up(Maze, End, Route, [Px, Py], Solution) :- 
    Npy is Py - 1, 
    find(Maze, End, Route, [Px, Npy], Solution).
    
left(Maze, End, Route, [Px, Py], Solution) :- 
    Npx is Px - 1,
    find(Maze, End, Route, [Npx, Py], Solution).

tryMore(Maze, End, Route, Pt, Solution) :- 
    workaround(Maze, End, [Pt|Route], Pt, Solution).

finish_or_tryMore(Maze, End, Route, Pt, Solution) :- 
    finish(End, Pt, Route, Solution); tryMore(Maze, End, Route, Pt, Solution).

find(Maze, End, Route, Pt, Solution) :- 
    visitable(Maze, Route, Pt), finish_or_tryMore(Maze, End, Route, Pt, Solution).

printMaze(_, X, Y, Solution) :- contains([X, Y], Solution), write("◇").
printMaze(0, _, _, _) :- write("  ").
printMaze(2, _, _, _) :- write("█").

printNext(T, Solution, X, Y) :- NX is X + 1, printRow(T, Solution, NX, Y).

printRow([], _, _, _) :- nl.
printRow([H|T], Solution, X, Y) :- printMaze(H, X, Y, Solution), printNext(T, Solution, X, Y).
    
printIt([Row|Rows], Solution, Y) :-
    printRow(Row, Solution, 0, Y), NY is Y + 1, printIt(Rows, Solution, NY).
    
printIt([], _, _) :- nl.

printAll(_, []) :- nl, nl.
printAll(Maze, [H|T]) :- printIt(Maze, H, 0), printAll(Maze, T).

main(_) :-
    Maze =  [[2, 2, 2, 2, 2, 2, 2, 2, 2],
             [2, 0, 0, 0, 0, 0, 0, 0, 2],
             [2, 0, 2, 2, 0, 2, 2, 0, 2],
             [2, 0, 2, 0, 0, 2, 0, 0, 2],
             [2, 0, 2, 0, 2, 0, 2, 0, 2],
             [2, 0, 0, 0, 0, 0, 2, 0, 2],
             [2, 2, 0, 2, 2, 0, 2, 2, 2],
             [2, 0, 0, 0, 0, 0, 0, 0, 2],
             [2, 2, 2, 2, 2, 2, 2, 2, 2]],
    findall(Solution, find(Maze,
         [7, 7],
         [],
         [1, 1],
         Solution
    ), Solutions), 
    printAll(Maze, Solutions).<br></code></pre>
          <p><br>
          </p>
          <br>
          <br>
          <div class="ad336-280" style="text-align: center;">
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins
              class="adsbygoogle" style="display:inline-block;width:336px;height:280px"
              data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
          <br>
          <div class="recommend" style="text-align: center;">
            <hr>
            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins
              class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390"
              data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
      </main>
    </div></body>
    <script src="../js/ui.js"></script>
    <div class="analytics"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QVQQYFSC8J"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-QVQQYFSC8J');</script></div>
</html>
