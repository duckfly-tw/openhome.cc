<!doctype html><html lang="zh-tw">
<head><meta http-equiv="refresh" content="0; URL=https://openhome.cc/Gossip/Toy/'https://openhome.cc/zh-tw/toy-lang/fundamental/hello/'">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="寫過這麼多語言的 Hello, World，終於有機會來為自己打造的語言寫個 Hello, World 介紹了，打開你的瀏覽器，連上 ToyLang 的示範網頁，在 Playground 中鍵入：
p...">

    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="Hello, World! Hello, Toy!">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://openhome.cc/Gossip/Toy/HelloToy.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="寫過這麼多語言的 Hello, World，終於有機會來為自己打造的語言寫個 Hello, World 介紹了，打開你的瀏覽器，連上 ToyLang 的示範網頁，在 Playground 中鍵入：
p...">

    <title>Hello, World! Hello, Toy!</title>

    <link rel="stylesheet" href="../css/pure-0.6.0/pure-min.css">

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="../css/layouts/side-menu-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="../css/layouts/side-menu.css">
    <!--<![endif]-->
  

     <link rel="stylesheet" href="../css/caterpillar.css">
     <script async src="../google-code-prettify/run_prettify.js"></script>
     <!-- 網頁層級廣告 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle =window.adsbygoogle || []).push({google_ad_client: "ca-pub-9750319131714390",enable_page_level_ads: true });</script></head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="HelloToy.html#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="https://openhome.cc/Gossip/Toy/index.html"><< Toy</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><br><div class="social" style="text-align: center;"><a href="http://twitter.com/caterpillar"><img title="Twitter" alt="Twitter" src="../images/twitter.png"></a> <a href="http://www.facebook.com/openhome.cc"><img title="Facebook" alt="Facebook" src="../images/facebook.png"></a> </div><br> <div id="search box"><script>(function() {var cx = 'partner-pub-9750319131714390:3926766884';var gcse = document.createElement('script');gcse.type = 'text/javascript';gcse.async = true;gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse, s);})();</script><gcse:searchbox-only></gcse:searchbox-only></div><br><div class="ad" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 2015 新版型 160 x 600 廣告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-9750319131714390"
     data-ad-slot="3747048883"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></li>
            </ul>
        </div>
    </div>

    <main id="main">
        <header class="header">
            <h1>Hello, World! Hello, Toy!</h1>
        </header>

        <article class="content">
            <br><div class="ad-3" style="text-align: center;"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型回應式廣告 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="7104125683" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div> 
            
            <p>寫過這麼多語言的 Hello, World，終於有機會來為自己打造的語言寫個 Hello, World 介紹了，打開你的瀏覽器，連上 <a href="https://openhome.cc/Gossip/Computation/toy_lang/">ToyLang 的示範網頁</a>，在 Playground 中鍵入：</p>
<pre class="prettyprint"><code lang="toy">print('Hello, World')
</code></pre>
<p>接著按下「Run It」按鈕，就會顯示「Hello, World」了，夠簡單吧！有些開發者在宣傳他們熱愛的語言時，經常會示範該語言顯示 Hello, World 有多簡單，藉此顯示它的簡潔易用，按照這個邏輯，ToyLang 應該也是一門不錯的語言吧！</p>
<p>別再相信這種說法了，一門語言好不好用，跟 Hello, World 有什麼關係？&hellip;XD</p>

<p>如果你想要自己有個環境可以執行 ToyLang，只要下載 <a href="https://github.com/JustinSDK/toy_lang">JustinSDK/toy_lang</a>，將之放在一個簡單的 HTTP 伺服器上（像是 Node.js 的 http-server），使用支援 ECMAScript 6 的瀏覽器（目前主流常青瀏覽器都支援）瀏覽 index.html，就可以開始使用了。</p>
<p>這是因為 ToyLang 是使用 ECMAScript 6 來實現的語言，不依賴任何第三方程式庫，如果你也好奇一門語言是如何打造出來的，或許 ToyLang 可以成為一個不錯的入門對象。</p>

<hr>

<p>雖然打造 ToyLang 過程中，主要都是在瀏覽器的環境中測試，然而，語言的內部實現都是 ECMAScript 6 標準 API，沒有使用到瀏覽器特定 API，因而想要在本機上執行 ToyLang，只要你有個支援 ECMAScript 6 模組的環境，基本上是沒有問題的。</p>
<p>例如，Node.js 可以打開 <code>--experimental-modules</code>，然後使用 Michael Jackson 模式，也就是將 .js 都改成 .mjs，就可以支援 ECMAScript 6 模組，若想要執行 ToyLang，必須有個讀取程式進入點檔案的程式，這可以參考 index.html 中底下的原始碼：</p>
<pre class="prettyprint"><code lang="toy">import {Module} from './toy_lang/js/module.js';

const TOY_MODUEL_PATH = 'toy_lang';

const ENVIRONMENT = {
    input(message) {
        return prompt(message, '');
    },
    output(value) {
        tty.textContent += value;
    },
    TOY_MODUEL_PATH,
    readFile : function(fileName) {
        return fetch(fileName)
                    .then(resp =&gt; {
                        if(resp.ok) {
                            return resp.text();
                        }
                        throw new Error(`GET ${fileName} ${resp.status} (${resp.statusText})`);
                    })
                    .then(code =&gt; [fileName, code]);
    }
};

Module.initialize(ENVIRONMENT)
      .then(_ =&gt; playToy());

function playToy() {
    document.getElementById('run').addEventListener('click', _ =&gt; {
        let code = document.getElementById('code').value;
        let tty = document.getElementById('tty');
        tty.textContent = '';
        Module.run('/main.toy', code);
    });
}
</code></pre>
<p>在瀏覽器上，讀取使用者輸入使用了 <code>prompt</code>，輸出目的地是個 <code>textarea</code>，如果要讀取檔案，使用了 Fetch，記得它會傳回一個 <code>Promise</code>，當中有讀取的檔案名稱及程式碼，然而這些都被封裝至一個 <code>ENVIRONMENT</code>。</p>
<p><code>TOY_MODUEL_PATH</code> 是 .toy 模組檔案的路徑設定，如果在 Toy 原始碼中 <code>import '/xxx/ooo'</code>，也就是路徑以 <code>/</code> 開頭，表示採絕對路徑，這個絕對路徑實際上是以 <code>TOY_MODUEL_PATH</code> 起算，目前是指向 <code>toylang</code>。</p>
<p>如果想要在 Node.js 上執行，只要將 <code>input</code>、<code>output</code>、<code>readFile</code> 使用 Node.js 的 API 實現，透過 <code>Module.initialize(ENVIRONMENT)</code> 初始化，之後進行程式進入點的讀取，然後將讀取的檔名與程式碼，傳給 <code>Module.run</code> 就可以了。</p>
<p>平均來說，ToyLang 在實現時，每個模組控制在不超過 300 行程式碼，通常只有 100 行左右，平均一個模組檔案有 150 行的話，目前有約 40 來個檔案，因而程式碼總行數約在 4、5000 行左右，是個語言實作的小專案。</p>
<p>如果你想要知道更基本的語言實作方式，那就參考 <a href="https://gist.github.com/JustinSDK/9c38136b90137387ad3518d4e99d15ba">simple_lang.js</a> 吧！</p>
<p>因為當初只是想寫個簡單的語言，有個簡單的運算式、流程語法，體驗一下怎麼實作就好，就只發佈為 Gist，然而&hellip;流程語法玩出來後，就說要不加個函式功能好了&hellip;函式動起來之後，覺得搞不好可以玩 Closure，Closure 行了就又想試類別，類別完成接著認為繼承應該也 OK，繼承妥善後就又心生挑戰模組了，就這麼一路玩了下來&hellip;XD</p>
<p>你可以在 <a href="https://gist.github.com/JustinSDK/9c38136b90137387ad3518d4e99d15ba">simple_lang.js</a> 中看到，最初 <code>print</code> 並不是個函式，而是個陳述句（就像 Python 2.x 中 <code>print</code> 是個陳述句，Python 3.0 之後是個函式），如果想要入門語言實作，將 <code>print</code> 實現為陳述句會是個比較簡單的作法，等到函式的基礎設施都實現之後，再將之改為函式。</p>
<p>在實現語言的過程中，主要參考的語法對象是 Python，因為 Python 的語法對 Parser 實現來說非常友善，至於行為上，主要參考的對象是 JavaScript、Python，以及一點點的 Java 及 Ruby（<a href="https://gist.github.com/JustinSDK/9c38136b90137387ad3518d4e99d15ba">simple_lang.js</a> 中的 <code>end</code> 就是學 Ruby 的），因而在 ToyLang 上看到 Python、JavaScript、Java 或 Ruby 的影子並不意外。</p>
<p>在後續的文件中，我會一邊解釋 ToyLang 的語法與行為，一邊解釋語言內部在實現上是採取什麼樣的策略，若你知道編譯原理等相關知識，在後續覺得 ToyLang 的做法土炮而陽春的話，那很正常，因為我是打著先動手做、碰上問題、解決問題，以便後續在看編譯原理的書或文件時，知道它們在談論些什麼的方式。</p>
<p>打造語言一直是我想要嘗試的，只是過去總覺得拼圖裡少了那麼幾塊，令我覺得拼圖湊得差不多的一本書是《<a href="http://books.gotop.com.tw/v_A462">深入理解運算原理</a>》，你也可以試著閱讀，在讀完這本書之後，我也寫了〈<a href="https://openhome.cc/Gossip/Computation/">運算隨想</a>〉記錄個人心得，可以搭配服用！</p>

            
           <br><br><div class="ad336-280" style="text-align: center;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 2015 新版型廣告 336 x 280 --><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9750319131714390" data-ad-slot="9976409681"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><br><div class="recommend" style="text-align: center;"><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 自動大小回應相符內容 --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9750319131714390" data-ad-slot="4953478487" data-ad-format="autorelaxed"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
        </article>
    </main>
</div></body>
</html>
<script src="../js/ui.js"></script>
<div class="analytics">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-QVQQYFSC8J', 'auto');
  ga('send', 'pageview');

</script>
</div>
